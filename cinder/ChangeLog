commit 141a4cab68cae6eef7f3fcc22b40e6c708e19126
Merge: c622cc7 8dd2140
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 9 09:59:11 2013 +0000

    Merge "Implement filter scheduler"

commit c622cc7a103e946726bd968a05990140dd1836b7
Merge: 9853972 027b78a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 9 07:28:18 2013 +0000

    Merge "Provide HP 3PAR array iSCSI driver"

commit 985397225ba942c086ffa6c5ab14a0d79c01e597
Merge: ba9604b c6f7f19
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 9 04:02:39 2013 +0000

    Merge "Use tempdir for lock_path in tests."

commit ba9604b0d8abe353926899eee2b072cd56e24262
Merge: cba4194 f791565
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 9 02:19:50 2013 +0000

    Merge "Enable cinder exception format checking in tests."

commit cba41944b54caf6e5bdd244c63c9e0f298fc2dfc
Merge: a3a28fe 3cb7ee4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 9 02:12:36 2013 +0000

    Merge "Update exceptions to pass correct kwargs."

commit a3a28fe010437878d17f0b31f51b9139873794a9
Merge: edb5491 a363c41
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 9 02:12:33 2013 +0000

    Merge "Add option to make exception format errors fatal."

commit 027b78a214e1f7ab7bbda342a024cb13dae8944d
Author: Walter A. Boring IV <walter.boring@hp.com>
Date:   Tue Dec 18 14:16:33 2012 -0800

    Provide HP 3PAR array iSCSI driver
    
    implements blueprint hp3par-volume-driver
    
    We have the driver broken into 2 files:
    hp_3par_common.py and
    hp_3par_iscsi.py
    
    The reason we do this is because we have a fibre channel driver
    that will be submitted shortly after this is committed.   The
    fibre channel driver and the iscsi driver share a lot of the same
    code that talks to the 3PAR array for provisioning.  So,
    it made sense not to have duplicate code.  The fibre channel driver
    will be dependent on the fibre channel support I am actively working
    on for nova/cinder grizzly release.
    
    The driver uses a 2 mechanisms to talk to the 3PAR array:
    1) a python REST client (hp3parclient) that lives in the pypi
       repository here:
       http://pypi.python.org/pypi/hp3parclient
    
    2) SSH.  We had to pull in some of the ssh code from the base san
       driver to help fix an issue with executing commands on the 3PAR
       array.  The 3PAR has the ability to turn on CSV output for command
       results, which makes this easier to parse.  Unfortunately, there
       is no way to turn CSV mode on permanently for all ssh requests.
       So, we have to turn on the CSV output for every single ssh command
       issued.  Since we use ssh as well, we require the san_* options
       to be set.
    
    We use a dual mechianism because the REST API that ships with the 3.1.2
    firmware doesn't support all of the capabilities a cinder driver needs
    to export volumes.
    
    When a newer version of the firmware comes out that supports host
    management on the 3PAR array, then we will get rid of the SSH code.
    
    Change-Id: I9826ba1a36e27a9be05457ee9236a491dbfd0713

 cinder/tests/test_hp3par_iscsi.py              |  443 ++++++++++++++++++++++
 cinder/volume/drivers/san/hp/hp_3par_common.py |  484 ++++++++++++++++++++++++
 cinder/volume/drivers/san/hp/hp_3par_iscsi.py  |  232 ++++++++++++
 etc/cinder/cinder.conf.sample                  |   30 ++
 tools/test-requires                            |    1 +
 5 files changed, 1190 insertions(+)

commit edb5491070f7a6bab257089e7b98278b68949cb1
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jan 8 14:00:09 2013 -0500

    Fix CinderClient exception name in EMCISCSIDriver.
    
    Change NovaException to CinderException in the emc driver.
    
    Change-Id: Id84ca2a354afc6a7b795aef779a9fdd2567ce0d6

 cinder/volume/drivers/emc.py |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f791565c5bff7b08bc10af538e54d0505457ef41
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jan 8 13:24:49 2013 -0500

    Enable cinder exception format checking in tests.
    
    Updates the Cinder test runner so that it enables
    'fatal_exception_format_errors' for testing.
    
    Includes a bunch of fixes to test exceptions as well so they
    will continue to pass.
    
    Change-Id: Idd30a810fb81e8e14490644779c3e03b6af25ff3

 cinder/test.py                                     |    1 +
 .../contrib/test_extended_snapshot_attributes.py   |    2 +-
 cinder/tests/api/contrib/test_volume_actions.py    |    2 +-
 cinder/tests/test_exception.py                     |    3 +++
 cinder/tests/test_misc.py                          |    2 ++
 cinder/tests/test_volume.py                        |    6 ++++--
 cinder/tests/test_xiv.py                           |   12 ++++++------
 7 files changed, 18 insertions(+), 10 deletions(-)

commit 3cb7ee45557ad68458bb96c3f4bcea1f796dcde9
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jan 8 13:23:15 2013 -0500

    Update exceptions to pass correct kwargs.
    
    Updates a variety of Cinder exceptions so that they pass the correct
    kwargs for proper exception message formatting. Previously
    these exceptions would work but have incorrect error messages
    because of how CinderException handled exception formatting errors.
    
    Change-Id: Id1d15b112cad46a698227fa172d81a9ab586e66e

 cinder/db/sqlalchemy/api.py             |    2 +-
 cinder/volume/driver.py                 |    6 +++---
 cinder/volume/drivers/nexenta/volume.py |    4 ++--
 cinder/volume/drivers/rbd.py            |   12 ++++++------
 cinder/volume/manager.py                |    2 +-
 5 files changed, 13 insertions(+), 13 deletions(-)

commit a363c410a0900a113293b14fef5b3d14814cc05e
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jan 8 13:20:57 2013 -0500

    Add option to make exception format errors fatal.
    
    Adds a new fatal_exception_format_errors config option which
    defaults to False. This option is use to control how the base
    CinderException class handles errors which can occur when it
    formats error messages.
    
    The motivation for this change is to be able to enable exception
    format checking in our tests by setting fatal_exception_format_errors=True.
    
    Change-Id: I2df952558d3f30a557cbb094f8bddcc37af9b5aa

 cinder/exception.py |   18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

commit 8dd2140c4c03582965d74232c7b61aef34e43661
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Sat Oct 6 00:08:09 2012 +0800

    Implement filter scheduler
    
    In order to do more sophisticated scheduling (e.g. schedule based on volume
    type), filter scheduler is introduced. Several changes are made to make this
    possible, some of them are similar to the counterpart in Nova:
    
    - add HostState class to host_manager in order to store volume capabilities
    - implement get_volume_stats() method of iSCSIDriver as an example to
    demonstrate how volume backend driver reports capabilities as well as status
    - add scheduler_options.py and 'scheduler_json_config_location' flag to be
    allow loading json configuration file for scheduler at run time
    - port common filters/weights from oslo
    - add capacity weigher (scheduler/weights/capacity.py) for picking up
    target volume backend by weighing free capacity of the host. The default
    behavior is to spread volumes across hosts; by changing the
    'capacity_weight_multiplier' to negative number, volume placing behavior will
    become stacking.
    - add capacity filter which filters those hosts have insufficient storage space
    to serve the request.
    - add 'reserved_percentage' config option to indicate how much space is
    reserved. Capacity reservation is needed when volume resize is enabled.
    - change default scheduler to 'filter.FilterScheduler'.
    - add 'publish_service_capabilities()' method to volume RPC API to allow
    scheduler to have volume service report capabilities. This bumps volume RPC
    API to version 1.2
    - remove 'volume_force_update_capabilities' config option, volume status will be
    report to scheduler in every checking.
    
    The implication of this change to storage/backend driver developer:
    - implementation of get_volume_stats() of the driver is now a *MUST*, filter
    scheduler heavily relies on the status/capabilities reported by backend driver
    to makeplacement decision.  To ensure Cinder works seamlessly on the storage
    system, driver should at least report following capabilities/status:
    ----------------------+---------------------------+---------------------------
      Capability/Status   |      Description          |         Example
    ----------------------+---------------------------+---------------------------
     'volume_backend_name'| back-end name, string     | 'Example_Storage_Backend'
    ----------------------+---------------------------+---------------------------
      'vendor_name'       | vendor name, string       | 'OpenStackCinder'
    ----------------------+---------------------------+---------------------------
      'driver_version'    | version, string           |  '1.0a'
    ----------------------+---------------------------+---------------------------
      'storage_protocol'  | supported protocols,      | 'iSCSI', 'RBD', 'FC', 'NFS'
                          | string or list of strings | ['iSCSI', 'NFS', 'FC']
    ----------------------+---------------------------+---------------------------
      'total_capacity_gb' | capacity in GB, integer   |  102400
    ----------------------+---------------------------+---------------------------
      'free_capacity_gb'  | available capacity in GB, |  1000
                          | integer                   |
    ----------------------+---------------------------+---------------------------
    'reserved_percentage' | reserved space in         |  0, 10
                          | percentage, integer       |
    ----------------------+---------------------------+---------------------------
    
    The implication of this change to Cinder administrator:
    - the default setting for filter scheduler should work well with the benefits
    of:
      * being able to fully utilize capacity of backends (driver now has to report
      actul total space and space utilization and scheduler uses these info) not
      limited by the 'max_gigabytes' config option any more;
      * being able to choose placement policy between spreading & stacking for
      volume creation (by modifying the 'capacity_weight_multiplier' in
      CapacityWeigher)
    - with filter scheduler, Cinder is now able to utilize the advanced features/
    capabilities provided by different storage back-ends via: defining different
    volume types with proper extra_specs. Volume types can be considered as sets
    of back-end capabilities requirement.
     For example, a volume type which has 'storage_protocol':'FC' key/value pair
    definition in its extra_spec can only be served by those back-ends who report
    they support FiberChannel protocol. Another example is volume type has 'QoS'
    requirement can only be served by back-ends support QoS.
    
    Note/TODO:
    * Currently scheduler makes its decision based on the status and capabilities
    information reported by volume nodes, and these information is stored in memory
    of scheduler process. More sophisticated way may be add on table in DB to
    record status/capabilities of all volume nodes, like Nova does for compute nodes.
    
    implement bp volume-type-scheduler
    
    DocImpact
    
    Change-Id: I8b5305bce3b24bcc85365037356a8f36d0107133

 cinder/exception.py                                |    8 +
 cinder/openstack/common/scheduler/filter.py        |   71 ++++++
 .../openstack/common/scheduler/filters/__init__.py |   41 ++++
 .../scheduler/filters/availability_zone_filter.py  |   30 +++
 .../scheduler/filters/capabilities_filter.py       |   63 +++++
 .../common/scheduler/filters/extra_specs_ops.py    |   68 ++++++
 .../common/scheduler/filters/json_filter.py        |  150 ++++++++++++
 cinder/openstack/common/scheduler/weight.py        |   91 +++++++
 .../openstack/common/scheduler/weights/__init__.py |   45 ++++
 cinder/scheduler/filter_scheduler.py               |  130 ++++++++++
 cinder/scheduler/filters/__init__.py               |   14 ++
 cinder/scheduler/filters/capacity_filter.py        |   44 ++++
 cinder/scheduler/host_manager.py                   |  257 +++++++++++++++++++-
 cinder/scheduler/manager.py                        |   19 +-
 cinder/scheduler/scheduler_options.py              |  105 ++++++++
 cinder/scheduler/weights/__init__.py               |   14 ++
 cinder/scheduler/weights/capacity.py               |   50 ++++
 cinder/tests/scheduler/fakes.py                    |   77 ++++--
 cinder/tests/scheduler/test_capacity_weigher.py    |   87 +++++++
 cinder/tests/scheduler/test_filter_scheduler.py    |  107 ++++++++
 cinder/tests/scheduler/test_host_filters.py        |   99 ++++++++
 cinder/tests/scheduler/test_host_manager.py        |  176 ++++++++++++++
 cinder/tests/scheduler/test_scheduler_options.py   |  138 +++++++++++
 cinder/volume/driver.py                            |   51 +++-
 cinder/volume/manager.py                           |   42 ++--
 cinder/volume/rpcapi.py                            |    5 +
 openstack-common.conf                              |    2 +-
 setup.py                                           |   21 ++
 tools/pip-requires                                 |    1 +
 29 files changed, 1935 insertions(+), 71 deletions(-)

commit 93bb58732ddb1f2e561347f35699f66c5263ac02
Merge: d6dc273 d99fb60
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 8 04:10:32 2013 +0000

    Merge "Implement ability to Clone volumes in Cinder."

commit d6dc273cb72ce0ffe09251436332d9b12605f0f9
Merge: e57cd51 e3132d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 7 18:22:05 2013 +0000

    Merge "Add service mgmt extension."

commit e57cd5171d89fb60c41e5a301bbc442374d34fb8
Merge: 9c29408 3068391
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 7 17:57:24 2013 +0000

    Merge "Make WebOb version specification more flexible"

commit c6f7f1920e52ff3d44ab16e1fe77b895b5a4ab16
Author: john-griffith <john.griffith@solidfire.com>
Date:   Mon Jan 7 10:08:16 2013 -0700

    Use tempdir for lock_path in tests.
    
    Commit: 2331d3336a6adf4fc13a3b187e91a5d1b1f7c723
    introduced use of lockutils but wasn't setting a lock_path, in the tests.
    As a result we were polluting cinder/openstack/ with cinder-xxxx lockfiles.
    
    This patch adds a tempfile and cleanup to the test so we don't leave any
    junk behind.
    
    Change-Id: Idd9fee928ff0fcf3f8d1c30ee88c5306b88e290c

 cinder/tests/api/contrib/test_admin_actions.py |    7 +++++++
 1 file changed, 7 insertions(+)

commit 3068391b52d8b86d2560bfea9014f4c70e10fd72
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Mon Jan 7 10:52:39 2013 -0500

    Make WebOb version specification more flexible
    
    Change the WebOb version to >=1.0.8 as an temporary
    measure to allow the actual version update to 1.2.3
    to roll out across the projects one at a time without
    breaking the integration tests.
    
    Change-Id: I9969b02a6896f7b952301e40e96f0ef6df8f34c0
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>

 tools/pip-requires |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9c294087e4cebf04bc87b32ffd3afdf8f91a2436
Author: Eric Harney <eharney@redhat.com>
Date:   Thu Jan 3 15:08:53 2013 -0500

    Fix cmds clearing in TargetAdminTestCase.
    
    clear_cmds() should reference self.cmds rather than cmds.
    
    Change-Id: I1d191aee6a713cf9f2b08c46bf47c1959235cc15

 cinder/tests/test_iscsi.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0b93217fa75959f9f83b259e38c356a43eb8a720
Author: Chuck Short <zulcss@ubuntu.com>
Date:   Thu Jan 3 09:50:57 2013 -0600

    Add missing library
    
    According to pyflakes:
    
    cinder/api/common.py:246: undefined name 'minidom'
    cinder/api/common.py:254: undefined name 'minidom'
    cinder/api/common.py:272: undefined name 'minidom'
    cinder/api/common.py:284: undefined name 'minidom'
    
    Add from xml.dom import minidom
    
    Change-Id: Iadb1586ac15c29bb1f2154324e529976f82c19f0
    Signed-off-by: Chuck Short <zulcss@ubuntu.com>

 cinder/api/common.py |    1 +
 1 file changed, 1 insertion(+)

commit f8e683f13bfa435ddbd221b8832b9c7ae65f6a2e
Merge: 9963cb7 f0d5dee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 3 05:13:59 2013 +0000

    Merge "Adding marker, pagination, sort key and sort direction to v2 api"

commit 9963cb70fd4d07227077e7269fa7b325faa3868f
Merge: d833297 2adf688
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 3 05:12:07 2013 +0000

    Merge "Add pyflakes"

commit d833297d5a8d27a2aeab6b035eaf1590e294dccb
Merge: 5f6cb2f 2331d33
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 2 23:48:08 2013 +0000

    Merge "Adds synchronization to attach volume."

commit 5f6cb2f1c19687ef3a40cf6988f12b25c5269193
Author: Sean Dague <sdague@linux.vnet.ibm.com>
Date:   Wed Jan 2 14:16:19 2013 -0500

    use deleted = False, not 0 for update
    
    Fixes bug #1095401
    
    When running tempest on cinder on postgresql we get a number
    of errors because this call was trying to set deleted = 0.
    On mysql 0 == False, but on postgresql this is a type error.
    
    Change-Id: Ice85550e8138e0656c93a8a800afdbc5935e4bcc

 cinder/db/sqlalchemy/api.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d99fb6011cc610b78d42891800189feed0391742
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Dec 12 15:23:56 2012 -0700

    Implement ability to Clone volumes in Cinder.
    
    This implements the capability to create usable volume clones in Cinder,
    for the LVM case we create a temporary snapshot to copy from so that
    volumes can remain attached during cloning.  This works by passing
    in a source-volume-id to the create command (similar to create-from-snapshot).
    
    Currently we limit clone to the same Cinder node, and only for the base LVM driver.
    All other drivers should raise NotImplemented, most inherit from the SANISCSIDriver,
    so move the function there and raise until we have a general implementation
    for SANISCSI based drivers.
    
    Those drivers that inherit from ISCSI directly instead of SANISCSI,
    add the function explicitly and raise NotImplementedError there as well.
    
    Implements blueprint add-cloning-support-to-cinder
    
    Change-Id: I72bf90baf22bec2d4806d00e2b827a594ed213f4

 cinder/api/v1/volumes.py                           |   11 ++++
 cinder/api/v2/views/volumes.py                     |    1 +
 cinder/api/v2/volumes.py                           |   10 +++
 .../versions/005_add_source_volume_column.py       |   41 ++++++++++++
 cinder/db/sqlalchemy/models.py                     |    1 +
 cinder/tests/api/v1/stubs.py                       |    2 +
 cinder/tests/api/v1/test_volumes.py                |   13 ++++
 cinder/tests/api/v2/stubs.py                       |    2 +
 cinder/tests/api/v2/test_volumes.py                |   11 +++-
 cinder/tests/test_migrations.py                    |   17 +++++
 cinder/tests/test_volume_rpcapi.py                 |    4 +-
 cinder/volume/api.py                               |   65 +++++++++++++++++---
 cinder/volume/driver.py                            |   19 ++++++
 cinder/volume/drivers/netapp.py                    |    8 +++
 cinder/volume/drivers/nexenta/volume.py            |    4 ++
 cinder/volume/drivers/nfs.py                       |    3 +
 cinder/volume/drivers/rbd.py                       |    3 +
 cinder/volume/drivers/san/san.py                   |    4 ++
 cinder/volume/drivers/sheepdog.py                  |    3 +
 cinder/volume/drivers/xenapi/sm.py                 |    3 +
 cinder/volume/drivers/zadara.py                    |    4 ++
 cinder/volume/manager.py                           |   12 ++--
 cinder/volume/rpcapi.py                            |   10 ++-
 23 files changed, 232 insertions(+), 19 deletions(-)

commit 2adf6889233273f5bd03260d408dce91aa9c6275
Author: Chuck Short <zulcss@ubuntu.com>
Date:   Wed Jan 2 08:43:53 2013 -0600

    Add pyflakes
    
    Add tox option to use pyflakes.
    
    Change-Id: Ic77ec3f54cb89341d5b01feb3417e07f43d20c9c
    Signed-off-by: Chuck Short <zulcss@ubuntu.com>

 tools/flakes.py |   22 ++++++++++++++++++++++
 tox.ini         |    4 ++++
 2 files changed, 26 insertions(+)

commit 2331d3336a6adf4fc13a3b187e91a5d1b1f7c723
Author: Rohit Karajgi <rohit.karajgi@nttdata.com>
Date:   Fri Dec 28 04:58:46 2012 -0800

    Adds synchronization to attach volume.
    
    This patch adds the following changes:
    1. Move db update for volume status during attach to volume.manager
    2. Add lock synchronization to volume attach operation
    3. Related unit tests
    
    Fixes Bug 1087253
    Change-Id: I15242766bf4cfa4da67789c485fdf6886983eb45

 cinder/tests/api/contrib/test_admin_actions.py |   41 +++++++++++++++++
 cinder/tests/test_volume.py                    |    5 +--
 cinder/volume/api.py                           |    2 -
 cinder/volume/manager.py                       |   57 ++++++++++++++++--------
 4 files changed, 81 insertions(+), 24 deletions(-)

commit 18269eaad82bae89a21929ece49f145f299e4632
Merge: 4c42d1e 21788e4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 28 01:47:36 2012 +0000

    Merge "Add EMC Volume Driver in Cinder"

commit 21788e4a42118d45fbcb3649110cf6c92363d4fc
Author: Xing Yang <xing.yang@emc.com>
Date:   Fri Dec 14 00:05:14 2012 -0500

    Add EMC Volume Driver in Cinder
    
    Add support for EMC storage in the Cinder-Volume service.
    This driver is based on the existing ISCSIDriver, with the ability to
    create/delete and attach/detach volumes and create/delete snapshots, etc.
    The Cinder Driver executes the volume operations by communicating with the
    backend EMC storage. It uses a CIM client in python called PyWBEM to make
    CIM operations over HTTP.
    EMC CIM Object Manager (ECOM) is packaged with the SMI-S Provider. It is a
    CIM server that allows CIM clients to make CIM operations over HTTP, using
    SMI-S in the backend for EMC storage operations.
    SMI-S Provider supports the SNIA Storage Management Initiative (SMI), an
    ANSI standard for storage management. It supports VMAX/VMAXe and VNX
    storage systems.
    
    Implement bp: emc-volume-driver
    
    Change-Id: Iafce98603d31d66a7297ef11c92d5e6ac6ba3737

 cinder/tests/test_emc.py                |  381 ++++++++
 cinder/volume/drivers/emc.py            | 1445 +++++++++++++++++++++++++++++++
 etc/cinder/cinder_emc_config.xml.sample |   12 +
 3 files changed, 1838 insertions(+)

commit f0d5dee0d3aed14d9c49df073a220c19e695461c
Author: Mike Perez <thingee@gmail.com>
Date:   Tue Dec 18 00:42:49 2012 -0800

    Adding marker, pagination, sort key and sort direction to v2 api
    
    Taking a cue from quantum, use glance's pagination function.
    
    bp api-pagination
    
    Change-Id: Ida7ade8d9332c88679849f7c640651df7e855abb

 cinder/api/v1/volumes.py            |    4 +-
 cinder/api/v2/volumes.py            |   33 +++++----
 cinder/common/sqlalchemyutils.py    |  128 +++++++++++++++++++++++++++++++++++
 cinder/db/api.py                    |   10 +--
 cinder/db/sqlalchemy/api.py         |   32 +++++++--
 cinder/tests/api/v1/test_volumes.py |    6 +-
 cinder/tests/api/v2/stubs.py        |    6 +-
 cinder/tests/api/v2/test_volumes.py |   89 +++++++++++++++++++++++-
 cinder/volume/api.py                |   26 ++++---
 9 files changed, 294 insertions(+), 40 deletions(-)

commit 4c42d1eb86a44fb3c3ee3a3f446103dce95be8ec
Merge: c2e9e2f 035cd28
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Dec 22 07:00:09 2012 +0000

    Merge "Make the NetAppISCSIDriver._is_clone_done() method able to handle empty responses. Add unit tests to exercise this case."

commit c2e9e2f37804e1fe55830e221df584844c5390f2
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Fri Dec 21 09:33:22 2012 -0800

    Fix typo in image_utils tempfile handling
    
    Commit cbcd340 changed from NamedTemporaryFile to mkstemp, but
    mkstemp returns a file descripter, not a file object. We therefore
    need to close the fd using os.close(). This was tested using
    devstack.
    
    Change-Id: I808fa470a141e249fe30ee762ee94f47ecfd3f63

 cinder/image/image_utils.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 035cd28ed36c4ec34c20e7cedf0815af72e3f2c0
Author: Ben Swartzlander <bswartz@netapp.com>
Date:   Fri Dec 21 00:24:46 2012 -0500

    Make the NetAppISCSIDriver._is_clone_done() method able to handle
    empty responses. Add unit tests to exercise this case.
    
    bug 1090168
    
    Change-Id: Ia51a73b8ebead7a0f3be9202794ca8549bdf3e5b

 cinder/tests/test_netapp.py     |   29 ++++++++++++++++++++++++++++-
 cinder/volume/drivers/netapp.py |    2 ++
 2 files changed, 30 insertions(+), 1 deletion(-)

commit cbcd340c67c914e38342471c8a1a0aba984c15ff
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Thu Dec 20 13:43:09 2012 -0800

    Make sure we don't double remove tmp on exception
    
    The fetch_to_raw code would fail if an exception is thrown during
    fetch because it would attempt to delete the same file twice.
    
    Fix this by using mkstemp and our wrapper which only deletes the
    tmp file if it exists.
    
    Change-Id: I7bb3171d3c7dc023fc743578c2ce6e804bbc49f5

 cinder/image/image_utils.py |   62 +++++++++++++++++++++----------------------
 1 file changed, 31 insertions(+), 31 deletions(-)

commit e3132d29f40333e66500a454ac8f68b652d4ef12
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Dec 18 23:02:32 2012 +0000

    Add service mgmt extension.
    
    Add capability to list, enable and disable cinder services on a node.
    
    Change-Id: I6728fee46d7b15a009bc6c329414ede8c01852b4

 cinder/api/contrib/services.py            |  139 +++++++++++++++++++
 cinder/tests/api/contrib/test_services.py |  216 +++++++++++++++++++++++++++++
 cinder/tests/api/v2/test_volumes.py       |    1 -
 etc/cinder/policy.json                    |    4 +-
 4 files changed, 358 insertions(+), 2 deletions(-)

commit 3b02985805a1442c97edb119ec01c013f3ab36cb
Author: Walter A. Boring IV <walter.boring@hp.com>
Date:   Tue Dec 11 11:26:16 2012 -0800

    Added the lockutils, fileutils, gettextutils
    
    The 3par driver, for both iSCSI and Fibre Channel,
    that I will commit soon, needs the lockutils to ensure thread safety in
    each of the driver entry points.  The driver uses a single shared http
    session for all of it's connections to the 3par drive array.
    This is required for the driver because of the limitation on the
    3par's WSAPI only supporting a very small number of open connections.
    
    For example without this, the driver will have problems when 2 users try and
    create a volume at the same time.   I've discovered this in my threaded
    stress test tool.
    
    Change-Id: Ic9d7295e7bcbf5c06086ddf5bd9b8b2fe771faa5

 cinder/openstack/common/fileutils.py    |   35 +++++
 cinder/openstack/common/gettextutils.py |    2 +-
 cinder/openstack/common/lockutils.py    |  233 +++++++++++++++++++++++++++++++
 openstack-common.conf                   |    2 +-
 4 files changed, 270 insertions(+), 2 deletions(-)

commit 319221d567e7a1c237fcf0eb1706181ea4cdf53c
Merge: deb88ed afe1d21
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 19 18:02:27 2012 +0000

    Merge "Moving host admin extension with other extensions"

commit deb88ed7cbe8a5d018b03cbdc71dd41dd1d5ecc3
Merge: 10c6c7c 147e30b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 19 18:02:06 2012 +0000

    Merge "Fixes a Windows volume driver bug on disk export"

commit 147e30b4a8a9ce8361b048239a0187ac04679db1
Author: Alessandro Pilotti <ap@pilotti.it>
Date:   Wed Dec 12 22:10:35 2012 +0200

    Fixes a Windows volume driver bug on disk export
    
    Fixes Bug #1089168
    
    When a VHD created by Cinder using the iSCSI Target Server is deleted
    manually, at the next startup the cinder-volume service terminates with an
    exception.
    This fix adds a check to verify if the disk exists.
    
    Change-Id: I830cb8332dcef845591bd88cccef1e0e9781ffcc

 cinder/tests/test_windows.py                       |    2 +-
 ...dowsDriver.test_check_for_setup_errors_wmi.p.gz |  Bin 473 -> 473 bytes
 ...ws.TestWindowsDriver.test_create_export_os.p.gz |  Bin 439 -> 439 bytes
 ...s.TestWindowsDriver.test_create_export_wmi.p.gz |  Bin 1441 -> 1455 bytes
 ....TestWindowsDriver.test_create_snapshot_os.p.gz |  Bin 441 -> 441 bytes
 ...TestWindowsDriver.test_create_snapshot_wmi.p.gz |  Bin 1479 -> 1476 bytes
 ...Driver.test_create_volume_from_snapshot_os.p.gz |  Bin 500 -> 500 bytes
 ...river.test_create_volume_from_snapshot_wmi.p.gz |  Bin 1843 -> 1840 bytes
 ...ws.TestWindowsDriver.test_create_volume_os.p.gz |  Bin 439 -> 439 bytes
 ...s.TestWindowsDriver.test_create_volume_wmi.p.gz |  Bin 1057 -> 1057 bytes
 ....TestWindowsDriver.test_delete_snapshot_os.p.gz |  Bin 441 -> 441 bytes
 ...TestWindowsDriver.test_delete_snapshot_wmi.p.gz |  Bin 1502 -> 1504 bytes
 ...ws.TestWindowsDriver.test_delete_volume_os.p.gz |  Bin 472 -> 472 bytes
 ...s.TestWindowsDriver.test_delete_volume_wmi.p.gz |  Bin 1039 -> 1040 bytes
 ...ws.TestWindowsDriver.test_ensure_export_os.p.gz |  Bin 439 -> 439 bytes
 ...s.TestWindowsDriver.test_ensure_export_wmi.p.gz |  Bin 1441 -> 1453 bytes
 ...indowsDriver.test_initialize_connection_os.p.gz |  Bin 447 -> 447 bytes
 ...ndowsDriver.test_initialize_connection_wmi.p.gz |  Bin 1976 -> 1982 bytes
 ...ws.TestWindowsDriver.test_remove_export_os.p.gz |  Bin 439 -> 439 bytes
 ...s.TestWindowsDriver.test_remove_export_wmi.p.gz |  Bin 1451 -> 1462 bytes
 cinder/volume/drivers/windows.py                   |    6 +++++-
 21 files changed, 6 insertions(+), 2 deletions(-)

commit 10c6c7cfcbe767ae16b29f29625d2617efd921b1
Merge: f61e854 349d5bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 19 05:00:51 2012 +0000

    Merge "Add image metadata API extension"

commit afe1d219883c99b98e8850d07dad88417e9b3334
Author: Mike Perez <thingee@gmail.com>
Date:   Tue Dec 18 20:26:29 2012 -0800

    Moving host admin extension with other extensions
    
    Think this was merged during the big api changes in g1. This allows the
    extension to actually be enabled.
    
    Change-Id: I07bb9646fd11368fe5ffd7f85617ecbf103dc788

 cinder/api/contrib/hosts.py                  |  266 ++++++++++++++++++++++++++
 cinder/api/openstack/volume/contrib/hosts.py |  266 --------------------------
 2 files changed, 266 insertions(+), 266 deletions(-)

commit f61e854460c5ad8129b2230686465884eb6b8852
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Mon Dec 17 14:38:53 2012 -0800

    Allow the lvm backed drivers to use mirrrors
    
    Adds a new configuration option called lvm_mirrors. If this is
    set to a value > 0, it will create the specified number of mirrors
    when creating volumes. Note that lvm_mirrors + 2 pvs are required
    in the volume group for lvm mirroring to work properly.
    
    Change-Id: I7e28d11c48cdbb99e17b0930b720fbd805bf9931

 cinder/volume/driver.py       |   19 +++++++++++++++++--
 etc/cinder/cinder.conf.sample |    4 ++++
 2 files changed, 21 insertions(+), 2 deletions(-)

commit 792d3a166b7ac8478e21bcd255ac53f7bdec719e
Merge: 5bda255 be3d8ea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Dec 17 04:13:51 2012 +0000

    Merge "CHAP support for IBM Storwize/SVC driver."

commit be3d8ea90a9238b7afc5558db14c080e15001685
Author: Avishay Traeger <avishay@il.ibm.com>
Date:   Thu Nov 29 12:22:00 2012 +0200

    CHAP support for IBM Storwize/SVC driver.
    
    This implements support for CHAP authentication of hosts by the IBM
    Storwize/SVC controller. A host entity was created on the controller for
    each server that logs in with iSCSI. Now a randomly-generated CHAP
    secret is added to the host entity on the controller (passed via the
    controller CLI over SSH).
    
    Implements blueprint add-chap-support-to-storwize-svc-driver
    
    Change-Id: I60b5ddd0ea2e1ede3070779e5293820480aa0401

 cinder/tests/test_storwize_svc.py     |   37 +++++++++++++++
 cinder/volume/drivers/storwize_svc.py |   80 +++++++++++++++++++++++++++++++++
 2 files changed, 117 insertions(+)

commit 5bda255e64ad8394ca4e39393db4114aa613464f
Merge: e10da6e 33b21f3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Dec 15 04:29:12 2012 +0000

    Merge "Remove instance quota re-sync code"

commit e10da6e8eedd96dc8c4e5b680659e6509a8742c3
Merge: 403142a db9cf2b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 14 16:24:39 2012 +0000

    Merge "Support glance servers over https"

commit 33b21f3f466d94b83df95d4a756b60ec2a02437d
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Dec 14 14:19:20 2012 +0000

    Remove instance quota re-sync code
    
    Obviously came in inadvertantly in a copy'n'paste from the
    nova quotas logic.
    
    Not relevant to volume quotas and would fail if ever called
    (as instance_data_get_for_project is not part of the cinder
    DB API).
    
    Change-Id: Ib52b962b51003955430ad292084a3e3010736a2c

 cinder/quota.py |   19 ++++++-------------
 1 file changed, 6 insertions(+), 13 deletions(-)

commit 349d5bdf0ed6fb18308c1e1e352d726ed9e00d8f
Author: Nikola Dipanov <ndipanov@redhat.com>
Date:   Fri Dec 7 15:53:28 2012 +0100

    Add image metadata API extension
    
    This patch introduces an API extension that will expose the volume
    metadata inherited from the image if the volume was created from an image.
    
    This data will be used by Nova when booting from volume without any
    image supplied.
    
    In addition, the patch introduces a helper method on the volume.API
    class for accessing the image metadata and also updates the policy.json
    files to be aware of the new extension.
    
    This patch is part of the blueprint improve-boot-from-volume
    
    This patch also introduces DocImpact as it extends the cinder API
    
    Change-Id: I64515cc02f8de863e65e96c66eb1fda1a1954ac7

 cinder/api/contrib/volume_image_metadata.py        |  106 ++++++++++++++++
 .../api/contrib/test_volume_image_metadata.py      |  130 ++++++++++++++++++++
 cinder/tests/policy.json                           |    1 +
 cinder/volume/api.py                               |    7 ++
 etc/cinder/policy.json                             |    1 +
 5 files changed, 245 insertions(+)

commit 403142a43f553b1488eae795c6dfff3967825bf1
Author: Sam Morrison <sorrison@gmail.com>
Date:   Fri Dec 14 13:49:46 2012 +1100

    Raise NotImplemented for drivers that don't support images
    
    Fixes bug #1090169
    
    Raise NotImplementedError on copy_image_to_volume and
    copy_volume_to_image on drivers that inherit from
    driver.ISCSIDriver that don't support this feature yet.
    
    Change-Id: I516d424a75dd21260f2ccc68467a8f6e6ac08e4d

 cinder/volume/drivers/netapp.py         |    8 ++++++++
 cinder/volume/drivers/nexenta/volume.py |    8 ++++++++
 cinder/volume/drivers/san/san.py        |    8 ++++++++
 cinder/volume/drivers/windows.py        |    8 ++++++++
 cinder/volume/drivers/zadara.py         |    8 ++++++++
 5 files changed, 40 insertions(+)

commit 11c80571ae7b4c4afff99edd30f51e060fbac396
Author: john-griffith <john.griffith@solidfire.com>
Date:   Thu Dec 13 13:17:31 2012 -0700

    Add *.swp to gitignore.
    
    Add swap files and alphabetize the list.
    
    Change-Id: Idaa9aec831740aa965a8d2d2486f4d9ffbb50746

 .gitignore |   35 ++++++++++++++++++-----------------
 1 file changed, 18 insertions(+), 17 deletions(-)

commit db9cf2bca1cc6158ca129c7bfc6bead59ff1c7de
Author: Sam Morrison <sorrison@gmail.com>
Date:   Wed Dec 12 10:54:54 2012 +1100

    Support glance servers over https
    
    Fixes bug 1089147
    
    Updated glance.py from nova's version to support glance over ssl
    eg. glance_api_servers=https://glance.mydomain:9292
    
    New Flag: glance_api_insecure
    Set to True to disable certificate checking
    
    Change-Id: I53e62900265fea2de9b0ec20bbff0c40f1b14c91

 cinder/flags.py                   |    4 +++
 cinder/image/glance.py            |   62 ++++++++++++++++++++++++-------------
 cinder/tests/image/test_glance.py |    2 +-
 3 files changed, 45 insertions(+), 23 deletions(-)

commit 97ec98530331b590ab736252aa2cbe3ef7a557c6
Merge: 65b3421 484fb9e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 12 18:17:30 2012 +0000

    Merge "Changing display_name to name in v2 api"

commit 65b3421f4b66b1e26be54f4bcb93fd3f6c7fb6f8
Author: Carlos Goncalves <cgoncalves@av.it.pt>
Date:   Thu Dec 6 14:50:29 2012 +0000

    Add commands used by NFS volume driver to rootwrap
    
    Fixes bug 1087282
    
    Change-Id: Ib873c334633b4d586c2e53bac5d1cae0dcf65be7

 etc/cinder/rootwrap.d/volume.filters |    8 ++++++++
 1 file changed, 8 insertions(+)

commit 484fb9e1c748e718349e451e80a0e025ed007b1d
Author: Mike Perez <thingee@gmail.com>
Date:   Sat Dec 8 12:16:43 2012 -0800

    Changing display_name to name in v2 api
    
    This allows the v2 api responses to be more consistent with other
    projects. This approach is making the idea compatible in v2, rather
    than changing the model.
    
    blueprint name-attr-consistency
    
    Change-Id: I74e46b4204353d5712be788fe2138784b2a72305

 cinder/api/v2/views/volumes.py      |    4 +-
 cinder/api/v2/volumes.py            |   23 +++++++--
 cinder/tests/api/v2/test_volumes.py |   91 ++++++++++++++++++-----------------
 3 files changed, 67 insertions(+), 51 deletions(-)

commit 29b9290cb9f9556d5f9e1e90af4cfaba64e4ba2f
Merge: 0c507aa 6a31bf3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Dec 8 04:21:13 2012 +0000

    Merge "Make copy_to_volume a bit more useful."

commit 0c507aa6d08a9471bf896961cc99d40f337f1e4d
Author: Mike Perez <thingee@gmail.com>
Date:   Mon Dec 3 10:38:27 2012 -0800

    Make summary and detail view consistent with other projects
    
    This introduces the v2 volume view builder for ease of response
    changing.
    
    blueprint vol-api-consistency
    
    Change-Id: If061e069d3b09ee5de15f1cbc7a46fa29c95a4cd

 cinder/api/v2/views/__init__.py     |   16 ++++
 cinder/api/v2/views/volumes.py      |  122 ++++++++++++++++++++++++++
 cinder/api/v2/volumes.py            |  108 ++++-------------------
 cinder/tests/api/v2/test_volumes.py |  162 ++++++++++++++++++++++-------------
 4 files changed, 255 insertions(+), 153 deletions(-)

commit 29b3da71bfb3389c7826efaa3ad76045e74c463e
Author: Mike Perez <thingee@gmail.com>
Date:   Fri Nov 30 16:23:37 2012 -0800

    creating separate v1 and v2 stubs and general fakes
    
    For now contribs will use v2, but in the future will test against all
    supported versions.
    
    Change-Id: I47c30f8c2fc8a89f92065122bf1ca6aec1ce8b2d

 cinder/tests/api/contrib/test_admin_actions.py     |   33 +--
 .../contrib/test_extended_snapshot_attributes.py   |    8 +-
 cinder/tests/api/contrib/test_types_extra_specs.py |    4 +-
 cinder/tests/api/contrib/test_types_manage.py      |    8 +-
 cinder/tests/api/contrib/test_volume_actions.py    |   23 +-
 .../api/contrib/test_volume_host_attribute.py      |   18 +-
 .../api/contrib/test_volume_tenant_attribute.py    |   18 +-
 cinder/tests/api/fakes.py                          |  175 ++++++++++++
 cinder/tests/api/openstack/fakes.py                |  283 --------------------
 cinder/tests/api/openstack/test_wsgi.py            |    2 +-
 cinder/tests/api/test_router.py                    |    2 +-
 cinder/tests/api/v1/stubs.py                       |  129 +++++++++
 cinder/tests/api/v1/test_snapshots.py              |   31 +--
 cinder/tests/api/v1/test_types.py                  |    2 +-
 cinder/tests/api/v1/test_volumes.py                |   51 ++--
 cinder/tests/api/v2/stubs.py                       |  129 +++++++++
 cinder/tests/api/v2/test_snapshots.py              |   31 +--
 cinder/tests/api/v2/test_types.py                  |    2 +-
 cinder/tests/api/v2/test_volumes.py                |   49 ++--
 cinder/tests/image/test_glance.py                  |    1 -
 20 files changed, 577 insertions(+), 422 deletions(-)

commit 6a31bf3e436c1b975630615af0b381df3b7c8756
Author: john-griffith <john.griffith@solidfire.com>
Date:   Mon Dec 3 21:02:19 2012 -0700

    Make copy_to_volume a bit more useful.
    
    The current implementation of cinder.driver.copy_to_volume
    does not take in to account image type and is only valid
    for raw images.  This doesn't do much good for the majority
    of cases, and rather than require folks to have a raw version
    uploaded to Glance, let's just do a convert if needed on the fly.
    
    This simply creates a temp file, does the conversion and then
    writes the temp file directly to the volume.
    
    Change-Id: I849b04b8aae76da068abcd2a20c1fcecca8a5caa

 cinder/image/image_utils.py          |  241 ++++++++++++++++++++++++++++++++++
 cinder/tests/test_volume.py          |    5 +
 cinder/utils.py                      |   36 +++++
 cinder/volume/driver.py              |    9 +-
 etc/cinder/rootwrap.d/volume.filters |    2 +
 5 files changed, 289 insertions(+), 4 deletions(-)

commit ad770a3eaeaea9c00871a8b45157adc85dba6c79
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Dec 6 13:36:23 2012 -0700

    Delete type call in api needs update to use ID.
    
    https://github.com/openstack/cinder/commit/51a438c8f3f0d13c6779602264d72cde82feab9c
    Introduced UUID's for volume_type ID and also changed delete to use ID
    instead of name.
    
    That changed neglected to update the call in contrib/types_manage,
    this patch fixes that.
    
    Fixes bug 1087161
    
    Change-Id: I839228cd656afaf68caedfe673f9191488ccc397

 cinder/api/contrib/types_manage.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 51a438c8f3f0d13c6779602264d72cde82feab9c
Author: john-griffith <john.griffith@solidfire.com>
Date:   Sun Dec 2 00:01:49 2012 -0700

    Convert volume_type id from int to uuid.
    
    This converts the volume_type id from int to uuid.  In
    addition, this also corrects an issue of deleting volume_types
    by name.  Even though the client/api is taking the id, it was
    converting to the name of the volume_type for the db access.
    
    We also want to continue enforcing that the name is unique on creation
    so as to avoid any confusion and for clarity in Horizon.  The api
    has also been enhanced to allow you to specify the type by name
    or by uuid.
    
    This does NOT modify the things like the volume details display field
    (currently shows the type 'name' not 'uuid'), these types of changes
    will go in to V2 of the API.
    
    Implements blueprint vol-type-to-uuid
    
    Change-Id: I1c54ff2a1e0c5df5891408fc11b15176db4028c3

 cinder/api/v1/volumes.py                           |   21 ++-
 cinder/db/api.py                                   |    4 +-
 cinder/db/sqlalchemy/api.py                        |   21 ++-
 .../versions/004_volume_type_to_uuid.py            |  155 ++++++++++++++++++++
 cinder/db/sqlalchemy/models.py                     |    6 +-
 cinder/exception.py                                |    2 +-
 cinder/tests/api/openstack/fakes.py                |    2 +-
 cinder/tests/api/v1/test_volumes.py                |    1 -
 cinder/tests/test_migrations.py                    |   30 ++++
 cinder/tests/test_volume_types.py                  |   22 +--
 cinder/tests/test_volume_types_extra_specs.py      |    4 +-
 cinder/volume/volume_types.py                      |   15 +-
 12 files changed, 242 insertions(+), 41 deletions(-)

commit b1e423299632016b7ee0528cba8ecb44016cf941
Merge: c4a4a4e 842521c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Dec 3 15:09:52 2012 +0000

    Merge "Rename Config osapi_compute_link_prefix to osapi_volume_base_URL"

commit c4a4a4e59d52f10e88830fb4cbe52956e7b819b9
Merge: 9d73415 44a2b89
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Dec 2 16:10:34 2012 +0000

    Merge "Revert changes to monkey_patch."

commit 9d73415f11602032c75fd87a46cf2349275b8b2f
Merge: e1b834a 503e923
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 30 23:17:51 2012 +0000

    Merge "Fix exception when size is None."

commit 842521cb1267413025c47248dae8cd622d1d104c
Author: sathish-nagappan <sathish.nagappan@nebula.com>
Date:   Fri Nov 30 14:53:21 2012 -0800

    Rename Config osapi_compute_link_prefix to osapi_volume_base_URL
    
    fixes Bug #1046451
    
    Renamed the config option.
    
    Change-Id: Ia6eb057a11828bdc216e0bddbd29855285ba938c

 cinder/api/common.py          |    6 +++---
 cinder/flags.py               |    5 +++--
 etc/cinder/cinder.conf.sample |    4 ++--
 3 files changed, 8 insertions(+), 7 deletions(-)

commit 503e92332db78a2469fcc853a2be1c5dee9c8da4
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Thu Nov 29 17:48:03 2012 -0500

    Fix exception when size is None.
    
    If an incoming create request has a size of None raise
    an exception.
    
    Fixes: bug 1084711
    Change-Id: I5ad377073cc6853b502889ad9292b5758522ca88

 cinder/volume/api.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e1b834a294244030b7fd48b10a88aafdaa60c202
Merge: 31629f6 e27b171
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 30 17:42:58 2012 +0000

    Merge "attaching volumes will set instance_uuid instantly"

commit 31629f637b6b18ca762604a24278249eeb6cfaf1
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Nov 30 09:19:05 2012 -0500

    Ensure request_spec can be serialized.
    
    request_spec includes some objects that must be converted to primitive
    types to ensure they can be serialized by any of the rpc drivers.  In
    this case, it's the volume type.  It's a sqlalchemy model.
    to_primitive() will ensure that it gets converted to a dict so that it
    can be serialized for messaging.
    
    I saw this error in a smokestack log that was running tempest with qpid.
    You won't see this error if you're using rabbit with the kombu driver.
    We have some magic with the kombu driver that will fix these problems
    automatically if they are missed.
    
    Change-Id: I9a1b7662bca7caa2acb61d1e3879ac2654d5b32e

 cinder/scheduler/rpcapi.py |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit e27b171883c1b87b8d2fdf0994947d4b93e640d9
Author: Mike Perez <thingee@gmail.com>
Date:   Thu Nov 29 03:18:08 2012 -0800

    attaching volumes will set instance_uuid instantly
    
    This change allows the instance_uuid field to be set instantly when
    beginning an attach action. The user will no longer have to wait for the
    attachment to be complete to know what it is attaching to. If attaching
    fails on the driver layer, we got error state and keep the instance_uuid
    set for troubleshooting purposes.
    
    blueprint instance-attached-field
    Change-Id: Ie9860876ab865f766c0ae4cb616a45fd363931f8

 cinder/tests/test_volume.py |   17 +++++++++++++++++
 cinder/volume/api.py        |    2 ++
 2 files changed, 19 insertions(+)

commit de14700f955bd8393d016abe6644f646c0e0baf4
Merge: 79e0052 70e4f2c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 28 19:25:15 2012 +0000

    Merge "Unpin lxml requirements"

commit 44a2b8949fba07d9a3427137d59fe81fafbc3458
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Nov 28 12:19:14 2012 -0700

    Revert changes to monkey_patch.
    
    As a work-around to deal with bug 1075838, we modified
    monkey_patch in the Cinder binaries.  The root cause of the
    issue is/was actually a bug in eventlet but this was a quick
    work-around.
    
    Since the change Change-Id: I69ba75136e32e95c6fdf108f0c4fe21a5e3bdbe6
    to do this landed, the problem has also been addressed in Keystone.
    
    So, let's revert this patch to get back the greenthread performance
    that we may have lost with this change.  For now, everything should
    be addressed as long as we don't implement multi api worker in Cinder,
    if we do and the evenlet fix hasn't been released we'll need to turn
    the modification back on for bin/cinder-api.
    
    Change-Id: Ie845bade85dbceacd91f15e082325602d9a79c74

 bin/cinder-all       |    2 +-
 bin/cinder-api       |    6 +++++-
 bin/cinder-scheduler |    2 +-
 bin/cinder-volume    |    2 +-
 4 files changed, 8 insertions(+), 4 deletions(-)

commit 79e0052e79fc8411b385c36cb1533d039ab09333
Merge: 4b6ba6e e78667d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 28 05:44:37 2012 +0000

    Merge "Provide i18n to those messages without _()"

commit 4b6ba6eeb97cbac6c23be82d4d14ad056e1649cf
Merge: e40ec2d de289a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 28 05:21:24 2012 +0000

    Merge "Use auth_token middleware from keystoneclient."

commit e40ec2d83258690929fe89e85b971d9706af5970
Merge: d030c5b 2bdc7a7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 28 03:54:29 2012 +0000

    Merge "Fix import order to make it alphabetical."

commit d030c5b10e9e8d73d967562259e7db6146347108
Author: Adam Gandelman <adam.gandelman@canonical.com>
Date:   Tue Nov 27 17:51:26 2012 -0800

    Improve provider_location cleanup code for RBD.
    
    The RBD driver does not make use of the 'provider_location' field
    but the current cleanup code assumes it does.  Ensure the field
    is in use before testing whether or not it needs fixing.
    
    Fixes bug 1083818.
    
    Change-Id: Id6ff85101f85e70575ba244c2df7aca0196cf224

 cinder/volume/manager.py |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 2bdc7a7feb37dbf05dc98383bc0d6faff2f503b7
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Tue Nov 27 11:01:05 2012 -0500

    Fix import order to make it alphabetical.
    
    Change-Id: I159d9f5a6d131485d6063985a4e1638878b7463e

 cinder/api/openstack/volume/contrib/hosts.py       |    4 ++--
 .../api/openstack/volume/contrib/test_hosts.py     |    3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)

commit d81113f55e7a40adceae5bdab9878acbee42e518
Merge: dc9f039 3fe5bd6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 27 21:08:17 2012 +0000

    Merge "Fix None being passed into as_int()."

commit dc9f03901abd68f292bd1911777f43b05aa02b27
Merge: 461ae54 51418bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 27 16:32:23 2012 +0000

    Merge "Make pep8 checks a bit stricter."

commit 3fe5bd6a7112315a978be38a9e51a1787b300af3
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Tue Nov 27 10:41:25 2012 -0500

    Fix None being passed into as_int().
    
    Currently when a create is received and the size is of NoneType
    a stack trace is dumped because of the TypeError. This will
    correct it so the functionality won't change, but the TypeError
    is will be caught now.
    
    Change-Id: Ic83dd182e0083c887af8f6209a23af38bfff2be7

 cinder/volume/api.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit de289a666fd9f03725ade1f6ffb5ad3904295a94
Author: Yaguang Tang <heut2008@gmail.com>
Date:   Tue Nov 27 17:06:25 2012 +0800

    Use auth_token middleware from keystoneclient.
    
    auth_token middleware has been move from keystone to python-keystonecient,
    so add python-keystoneclient dependence instead of keystone.Also adds
    missing signing_dir option.
    
    Change-Id: I24a4f422c35b721338c7519212c21ed2fbc255b3

 etc/cinder/api-paste.ini |    3 ++-
 tools/pip-requires       |    1 +
 2 files changed, 3 insertions(+), 1 deletion(-)

commit e78667da0dbcb6b65dc9017822854c9e97f5a4ab
Author: daisy-ycguo <daisy.ycguo@gmail.com>
Date:   Thu Nov 22 00:16:04 2012 +0800

    Provide i18n to those messages without _()
    
    bug 1081498
    
    There are a few log messages without _(), but a lot messages with _().
    Wrap these log messages with _() in order to make the code consistent.
    
    Change-Id: Ie8961453569e9a75bd0fd0733344db8059d05222

 .../migrate_repo/versions/001_cinder_init.py       |    4 ++--
 .../migrate_repo/versions/003_glance_metadata.py   |    4 ++--
 cinder/db/sqlalchemy/session.py                    |    2 +-
 cinder/volume/drivers/nfs.py                       |    2 +-
 4 files changed, 6 insertions(+), 6 deletions(-)

commit 461ae5443d1816eefa1bd8877a4b085a5cb7fda3
Merge: 0fb9897 444cd54
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 27 07:18:34 2012 +0000

    Merge "Revert "use O_DIRECT when copying from /dev/zero too""

commit 444cd5429cc00f3a4ddb5cde4b8b1c974b886e19
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Nov 27 05:46:58 2012 +0000

    Revert "use O_DIRECT when copying from /dev/zero too"
    
    It turns out running oflag=direct against the LVM snapshot fails for an IO error every time.  Works fine against the regular volume, but fails on snapshot.
    
    This reverts commit 1405a6440d646524d41adfed4fc1344948e2871f

 cinder/volume/driver.py |   11 +----------
 1 file changed, 1 insertion(+), 10 deletions(-)

commit 51418bdd5b44496694998b8123c0b62e9166d547
Author: John Griffith <john.griffith@solidfire.com>
Date:   Sat Nov 24 20:17:32 2012 -0700

    Make pep8 checks a bit stricter.
    
    Along with moving to pep8 1.3.3, we also want to standardize
    on what we ignore. This patch get's us most of the way there
    by setting the ignore list to:
    N4,E125, E126, E711,E712.
    
    Almost all changes made here are white-space/indentation changes.
    
    The removal of Hacking N4 errors from the ignore list will
    be handled in a seperate patch.
    
    Change-Id: If45f156600485d23769449018590f60b4f69b0c5

 bin/cinder-manage                                  |   90 ++-
 cinder/api/common.py                               |   12 +-
 cinder/api/contrib/extended_snapshot_attributes.py |    7 +-
 cinder/api/contrib/quota_classes.py                |    6 +-
 cinder/api/contrib/quotas.py                       |    4 +-
 cinder/api/contrib/types_extra_specs.py            |    8 +-
 cinder/api/contrib/types_manage.py                 |    6 +-
 cinder/api/contrib/volume_actions.py               |    2 +-
 cinder/api/middleware/auth.py                      |    9 +-
 cinder/api/middleware/fault.py                     |    2 +-
 cinder/api/openstack/__init__.py                   |    7 +-
 cinder/api/openstack/volume/contrib/hosts.py       |   37 +-
 cinder/api/openstack/wsgi.py                       |   30 +-
 cinder/api/urlmap.py                               |   10 +-
 cinder/api/v1/router.py                            |    4 +-
 cinder/api/v1/snapshots.py                         |   18 +-
 cinder/api/v1/types.py                             |    8 +-
 cinder/api/v1/volumes.py                           |    4 +-
 cinder/api/v2/router.py                            |    4 +-
 cinder/api/v2/snapshots.py                         |   18 +-
 cinder/api/v2/types.py                             |    8 +-
 cinder/api/v2/volumes.py                           |    4 +-
 cinder/api/views/types.py                          |    4 +-
 cinder/api/views/versions.py                       |   25 +-
 cinder/common/deprecated.py                        |    3 +-
 cinder/context.py                                  |    2 +-
 cinder/db/api.py                                   |   24 +-
 cinder/db/sqlalchemy/api.py                        |  338 ++++-----
 .../migrate_repo/versions/002_quota_class.py       |  137 ++--
 .../migrate_repo/versions/003_glance_metadata.py   |   44 +-
 cinder/db/sqlalchemy/models.py                     |   12 +-
 cinder/db/sqlalchemy/session.py                    |    4 +-
 cinder/flags.py                                    |   14 +-
 cinder/image/glance.py                             |   23 +-
 cinder/manager.py                                  |    7 +-
 cinder/policy.py                                   |    3 +-
 cinder/quota.py                                    |   33 +-
 cinder/scheduler/chance.py                         |    2 +-
 cinder/scheduler/driver.py                         |    8 +-
 cinder/scheduler/manager.py                        |   27 +-
 cinder/scheduler/rpcapi.py                         |   33 +-
 cinder/scheduler/simple.py                         |   21 +-
 cinder/service.py                                  |    5 +-
 cinder/test.py                                     |    3 +-
 cinder/testing/runner.py                           |   23 +-
 .../contrib/test_extended_snapshot_attributes.py   |   30 +-
 cinder/tests/api/contrib/test_volume_actions.py    |   26 +-
 .../api/contrib/test_volume_tenant_attribute.py    |    4 +-
 cinder/tests/api/extensions/foxinsocks.py          |    5 +-
 cinder/tests/api/middleware/test_faults.py         |    2 +-
 cinder/tests/api/openstack/fakes.py                |   32 +-
 cinder/tests/api/openstack/test_wsgi.py            |    7 +-
 .../api/openstack/volume/contrib/test_hosts.py     |   50 +-
 cinder/tests/api/test_extensions.py                |   48 +-
 cinder/tests/api/test_xmlutil.py                   |   75 +-
 cinder/tests/api/v1/test_limits.py                 |   93 ++-
 cinder/tests/api/v1/test_snapshots.py              |   93 ++-
 cinder/tests/api/v1/test_volumes.py                |  174 ++---
 cinder/tests/api/v2/test_limits.py                 |  110 ++-
 cinder/tests/api/v2/test_volumes.py                |   25 +-
 cinder/tests/db/fakes.py                           |    2 +-
 cinder/tests/image/fake.py                         |  168 ++---
 cinder/tests/image/test_glance.py                  |   27 +-
 cinder/tests/integrated/api/client.py              |    6 +-
 cinder/tests/monkey_patch_example/__init__.py      |    2 +-
 cinder/tests/scheduler/test_rpcapi.py              |   19 +-
 cinder/tests/scheduler/test_scheduler.py           |   57 +-
 cinder/tests/test_HpSanISCSIDriver.py              |   11 +-
 cinder/tests/test_api.py                           |   10 +-
 cinder/tests/test_cinder_rootwrap.py               |    9 +-
 cinder/tests/test_context.py                       |    6 +-
 cinder/tests/test_flags.py                         |    8 +-
 cinder/tests/test_iscsi.py                         |   18 +-
 cinder/tests/test_migrations.py                    |   19 +-
 cinder/tests/test_netapp.py                        |   60 +-
 cinder/tests/test_netapp_nfs.py                    |   24 +-
 cinder/tests/test_nexenta.py                       |   86 ++-
 cinder/tests/test_nfs.py                           |   71 +-
 cinder/tests/test_policy.py                        |   10 +-
 cinder/tests/test_quota.py                         |  780 +++++++++-----------
 cinder/tests/test_rbd.py                           |   37 +-
 cinder/tests/test_service.py                       |   31 +-
 cinder/tests/test_storwize_svc.py                  |   75 +-
 cinder/tests/test_test_utils.py                    |    2 +-
 cinder/tests/test_utils.py                         |  217 +++---
 cinder/tests/test_versions.py                      |   26 +-
 cinder/tests/test_volume.py                        |   98 +--
 cinder/tests/test_volume_glance_metadata.py        |   11 +-
 cinder/tests/test_volume_rpcapi.py                 |   58 +-
 cinder/tests/test_volume_types.py                  |   57 +-
 cinder/tests/test_volume_types_extra_specs.py      |   54 +-
 cinder/tests/test_volume_utils.py                  |    2 +-
 cinder/tests/test_windows.py                       |   47 +-
 cinder/tests/test_xenapi_sm.py                     |    4 +-
 cinder/tests/test_xiv.py                           |   89 ++-
 cinder/tests/test_zadara.py                        |   39 +-
 cinder/tests/windows/basetestcase.py               |   12 +-
 cinder/tests/windows/db_fakes.py                   |   22 +-
 cinder/tests/windows/mockproxy.py                  |   18 +-
 cinder/tests/windows/windowsutils.py               |   34 +-
 cinder/utils.py                                    |   27 +-
 cinder/volume/api.py                               |  131 ++--
 cinder/volume/driver.py                            |   19 +-
 cinder/volume/drivers/netapp.py                    |   87 ++-
 cinder/volume/drivers/netapp_nfs.py                |   24 +-
 cinder/volume/drivers/nexenta/jsonrpc.py           |    6 +-
 cinder/volume/drivers/nexenta/volume.py            |   25 +-
 cinder/volume/drivers/nfs.py                       |    9 +-
 cinder/volume/drivers/rbd.py                       |    6 +-
 cinder/volume/drivers/san/san.py                   |    6 +-
 cinder/volume/drivers/san/solaris.py               |    3 +-
 cinder/volume/drivers/solidfire.py                 |    4 +-
 cinder/volume/drivers/storwize_svc.py              |  570 +++++++-------
 cinder/volume/drivers/windows.py                   |   10 +-
 cinder/volume/drivers/xenapi/lib.py                |   31 +-
 cinder/volume/drivers/xiv.py                       |   27 +-
 cinder/volume/drivers/zadara.py                    |   55 +-
 cinder/volume/iscsi.py                             |   23 +-
 cinder/volume/manager.py                           |   59 +-
 cinder/volume/rpcapi.py                            |   65 +-
 cinder/volume/utils.py                             |   30 +-
 cinder/wsgi.py                                     |    4 +-
 run_tests.sh                                       |    2 +-
 setup.py                                           |   64 +-
 tools/hacking.py                                   |   90 ++-
 tools/install_venv.py                              |   14 +-
 tox.ini                                            |    4 +-
 127 files changed, 2756 insertions(+), 2832 deletions(-)

commit 0fb98971a7d7836335906197a1bf7c7d448b8dab
Merge: 9922541 6da9686
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 26 18:21:45 2012 +0000

    Merge "Remove redundant db.volume_update() in volume manager create_volume()"

commit 9922541a05148da5e2e1d0344090b4128caa8dd0
Merge: df3f9d7 1405a64
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 26 17:04:28 2012 +0000

    Merge "use O_DIRECT when copying from /dev/zero too"

commit 70e4f2cdad6100cf73c59f60c741c11f69acbe30
Author: Chuck Short <zulcss@ubuntu.com>
Date:   Sun Nov 25 15:42:19 2012 -0600

    Unpin lxml requirements
    
    Ubuntu is using a much newer version of lxml so
    we shouldn't lock the versions in our infrasctructure.
    
    Change-Id: I73589af70e4156968f14d2494b3af36fa8f4794e
    Signed-off-by: Chuck Short <zulcss@ubuntu.com>

 tools/pip-requires |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit df3f9d76b9bc353133cbcc7cea20c572cd302733
Merge: 5023fb5 67168a8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 23 16:54:11 2012 +0000

    Merge "Add CONTRIBUTING file."

commit 1405a6440d646524d41adfed4fc1344948e2871f
Author: Pdraig Brady <pbrady@redhat.com>
Date:   Fri Nov 23 11:24:44 2012 +0000

    use O_DIRECT when copying from /dev/zero too
    
    We need to avoid trying O_DIRECT with virtual
    devices like /dev/zero and /dev/urandom etc.
    as it's not supported there, which because of
    our later check, would cause O_DIRECT to be
    not applied to the output device either.
    
    Related to bug 937694
    Possibly related to bug 1023755
    Change-Id: I034d8345c3d00689c1f1fffcc2c110735c49ee01

 cinder/volume/driver.py |   11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 67168a8d8024b2369963fd1ae98b6c12df100f72
Author: john-griffith <john.griffith@solidfire.com>
Date:   Thu Nov 22 09:44:53 2012 -0700

    Add CONTRIBUTING file.
    
    If the CONTRIBUTING[.md] file exists, Github will show a link to it to
    anyone who files an issue on Github or opens a pull request on
    Github. This files points folks to the OpenStack wiki page which
    provides the proper instructions on how to contribute to OpenStack.
    
    See also <https://github.com/blog/1184-contributing-guidelines>.
    
    Change-Id: I8fef06b71aa993c4c68a1ec92c39a540318aaf31

 CONTRIBUTING.md |   12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 5023fb58d448ad2baad6139c34353f70b27a7ed2
Author: Vincent Hou <sbhou@cn.ibm.com>
Date:   Tue Nov 13 17:15:41 2012 +0800

    Add the persistency to the volume created by iscsi IET.
    
    Bug 1070649.
    
    Change-Id: Ia2e095a8a60a5d5ca028272ed2a35c20b4ad45a7

 cinder/volume/iscsi.py |   47 +++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 47 insertions(+)

commit 683344f6e7baa31c17e4b500542b3da67d4e85bc
Merge: 75ca60f 71d9f11
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 22 07:27:57 2012 +0000

    Merge "Add hosts extension to Cinder."

commit 75ca60f619c953df1d95ff2eab7de78f7d5aebe8
Author: Mike Perez <thingee@gmail.com>
Date:   Wed Nov 21 00:15:39 2012 -0800

    adding copy of v1 as v2
    
    finishes blueprint bp/apiv2
    
    Change-Id: I36dff480aacc438565875cdd23dc396e369da9bd

 cinder/api/v2/limits.py               |  482 +++++++++++++++++
 cinder/api/v2/router.py               |   70 +++
 cinder/api/v2/snapshots.py            |  216 ++++++++
 cinder/api/v2/types.py                |   80 +++
 cinder/api/v2/volumes.py              |  397 ++++++++++++++
 cinder/api/versions.py                |   31 ++
 cinder/api/xmlutil.py                 |    2 +
 cinder/flags.py                       |   10 +-
 cinder/tests/api/v2/test_limits.py    |  914 +++++++++++++++++++++++++++++++++
 cinder/tests/api/v2/test_snapshots.py |  425 +++++++++++++++
 cinder/tests/api/v2/test_types.py     |  211 ++++++++
 cinder/tests/api/v2/test_volumes.py   |  813 +++++++++++++++++++++++++++++
 etc/cinder/api-paste.ini              |   10 +
 13 files changed, 3657 insertions(+), 4 deletions(-)

commit 2581554921281dc6c8271d8eb1f357f208811512
Author: Mike Perez <thingee@gmail.com>
Date:   Mon Nov 12 21:13:55 2012 -0800

    Moving contrib to cinder.api
    
    This moves over all contrib to a common place for all api versions to
    use. Test directory structure has been adjusted to match.
    
    For compatibility with old cinder config settings, we ignore the old
    contrib path and use the new location.
    
    progress on blueprint apiv2
    
    Change-Id: If1a24fd3c4d15db559674a021f6928613966e3a1

 cinder/api/contrib/__init__.py                     |   39 +++
 cinder/api/contrib/admin_actions.py                |  174 ++++++++++++
 cinder/api/contrib/extended_snapshot_attributes.py |  124 +++++++++
 cinder/api/contrib/image_create.py                 |   31 +++
 cinder/api/contrib/quota_classes.py                |  105 +++++++
 cinder/api/contrib/quotas.py                       |  125 +++++++++
 cinder/api/contrib/types_extra_specs.py            |  149 ++++++++++
 cinder/api/contrib/types_manage.py                 |   91 ++++++
 cinder/api/contrib/volume_actions.py               |  204 ++++++++++++++
 cinder/api/contrib/volume_host_attribute.py        |   93 +++++++
 cinder/api/contrib/volume_tenant_attribute.py      |   91 ++++++
 cinder/api/extensions.py                           |   14 +
 cinder/api/openstack/volume/__init__.py            |   17 --
 cinder/api/openstack/volume/contrib/__init__.py    |   39 ---
 .../api/openstack/volume/contrib/admin_actions.py  |  174 ------------
 .../volume/contrib/extended_snapshot_attributes.py |  124 ---------
 .../api/openstack/volume/contrib/image_create.py   |   31 ---
 .../api/openstack/volume/contrib/quota_classes.py  |  105 -------
 cinder/api/openstack/volume/contrib/quotas.py      |  125 ---------
 .../openstack/volume/contrib/types_extra_specs.py  |  149 ----------
 .../api/openstack/volume/contrib/types_manage.py   |   91 ------
 .../api/openstack/volume/contrib/volume_actions.py |  204 --------------
 .../volume/contrib/volume_host_attribute.py        |   93 -------
 .../volume/contrib/volume_tenant_attribute.py      |   91 ------
 cinder/flags.py                                    |   11 +-
 cinder/tests/api/contrib/__init__.py               |   19 ++
 cinder/tests/api/contrib/test_admin_actions.py     |  291 ++++++++++++++++++++
 .../contrib/test_extended_snapshot_attributes.py   |  126 +++++++++
 cinder/tests/api/contrib/test_types_extra_specs.py |  226 +++++++++++++++
 cinder/tests/api/contrib/test_types_manage.py      |  122 ++++++++
 cinder/tests/api/contrib/test_volume_actions.py    |  247 +++++++++++++++++
 .../api/contrib/test_volume_host_attribute.py      |  134 +++++++++
 .../api/contrib/test_volume_tenant_attribute.py    |  137 +++++++++
 cinder/tests/api/openstack/volume/__init__.py      |   19 --
 .../tests/api/openstack/volume/contrib/__init__.py |   19 --
 .../openstack/volume/contrib/test_admin_actions.py |  291 --------------------
 .../contrib/test_extended_snapshot_attributes.py   |  126 ---------
 .../volume/contrib/test_types_extra_specs.py       |  226 ---------------
 .../openstack/volume/contrib/test_types_manage.py  |  122 --------
 .../volume/contrib/test_volume_actions.py          |  247 -----------------
 .../volume/contrib/test_volume_host_attribute.py   |  134 ---------
 .../volume/contrib/test_volume_tenant_attribute.py |  137 ---------
 42 files changed, 2549 insertions(+), 2568 deletions(-)

commit 9009948b43109632bbeb0bcf234d6c48d005e926
Author: Mike Perez <thingee@gmail.com>
Date:   Fri Nov 9 01:57:44 2012 -0800

    Moving api v1 implementation into v1 directory
    
    Adjusts paste to use composite factory for routing properly to v1 and
    future api versions. Tests have been adjusted to match directory
    structure.
    
    progress on blueprint apiv2
    
    Change-Id: I2cd3908705d224872b2d615cabe210fb1c453232

 cinder/api/__init__.py                             |   15 +
 cinder/api/openstack/volume/__init__.py            |   52 --
 .../api/openstack/volume/contrib/types_manage.py   |    2 +-
 cinder/api/openstack/volume/limits.py              |  482 -----------
 cinder/api/openstack/volume/snapshots.py           |  216 -----
 cinder/api/openstack/volume/types.py               |   80 --
 cinder/api/openstack/volume/volumes.py             |  402 ---------
 cinder/api/v1/limits.py                            |  482 +++++++++++
 cinder/api/v1/router.py                            |   70 ++
 cinder/api/v1/snapshots.py                         |  216 +++++
 cinder/api/v1/types.py                             |   80 ++
 cinder/api/v1/volumes.py                           |  402 +++++++++
 cinder/flags.py                                    |    4 +
 cinder/tests/api/openstack/fakes.py                |    6 +-
 .../openstack/volume/contrib/test_admin_actions.py |    2 +-
 .../volume/contrib/test_volume_host_attribute.py   |    2 +-
 .../volume/contrib/test_volume_tenant_attribute.py |    2 +-
 cinder/tests/api/openstack/volume/test_limits.py   |  896 --------------------
 cinder/tests/api/openstack/volume/test_router.py   |  108 ---
 .../tests/api/openstack/volume/test_snapshots.py   |  419 ---------
 cinder/tests/api/openstack/volume/test_types.py    |  194 -----
 cinder/tests/api/openstack/volume/test_volumes.py  |  787 -----------------
 cinder/tests/api/test_extensions.py                |   12 +-
 cinder/tests/api/test_router.py                    |  108 +++
 cinder/tests/api/v1/test_limits.py                 |  896 ++++++++++++++++++++
 cinder/tests/api/v1/test_snapshots.py              |  419 +++++++++
 cinder/tests/api/v1/test_types.py                  |  194 +++++
 cinder/tests/api/v1/test_volumes.py                |  787 +++++++++++++++++
 etc/cinder/api-paste.ini                           |   16 +-
 29 files changed, 3694 insertions(+), 3657 deletions(-)

commit 6a2573a15314db781beeda50271b1e13d90baed7
Author: Mike Perez <thingee@gmail.com>
Date:   Sun Nov 11 21:37:14 2012 -0800

    Switching api to use base extension manager
    
    progress on blueprint apiv2
    
    Change-Id: I68640a88c7c2b7ee4c6661fa26a4f82d9c63b00f

 cinder/api/extensions.py                           |    9 +-
 cinder/api/openstack/volume/__init__.py            |    2 +-
 cinder/api/openstack/volume/extensions.py          |   33 -----
 cinder/tests/api/extensions/__init__.py            |   15 ++
 cinder/tests/api/extensions/foxinsocks.py          |   94 ++++++++++++
 .../api/openstack/volume/extensions/__init__.py    |   15 --
 .../api/openstack/volume/extensions/foxinsocks.py  |   94 ------------
 .../tests/api/openstack/volume/test_extensions.py  |  155 --------------------
 cinder/tests/api/test_extensions.py                |  154 +++++++++++++++++++
 cinder/tests/integrated/test_extensions.py         |    3 +-
 10 files changed, 273 insertions(+), 301 deletions(-)

commit c15d5eae48c42d5b885b8a6557d091a75713015f
Author: Mike Perez <thingee@gmail.com>
Date:   Sun Nov 4 01:20:47 2012 -0800

    moving all middleware code in cinder.api.middleware
    
    This includes auth, sizelimit, and faultwrapper middleware. Test
    directory struture has been adjusted to match.
    
    progress on blueprint apiv2
    
    Change-Id: I62eecb208553abfee8dc8d2679264884b4cec153

 cinder/api/auth.py                            |  103 ------------
 cinder/api/middleware/__init__.py             |   16 ++
 cinder/api/middleware/auth.py                 |  140 +++++++++++++++++
 cinder/api/middleware/fault.py                |   75 +++++++++
 cinder/api/middleware/sizelimit.py            |   53 +++++++
 cinder/api/openstack/__init__.py              |   49 ------
 cinder/api/openstack/auth.py                  |   65 --------
 cinder/api/sizelimit.py                       |   53 -------
 cinder/tests/api/middleware/test_auth.py      |   59 +++++++
 cinder/tests/api/middleware/test_faults.py    |  208 +++++++++++++++++++++++++
 cinder/tests/api/middleware/test_sizelimit.py |   52 +++++++
 cinder/tests/api/openstack/fakes.py           |   13 +-
 cinder/tests/api/openstack/test_faults.py     |  208 -------------------------
 cinder/tests/api/test_auth.py                 |   58 -------
 cinder/tests/api/test_sizelimit.py            |   51 ------
 cinder/tests/test_wsgi.py                     |    4 +-
 etc/cinder/api-paste.ini                      |   10 +-
 17 files changed, 616 insertions(+), 601 deletions(-)

commit 30f8d3f8d62251023cceef21eca19fd508950f37
Author: Mike Perez <thingee@gmail.com>
Date:   Sun Nov 4 01:34:27 2012 -0700

    Moving common api code into cinder.api
    
    This is progress for beginning to have separate versions of the
    cinder api. Common code that would be shared by v1, v2 etc will use
    these modules, so we'll just move them to a common place. Test directory
    structure has also been updated.
    
    progress on blueprint apiv2
    
    Change-Id: I99fd95fc3bb5d4f4fc3d9ef5b76b6372a1f6033d

 cinder/api/common.py                               |  317 +++++++
 cinder/api/extensions.py                           |  387 +++++++++
 cinder/api/openstack/common.py                     |  317 -------
 cinder/api/openstack/extensions.py                 |  387 ---------
 cinder/api/openstack/urlmap.py                     |  297 -------
 cinder/api/openstack/volume/__init__.py            |    2 +-
 cinder/api/openstack/volume/contrib/__init__.py    |    2 +-
 .../api/openstack/volume/contrib/admin_actions.py  |    2 +-
 .../volume/contrib/extended_snapshot_attributes.py |    4 +-
 .../api/openstack/volume/contrib/image_create.py   |    2 +-
 .../api/openstack/volume/contrib/quota_classes.py  |    4 +-
 cinder/api/openstack/volume/contrib/quotas.py      |    4 +-
 .../openstack/volume/contrib/types_extra_specs.py  |    4 +-
 .../api/openstack/volume/contrib/types_manage.py   |    4 +-
 .../api/openstack/volume/contrib/volume_actions.py |    4 +-
 .../volume/contrib/volume_host_attribute.py        |    4 +-
 .../volume/contrib/volume_tenant_attribute.py      |    4 +-
 cinder/api/openstack/volume/extensions.py          |    2 +-
 cinder/api/openstack/volume/limits.py              |    4 +-
 cinder/api/openstack/volume/schemas/atom-link.rng  |  141 ---
 .../openstack/volume/schemas/v1.1/extension.rng    |   11 -
 .../openstack/volume/schemas/v1.1/extensions.rng   |    6 -
 .../api/openstack/volume/schemas/v1.1/limits.rng   |   28 -
 .../api/openstack/volume/schemas/v1.1/metadata.rng |    9 -
 cinder/api/openstack/volume/snapshots.py           |    4 +-
 cinder/api/openstack/volume/types.py               |    4 +-
 cinder/api/openstack/volume/versions.py            |  238 -----
 cinder/api/openstack/volume/views/__init__.py      |   16 -
 cinder/api/openstack/volume/views/limits.py        |  100 ---
 cinder/api/openstack/volume/views/types.py         |   34 -
 cinder/api/openstack/volume/views/versions.py      |   93 --
 cinder/api/openstack/volume/volumes.py             |    4 +-
 cinder/api/openstack/xmlutil.py                    |  908 --------------------
 cinder/api/schemas/atom-link.rng                   |  141 +++
 cinder/api/schemas/v1.1/extension.rng              |   11 +
 cinder/api/schemas/v1.1/extensions.rng             |    6 +
 cinder/api/schemas/v1.1/limits.rng                 |   28 +
 cinder/api/schemas/v1.1/metadata.rng               |    9 +
 cinder/api/urlmap.py                               |  297 +++++++
 cinder/api/versions.py                             |  237 +++++
 cinder/api/views/__init__.py                       |   16 +
 cinder/api/views/limits.py                         |  100 +++
 cinder/api/views/types.py                          |   34 +
 cinder/api/views/versions.py                       |   93 ++
 cinder/api/xmlutil.py                              |  908 ++++++++++++++++++++
 cinder/tests/api/common.py                         |   38 +
 cinder/tests/api/openstack/common.py               |   38 -
 cinder/tests/api/openstack/fakes.py                |    4 +-
 cinder/tests/api/openstack/test_common.py          |  243 ------
 cinder/tests/api/openstack/test_faults.py          |    2 +-
 cinder/tests/api/openstack/test_xmlutil.py         |  722 ----------------
 .../api/openstack/volume/extensions/foxinsocks.py  |    2 +-
 .../tests/api/openstack/volume/test_extensions.py  |    2 +-
 cinder/tests/api/openstack/volume/test_limits.py   |    4 +-
 cinder/tests/api/openstack/volume/test_router.py   |    2 +-
 cinder/tests/api/openstack/volume/test_types.py    |    2 +-
 cinder/tests/api/test_common.py                    |  243 ++++++
 cinder/tests/api/test_xmlutil.py                   |  722 ++++++++++++++++
 cinder/tests/integrated/test_xml.py                |    2 +-
 etc/cinder/api-paste.ini                           |    4 +-
 60 files changed, 3628 insertions(+), 3629 deletions(-)

commit 7bc6264fa1c293ef6878fa94ff2e16e20f35786c
Merge: 88fba03 040d930
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 22 05:12:27 2012 +0000

    Merge "Add volume bootable information to api response"

commit 88fba03c06b8836d2b6d0156bdb919a1445c01b1
Merge: fe914a3 db39d32
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 22 02:14:03 2012 +0000

    Merge "Cleaning up volume driver paths"

commit fe914a383fc8e191b57d2498f0aa1013907765dd
Merge: 3f18307 aa87498
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 22 01:03:23 2012 +0000

    Merge "Removes the xensm driver"

commit db39d32c2f3fd0ef0b9f173e33793ea86503479d
Author: Nirmal Ranganathan <rnirmal@gmail.com>
Date:   Wed Nov 21 11:44:27 2012 -0600

    Cleaning up volume driver paths
    
    Moved all the remaining drivers under
    cinder.volume.drivers. Updated the tests with
    the new module paths and add backwards compatibilty
    for the existing paths.
    
    Implements bp driver-cleanup
    
    Change-Id: I7673b5209cc072ac859d7d32cdeed2e7a17331e8

 cinder/tests/fake_flags.py                 |    2 +-
 cinder/tests/test_HpSanISCSIDriver.py      |    2 +-
 cinder/tests/test_drivers_compatibility.py |  119 ++-
 cinder/tests/test_netapp.py                |    2 +-
 cinder/tests/test_netapp_nfs.py            |    6 +-
 cinder/tests/test_nexenta.py               |    6 +-
 cinder/tests/test_nfs.py                   |    2 +-
 cinder/tests/test_solidfire.py             |    2 +-
 cinder/tests/test_storwize_svc.py          |    2 +-
 cinder/tests/test_windows.py               |    2 +-
 cinder/tests/test_wsgi.py                  |    1 -
 cinder/tests/test_xenapi_sm.py             |    4 +-
 cinder/tests/test_xiv.py                   |    2 +-
 cinder/tests/test_zadara.py                |    2 +-
 cinder/volume/drivers/netapp.py            | 1285 ++++++++++++++++++++++++++++
 cinder/volume/drivers/netapp_nfs.py        |  266 ++++++
 cinder/volume/drivers/nexenta/__init__.py  |   33 +
 cinder/volume/drivers/nexenta/jsonrpc.py   |   84 ++
 cinder/volume/drivers/nexenta/volume.py    |  280 ++++++
 cinder/volume/drivers/nfs.py               |  290 +++++++
 cinder/volume/drivers/san/__init__.py      |   27 +
 cinder/volume/drivers/san/hp_lefthand.py   |  268 ++++++
 cinder/volume/drivers/san/san.py           |  153 ++++
 cinder/volume/drivers/san/solaris.py       |  286 +++++++
 cinder/volume/drivers/solidfire.py         |  423 +++++++++
 cinder/volume/drivers/storwize_svc.py      | 1230 ++++++++++++++++++++++++++
 cinder/volume/drivers/windows.py           |  232 +++++
 cinder/volume/drivers/xenapi/__init__.py   |   13 +
 cinder/volume/drivers/xenapi/lib.py        |  333 +++++++
 cinder/volume/drivers/xenapi/sm.py         |  127 +++
 cinder/volume/drivers/xiv.py               |  128 +++
 cinder/volume/drivers/zadara.py            |  477 +++++++++++
 cinder/volume/manager.py                   |   28 +
 cinder/volume/netapp.py                    | 1285 ----------------------------
 cinder/volume/netapp_nfs.py                |  266 ------
 cinder/volume/nexenta/__init__.py          |   33 -
 cinder/volume/nexenta/jsonrpc.py           |   84 --
 cinder/volume/nexenta/volume.py            |  280 ------
 cinder/volume/nfs.py                       |  290 -------
 cinder/volume/san/__init__.py              |   27 -
 cinder/volume/san/hp_lefthand.py           |  268 ------
 cinder/volume/san/san.py                   |  153 ----
 cinder/volume/san/solaris.py               |  286 -------
 cinder/volume/solidfire.py                 |  423 ---------
 cinder/volume/storwize_svc.py              | 1230 --------------------------
 cinder/volume/windows.py                   |  232 -----
 cinder/volume/xenapi/lib.py                |  333 -------
 cinder/volume/xenapi_sm.py                 |  127 ---
 cinder/volume/xiv.py                       |  128 ---
 cinder/volume/zadara.py                    |  477 -----------
 etc/cinder/cinder.conf.sample              |   20 +-
 51 files changed, 6108 insertions(+), 5951 deletions(-)

commit 040d9309c52a517c4236b3750fdde7a69c4be5e7
Author: Mike Perez <thingee@gmail.com>
Date:   Sun Nov 18 21:27:39 2012 -0800

    Add volume bootable information to api response
    
    If there is any glance metadata associated with a volume, we'll consider
    the volume bootable. This will return the information for both /volumes
    and /detail calls.
    
    blueprint list-bootable-volumes
    
    Change-Id: Id9dbe5cb648be62fb19bb8bd6a97d8eab05ec25a

 cinder/api/openstack/volume/volumes.py            |    5 +++
 cinder/db/sqlalchemy/models.py                    |    5 +++
 cinder/tests/api/openstack/fakes.py               |    1 +
 cinder/tests/api/openstack/volume/test_volumes.py |   35 +++++++++++++++++++++
 4 files changed, 46 insertions(+)

commit 3f183070f72c949eb65d25c9c532d953f996a3e4
Merge: 1a431ed 09f98c9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 21 17:33:35 2012 +0000

    Merge "Add XenAPINFSDriver"

commit 09f98c9caa495bc648f624ba3c46b912a88e6e2f
Author: Mate Lakat <mate.lakat@citrix.com>
Date:   Mon Nov 5 09:57:52 2012 +0000

    Add XenAPINFSDriver
    
    Related to blueprint xenapi-storage-manager-nfs
    
    As xensm was not pulled to Cinder, this change shows an implementation
    example for using an NFS export for volumes. This change contains the
    volume create and delete functions, as a minimal set of functionality.
    The connection information structure is compatible with the previous
    xensm implementation.
    
    Activate the driver with the following configuration entries in
    cinder.conf:
    
    volume_driver=cinder.volume.xenapi_sm.XenAPINFSDriver
    xenapi_connection_url=http://<yourxenserver>
    xenapi_connection_username=root
    xenapi_connection_password=<secret>
    xenapi_nfs_server=<nfs_server_address>
    xenapi_nfs_serverpath=/exported_catalog
    
    Change-Id: Ieaf077f540fc026c5bc37f2e3eb9d48fb96d0b74

 cinder/tests/test_xenapi_sm.py |  186 ++++++++++++++++++++++
 cinder/volume/xenapi/lib.py    |  333 ++++++++++++++++++++++++++++++++++++++++
 cinder/volume/xenapi_sm.py     |  127 +++++++++++++++
 3 files changed, 646 insertions(+)

commit 1a431edff622ad62707cce085d2af6683a995e3f
Author: Ollie Leahy <oliver.leahy@hp.com>
Date:   Thu Nov 15 11:48:27 2012 +0000

    Add db table for Glance Metadata
    
    This commit implements the blueprint
    https://blueprints.launchpad.net/cinder/+spec/retain-glance-metadata-for-billing
    
    It creates the new table volume_glance_metadata in the cinder
    database, provides the CRUD methods for it, and populates the table
    when a volume or snapshot is created from a Glance image.
    
    Patch set 2:remove superflous line
    
    Patch set 3: Fix incorrect column types in sqlalchemy/models.py
    
    Patch set 4: Define exception class GlanceMetadataExists
    
    Change-Id: I8f98f6eaae005a33bfd49cea783774407b7aa120

 cinder/db/api.py                                   |   49 +++++++
 cinder/db/sqlalchemy/api.py                        |  142 ++++++++++++++++++++
 .../migrate_repo/versions/003_glance_metadata.py   |   74 ++++++++++
 cinder/db/sqlalchemy/models.py                     |   13 +-
 cinder/exception.py                                |    5 +
 cinder/tests/test_volume_glance_metadata.py        |  114 ++++++++++++++++
 cinder/volume/manager.py                           |   28 ++++
 7 files changed, 424 insertions(+), 1 deletion(-)

commit 6da9686ca64ef2a559d7120910d15cb495bc3b50
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Wed Nov 21 01:02:37 2012 +0800

    Remove redundant db.volume_update() in volume manager create_volume()
    
    Since scheduler has already updated db to set the 'host' field and
    recorded 'scheduled_at' time, it's not necessary to do db.volume_update()
    again in volume manager create_volume() method.  Also let volume api
    to update db when creating volume from snapshot while snapshot_same_host
    is true, thus the behavior is consistent (updating db when placement
    decision is made).
    
    Change-Id: I43aaee8e2a5d0ceadb98bd608cc147467488349e

 cinder/tests/test_volume.py |    1 +
 cinder/volume/api.py        |    8 +++++---
 cinder/volume/manager.py    |    3 ---
 3 files changed, 6 insertions(+), 6 deletions(-)

commit ceee1fdaf2f54666ac72c6aa8076f92b6289327c
Author: Chuck Short <zulcss@ubuntu.com>
Date:   Tue Nov 20 09:05:57 2012 -0600

    Pin pep8 1.3.3
    
    Apart of making pep8 version standard across all openstack
    projects.
    
    Also fix tools/hacking.py so it is compliant for pep8 1.2
    and beyond, taken from fbc4568 in the nova tree.
    
    Change-Id: I801c98a01960fa113dae1b6174c1a06bb149fea3
    Signed-off-by: Chuck Short <zulcss@ubuntu.com>

 .../tests/api/openstack/volume/test_extensions.py  |    5 ++---
 cinder/tests/api/openstack/volume/test_router.py   |    2 +-
 run_tests.sh                                       |    2 +-
 tools/hacking.py                                   |   12 +++++++-----
 tools/test-requires                                |    2 +-
 tox.ini                                            |    6 +++---
 6 files changed, 15 insertions(+), 14 deletions(-)

commit aa874981998d605209b7cd0614800552db10a957
Author: John Garbutt <john.garbutt@citrix.com>
Date:   Fri Nov 9 14:38:56 2012 +0000

    Removes the xensm driver
    
    This code does not work, and is slowly being replaced by
    alternative XenServer specific drivers.
    
    Fixes LP bug #1077011
    
    Change-Id: I1af92ecdbb49a57a0ff4c05a70d77bcb69958cb2

 cinder/locale/bs/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/cinder.pot                  |   75 ---------
 cinder/locale/cs/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/da/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/de/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/en_AU/LC_MESSAGES/cinder.po |   75 ---------
 cinder/locale/en_GB/LC_MESSAGES/cinder.po |   75 ---------
 cinder/locale/es/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/fr/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/it/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/ja/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/ko/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/pt_BR/LC_MESSAGES/cinder.po |   75 ---------
 cinder/locale/ru/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/tl/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/tr/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/uk/LC_MESSAGES/cinder.po    |   75 ---------
 cinder/locale/zh_CN/LC_MESSAGES/cinder.po |   75 ---------
 cinder/locale/zh_TW/LC_MESSAGES/cinder.po |   75 ---------
 cinder/volume/xensm.py                    |  247 -----------------------------
 doc/source/devref/index.rst               |    1 -
 doc/source/devref/xensmvolume.rst         |   88 ----------
 22 files changed, 1761 deletions(-)

commit 55c09da1b0ff4e2a147b07fcfa986a76815c7703
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Nov 20 00:50:27 2012 +0000

    Pass in correct volume_ref to create_from_snapshot.
    
    The new rpc versioning change introduced a bug in the
    create_from_snapshot code.  The originating volume_ref
    was being passed in instead of the newly created volume_ref
    as expected.
    
    Fixes bug 1080898
    
    Change-Id: I6ba4f4989c77e29685abb2649af8e003c447ab0f

 cinder/volume/api.py |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 71d9f1170a5fe087de5a957e46d8c9e0fe9fb574
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Nov 13 19:03:50 2012 +0000

    Add hosts extension to Cinder.
    
    This adds the hosts extension to Cinder which is similar to
    the extension by the same name in Nova.
    
    This extension allows an admin user to check the status of
    Cinder services on different hosts.  In addition it also
    provides the capability to get host and project specific information
    regarding volume count and space allocated for volumes on a specified
    host.
    
    Implements blueprint cinder-hosts-extension
    
    Change-Id: Ic3679cfcd900baecdc2da17e42194cac99c9d422

 cinder/api/openstack/volume/contrib/hosts.py       |  261 ++++++++++++++++++++
 cinder/db/api.py                                   |   14 ++
 cinder/db/sqlalchemy/api.py                        |   34 ++-
 .../api/openstack/volume/contrib/test_hosts.py     |  187 ++++++++++++++
 cinder/tests/policy.json                           |    3 +-
 cinder/volume/api.py                               |   22 ++
 etc/cinder/policy.json                             |    3 +-
 7 files changed, 521 insertions(+), 3 deletions(-)

commit a8f838177748a3bb371468ff6bc65f29ad0e1c7c
Merge: c64c7ea 2940ce4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 16 09:14:04 2012 +0000

    Merge "Volume RPC API Versioning"

commit c64c7ea6705fda832c3538a99221c78caa32cab4
Merge: 099bc8b 5d986e3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 16 05:33:38 2012 +0000

    Merge "Make tox.ini run pep8/hacking checks on bin."

commit 099bc8b4240dfe5d9b53d05a08240f6384edfdd4
Merge: 69ae5c1 6217a3d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 16 01:27:31 2012 +0000

    Merge "Remove unused python-daemon dependency"

commit 69ae5c145fd892b60922ae31b1c222c6f7ebe9ef
Merge: 402a169 41c37d3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 15 21:55:26 2012 +0000

    Merge "Various pep8/HACKING fixes for Cinder."

commit 6217a3df0a34b1d0ac6fad8e9ea5044d2056c45d
Author: Eric Harney <eharney@redhat.com>
Date:   Thu Nov 15 15:26:16 2012 -0500

    Remove unused python-daemon dependency
    
    python-daemon is listed as a dependency, but it is not needed.
    
    Change-Id: I4d6eadfef5d60cd277ff7395a12f5ad255db7155

 tools/pip-requires |    1 -
 1 file changed, 1 deletion(-)

commit 5d986e3121e8fb275f011c2cb347d9d24edca7c3
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Nov 15 11:27:06 2012 -0500

    Make tox.ini run pep8/hacking checks on bin.
    
    This updates the pep8 checks in our tox.ini file so that
    we are also scanning the bin directory.
    
    Additionally, it updates the main pep8 check so that it scans
    cinder properly as well. Previously there were a bunch of files
    getting skipped due to some of the pep8 pattern matching.
    
    Change-Id: Ib47a590303409e62546a75625ee356c9fa7af6ad

 tox.ini |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 41c37d3666c4d46aaf3daa9bb4236e7cdcf3af57
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Nov 15 11:26:31 2012 -0500

    Various pep8/HACKING fixes for Cinder.
    
    Fix some ordering/pep8/hacking issues in preperation for re-enabling
    full pep8/HACKING checks in tox.
    
    Change-Id: I7151ac73d1ace5d98046580e6d1c6a1dcc6c4cef

 bin/cinder-clear-rabbit-queues    |    2 +-
 bin/cinder-manage                 |    4 ++--
 cinder/db/sqlalchemy/migration.py |    2 +-
 cinder/utils.py                   |    4 ++--
 cinder/volume/san/san.py          |    8 ++++----
 5 files changed, 10 insertions(+), 10 deletions(-)

commit 402a1696352197550a96ba2f506e8f8f4366e4a8
Merge: 4206f0d f51e4af
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 15 18:03:18 2012 +0000

    Merge "Remove gen_uuid()"

commit 2940ce438f76dba20ff45095c90f0a29292c827c
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Sat Nov 10 01:32:22 2012 +0800

    Volume RPC API Versioning
    
    Add versioning to Volume Rpc API version.  This is initial version
    1.0, which is compatible with previous non-versioned RPC API.
    
    Note: this patch slightly change the db.volume_update() behavior,
    which now returns updated volume info.
    
    Change-Id: I78036b6ed97c5bc369d8c85307ecaaad8e31ff90

 cinder/db/sqlalchemy/api.py              |    1 +
 cinder/scheduler/chance.py               |    7 +-
 cinder/scheduler/driver.py               |   42 ++------
 cinder/scheduler/simple.py               |   17 ++--
 cinder/tests/scheduler/test_scheduler.py |   92 +----------------
 cinder/tests/test_volume_rpcapi.py       |  164 ++++++++++++++++++++++++++++++
 cinder/volume/api.py                     |   95 ++++++-----------
 cinder/volume/manager.py                 |    3 +
 cinder/volume/rpcapi.py                  |   97 ++++++++++++++++++
 9 files changed, 324 insertions(+), 194 deletions(-)

commit f51e4af121b9289fa6ab4c634cb525d7c3d840e4
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Wed Nov 14 22:49:07 2012 +0900

    Remove gen_uuid()
    
    Removed gen_uuid and uuid related unittests
    Replaced utils.gen_uuid() with uuid.uuid4()
    
    Change-Id: If34096f47fdea719e2dc180b448654519ede9bc9

 bin/cinder-manage                                  |    3 ++-
 cinder/context.py                                  |    4 ++--
 cinder/db/sqlalchemy/api.py                        |    8 ++++----
 cinder/tests/api/openstack/fakes.py                |    4 ++--
 .../volume/contrib/test_volume_actions.py          |    6 ++++--
 .../volume/contrib/test_volume_host_attribute.py   |    6 ++++--
 .../volume/contrib/test_volume_tenant_attribute.py |    7 +++++--
 cinder/tests/image/fake.py                         |    4 ++--
 cinder/tests/integrated/integrated_helpers.py      |    4 ++--
 cinder/tests/test_utils.py                         |    9 ++-------
 cinder/utils.py                                    |    6 ------
 11 files changed, 29 insertions(+), 32 deletions(-)

commit 4206f0db05fc5ea70cb05bcd46bafbd14c26cce7
Merge: 780529e 4b8670a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 14 17:02:06 2012 +0000

    Merge "Remove obsolete use_local_volumes"

commit 780529e950865b8e935b6280b9a3a574a30b9891
Merge: db59270 f70cc1a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 14 16:50:39 2012 +0000

    Merge "Remove unused volume API method - remove_from_compute()"

commit 4b8670aa74e025f0b871918c596240d3760a5629
Author: Julien Danjou <julien@danjou.info>
Date:   Tue Nov 13 15:26:48 2012 +0100

    Remove obsolete use_local_volumes
    
    Reading documentation, I felt on that option, but grepping the source
    everywhere saw no use at all, and removing seems to be safe.
    
    Change-Id: I0ec22bcc406402420bc06fd28c352b84a4e21b69
    Signed-off-by: Julien Danjou <julien@danjou.info>

 cinder/locale/bs/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/cinder.pot                  |    6 ------
 cinder/locale/cs/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/da/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/de/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/en_AU/LC_MESSAGES/cinder.po |    6 ------
 cinder/locale/en_GB/LC_MESSAGES/cinder.po |    6 ------
 cinder/locale/es/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/fr/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/it/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/ja/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/ko/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/pt_BR/LC_MESSAGES/cinder.po |    6 ------
 cinder/locale/ru/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/tl/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/tr/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/uk/LC_MESSAGES/cinder.po    |    6 ------
 cinder/locale/zh_CN/LC_MESSAGES/cinder.po |    6 ------
 cinder/locale/zh_TW/LC_MESSAGES/cinder.po |    6 ------
 cinder/tests/integrated/test_volumes.py   |    1 -
 cinder/volume/manager.py                  |    3 ---
 cinder/volume/nexenta/volume.py           |    2 --
 cinder/volume/zadara.py                   |    2 --
 etc/cinder/cinder.conf.sample             |    3 ---
 24 files changed, 125 deletions(-)

commit db592705d996ddc0e353c13d0e1e0e62262f8df9
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Wed Nov 7 15:56:33 2012 +0800

    Import order cleanup per HACKING
    
    Change-Id: I5540a5d24f45aa51e0ef58b43427fbaf7726da89

 cinder/api/auth.py                                 |    2 +-
 cinder/api/openstack/__init__.py                   |    2 +-
 cinder/api/openstack/common.py                     |    2 +-
 cinder/api/openstack/extensions.py                 |    2 +-
 cinder/api/openstack/urlmap.py                     |    2 +-
 cinder/api/openstack/volume/__init__.py            |    2 +-
 cinder/api/openstack/volume/contrib/__init__.py    |    2 +-
 .../api/openstack/volume/contrib/admin_actions.py  |    2 +-
 .../volume/contrib/extended_snapshot_attributes.py |    2 +-
 .../api/openstack/volume/contrib/volume_actions.py |    2 +-
 cinder/api/openstack/volume/snapshots.py           |    4 ++--
 cinder/api/openstack/volume/types.py               |    2 +-
 cinder/api/openstack/volume/volumes.py             |    2 +-
 cinder/api/openstack/wsgi.py                       |    4 ++--
 cinder/context.py                                  |    2 +-
 cinder/db/sqlalchemy/api.py                        |   22 +++++++++++---------
 cinder/db/sqlalchemy/models.py                     |    4 ++--
 cinder/db/sqlalchemy/session.py                    |    2 +-
 cinder/openstack/common/rpc/impl_kombu.py          |    2 +-
 cinder/scheduler/driver.py                         |    2 +-
 cinder/service.py                                  |    2 +-
 cinder/test.py                                     |    4 ++--
 cinder/testing/runner.py                           |    2 +-
 cinder/tests/api/openstack/fakes.py                |    4 ++--
 cinder/tests/api/openstack/test_common.py          |    2 +-
 cinder/tests/api/openstack/test_faults.py          |    2 +-
 cinder/tests/api/openstack/test_wsgi.py            |    2 +-
 cinder/tests/api/openstack/test_xmlutil.py         |    2 +-
 .../openstack/volume/contrib/test_admin_actions.py |    4 ++--
 .../openstack/volume/contrib/test_types_manage.py  |    2 +-
 .../volume/contrib/test_volume_actions.py          |    8 +++----
 .../volume/contrib/test_volume_host_attribute.py   |    4 ++--
 .../volume/contrib/test_volume_tenant_attribute.py |    4 ++--
 .../tests/api/openstack/volume/test_snapshots.py   |    2 +-
 cinder/tests/api/openstack/volume/test_types.py    |    4 ++--
 cinder/tests/api/openstack/volume/test_volumes.py  |    2 +-
 cinder/tests/integrated/api/client.py              |    2 +-
 cinder/tests/integrated/test_volumes.py            |    6 +++---
 cinder/tests/integrated/test_xml.py                |    2 +-
 cinder/tests/test_exception.py                     |    2 +-
 cinder/tests/test_migrations.py                    |    4 ++--
 cinder/tests/test_netapp_nfs.py                    |    6 +++---
 cinder/tests/test_nexenta.py                       |    2 +-
 cinder/tests/test_nfs.py                           |    8 +++----
 cinder/tests/test_service.py                       |    4 ++--
 cinder/tests/test_volume.py                        |    8 +++----
 cinder/tests/test_volume_types.py                  |    6 +++---
 cinder/tests/test_volume_utils.py                  |    6 +++---
 cinder/tests/test_windows.py                       |    2 +-
 cinder/tests/test_wsgi.py                          |    2 +-
 cinder/tests/test_zadara.py                        |    2 +-
 cinder/tests/windows/basetestcase.py               |    2 +-
 cinder/utils.py                                    |    4 ++--
 cinder/volume/api.py                               |    4 ++--
 cinder/volume/driver.py                            |    2 +-
 cinder/volume/drivers/rbd.py                       |    2 +-
 cinder/volume/manager.py                           |    2 +-
 cinder/volume/netapp.py                            |    2 +-
 cinder/volume/netapp_nfs.py                        |    4 ++--
 cinder/volume/nexenta/jsonrpc.py                   |    2 +-
 cinder/volume/nexenta/volume.py                    |    2 +-
 cinder/volume/nfs.py                               |    4 ++--
 cinder/volume/san/__init__.py                      |    2 +-
 cinder/volume/san/san.py                           |    2 +-
 cinder/volume/utils.py                             |    4 ++--
 cinder/volume/zadara.py                            |    2 +-
 66 files changed, 110 insertions(+), 108 deletions(-)

commit f70cc1aceb8abab6de69ac970fcc35ea23f70c25
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Fri Nov 9 14:37:21 2012 +0800

    Remove unused volume API method - remove_from_compute()
    
    remove_from_compute() method in cinder.volume.api is never used
    by others and it is also broken since the interface in Nova has
    been changed to remove_volume_connection(), thus it should be
    removed from Cinder.
    
    Change-Id: Ibcb2cf7f88606d9a540cc9a03b5c95990fca8c3e

 cinder/volume/api.py |    8 --------
 1 file changed, 8 deletions(-)

commit fc4cae50f53643e2093170530eb0dc758a0b3f63
Merge: eedc857 7e26d13
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 9 06:11:58 2012 +0000

    Merge "Scheduler API clean up and refactor"

commit 7e26d1354af23668591d9df39ab61e67eeb37528
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Sun Oct 7 01:11:41 2012 +0800

    Scheduler API clean up and refactor
    
    Unlike Nova scheduler, which has to consider serving compute and volume
    scheduling, Cinder scheduler only serves volume scheduling, so there's no
    need to keep generic interface 'schedule'. Instead, 'schedule_create_volume'
    is added (if missing) to manager/driver class and chance/simple scheduler
    driver implementation.
    
    Also this patch changes the interface between API service and scheduler to
    allow more information about volume is passed to scheduler for advanced
    scheduling while maintained backward compatibility. And this change bumps
    scheduler RPC API to version 1.2.
    
    Change-Id: I42be05675cd73f89a03c84105ec512d7ee4f3c3a

 cinder/scheduler/chance.py               |   18 +++++--
 cinder/scheduler/driver.py               |    4 ++
 cinder/scheduler/manager.py              |   85 ++++++++++++++++++++----------
 cinder/scheduler/rpcapi.py               |   18 ++++---
 cinder/scheduler/simple.py               |   21 +++++---
 cinder/tests/scheduler/test_rpcapi.py    |   10 ++--
 cinder/tests/scheduler/test_scheduler.py |   79 ++++++---------------------
 cinder/volume/api.py                     |   29 +++++++---
 8 files changed, 146 insertions(+), 118 deletions(-)

commit 5aa1e72911ef690c64c670c6605a189d7d11ae29
Merge: c5f3a32 6602bbf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 7 02:15:42 2012 +0000

    Merge "Add 'create_volume' to scheduler RPC API."

commit c5f3a32178c09f03d617998d7b6d0559ea9e0ca3
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Nov 6 11:08:58 2012 -0700

    Remove dm_setup(remove) call in volume_delete.
    
    While it makes sense to perform the dm_setup(remove) before
    performing the lvm remove, it seems to cause some buffer IO
    errors as evident by kern.log.
    
    I'm also a bit suspicous in that it seems the delete timeouts
    we see seems to have increased in frequency with this addition.
    I propose this step is removed until we completely understand the
    impact of the kernel error on Precise kernels.
    
    Fixes bug: #1075675
    
    Change-Id: I7ae4decea42d8f070d774d3e6376686b3e5b4f83

 cinder/volume/driver.py |    2 --
 1 file changed, 2 deletions(-)

commit 84c9dd1ea899796793e9c9c79b0366b71e4a285a
Author: john-griffith <john.griffith@solidfire.com>
Date:   Mon Nov 5 23:26:07 2012 -0700

    Add ability to disable secure volume delete.
    
    Due to gating issues caused by secure delete on LVM volumes,
    add the ability to disable via flag.secure_delete.
    
    Default will be set to True, but we add a way for the gate tests
    to disable this until we can come up with a fix for
    https://bugs.launchpad.net/cinder/+bug/1023755 OR implement an alternative
    secure delete method that doesn' suck.
    
    Change-Id: I2a06e4f0021ba1f5d5aad7d0a5997a992e268858

 cinder/flags.py         |    3 +++
 cinder/volume/driver.py |    3 ++-
 2 files changed, 5 insertions(+), 1 deletion(-)

commit 07d4f002d056e90c520d49fe94d21183be5defe5
Author: john-griffith <john.griffith@solidfire.com>
Date:   Mon Nov 5 22:11:52 2012 -0700

    Remove the zeroing out of the volume altogether
    
    Temporary change to get in new version which will
    make the secure_delete configurable.
    
    After pushing this and modifying the gate setup we'll
    push the flag version.
    
    Change-Id: Ic8a08566e02d822ab0eb309f61993fd8b7d21232

 cinder/volume/driver.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6602bbfc0854c4b014100c00e1b821f8a3190255
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Thu Oct 4 17:34:01 2012 +0800

    Add 'create_volume' to scheduler RPC API.
    
    Instead of directly call RPC methods, 'create_volume' should be
    implemented in scheduler RPC API in order to do versioning.
    
    This increases scheduler RPC version to 1.1
    
    Change-Id: I22d5a097ec3a73c3460f4acd35c602da57f8b52d

 cinder/scheduler/manager.py           |    2 +-
 cinder/scheduler/rpcapi.py            |   11 +++++++++++
 cinder/tests/scheduler/test_rpcapi.py |   11 ++++++++++-
 cinder/volume/api.py                  |   17 +++++++++--------
 4 files changed, 31 insertions(+), 10 deletions(-)

commit eedc857008a122ee38661581f27f102de52a4886
Author: Rushi Agrawal <rushi.agr@gmail.com>
Date:   Sat Nov 3 12:21:28 2012 +0530

    Fix run_tests.sh ambiguous usage msg and behaviour for -x option
    
    In commit
    https://github.com/openstack/cinder/commit/
    50792c2ff41fdc7e73b3e3c51f4510366debfd14,
    the committer wanted to add an option in run_tests.sh for generating XML
    coverage report, but ended up accidentally overriding the default nose
    option -x. But, the usage message still showed that using option -x will
    'Stop running tests after the first error or failure'. So, I changed the
    option to generate XML report to  -X (capitalized 'x'). So now both -x and
    -X options are available, with different purposes.
    
    Fixes bug 1070047
    
    Change-Id: Ie8c30c14629d4811d6db74f3eea9cdecb1d27c8a

 run_tests.sh |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 956731973ee872d38eebacfb519ed62d6767a319
Author: clayg <clay.gerrard@gmail.com>
Date:   Thu Oct 25 02:55:13 2012 -0700

    Add admin only action for force detach
    
    This action calls the same methods nova would after it successfully
    detaches a volume.  By exposing it to the administrator it makes it's
    easier to repair un-syncronized state between services.  Generally when
    the host is no longer attached, but the volume state is wrong.
    
    Future work: The Iscsi based drivers don't seem to use
    initialize_connection and terminate_connection to create the export for
    the volume.  This would be more useful with drivers that do that.
    
    I added the force parameter to terminate_connection for drivers that may
    want to differintiate between a normal terminate and the force detach.
    
    Future Nova work:  Nova will want an admin action to update the bdm
    tables - today it's a bit of nova-manage shell work.
    
    Change-Id: Icc1cff0f50a5ace9ebdae62c85524ee8d6ec23e0

 .../api/openstack/volume/contrib/admin_actions.py  |   17 +++++++++
 .../openstack/volume/contrib/test_admin_actions.py |   39 ++++++++++++++++++++
 cinder/tests/fake_driver.py                        |    2 +-
 cinder/tests/fake_flags.py                         |    1 +
 cinder/tests/policy.json                           |    1 +
 cinder/volume/api.py                               |    4 +-
 cinder/volume/driver.py                            |   30 ++++++++++++++-
 cinder/volume/drivers/rbd.py                       |    2 +-
 cinder/volume/drivers/sheepdog.py                  |    2 +-
 cinder/volume/iscsi.py                             |   15 ++++++++
 cinder/volume/manager.py                           |    4 +-
 cinder/volume/netapp.py                            |    4 +-
 cinder/volume/nfs.py                               |    2 +-
 cinder/volume/san/hp_lefthand.py                   |    2 +-
 cinder/volume/storwize_svc.py                      |    2 +-
 cinder/volume/windows.py                           |    2 +-
 cinder/volume/xensm.py                             |    2 +-
 cinder/volume/xiv.py                               |    2 +-
 cinder/volume/zadara.py                            |    2 +-
 19 files changed, 117 insertions(+), 18 deletions(-)

commit 92f6aca556530f27ec090b87e295c319770b0748
Merge: 2f3bab4 bad23ce
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 7 17:20:59 2012 +0000

    Merge "Splitting out volume drivers in driver.py"

commit 2f3bab4a695579826a93bc986fbd10aa4e1deacc
Merge: c16a7c5 2946477
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 7 16:43:14 2012 +0000

    Merge "Port openstack-common/uuidutils to Cinder"

commit c16a7c541abece400ca94a104c81511beb49e118
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Wed Nov 7 15:59:35 2012 +0800

    Changes bit mode of zadara.py to 644
    
    Change-Id: I0b4693d7da4ecfe5242dc302630c40ed2b8268ef

 0 files changed

commit 2946477556e7bd04cbc6a797323be20176e7097e
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Tue Nov 6 01:46:09 2012 +0800

    Port openstack-common/uuidutils to Cinder
    
    openstack-common has a new uuidutils to handle is_uuid_like(),
    port it to Cinder.
    
    Change-Id: I0ccc6166854193137af6a3210d3c465dd38fd955

 cinder/api/openstack/volume/volumes.py |    4 ++--
 cinder/db/sqlalchemy/api.py            |    3 ++-
 cinder/openstack/common/uuidutils.py   |   35 ++++++++++++++++++++++++++++++++
 cinder/tests/test_utils.py             |   25 +++--------------------
 cinder/utils.py                        |   12 -----------
 cinder/volume/manager.py               |    4 ++--
 openstack-common.conf                  |    2 +-
 7 files changed, 45 insertions(+), 40 deletions(-)

commit 4e619fbef8671697bfec8e752818944c9f96cd72
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Nov 6 20:12:00 2012 -0800

    Fix 401 from auth_token middleware
    
    The openssl popen call to verify the token returns an error code
    of 2 when a file doesn't exist. Normally this is caught and the
    relevant file is downloaded, but monkeypatching os causes this
    error code to be eaten and cinder to return a 401. Note that this
    is likely a race condition that depends on exactly when greenthreads
    are switching that is causing the return code from Popen to get
    overwritten.
    
    It is possible that this is exposing an underlying bug in eventlet
    but the workaround is simply to make sure that we don't monkeypatch
    os.
    
    Fixes bug 1075838
    
    Change-Id: I69ba75136e32e95c6fdf108f0c4fe21a5e3bdbe6

 bin/cinder-all       |    2 +-
 bin/cinder-api       |    2 +-
 bin/cinder-scheduler |    2 +-
 bin/cinder-volume    |    2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit bad23ceff8257d955e4247423e3d3ce95dd19743
Author: Nirmal Ranganathan <rnirmal@gmail.com>
Date:   Sun Oct 21 14:07:13 2012 -0500

    Splitting out volume drivers in driver.py
    
    Moved RBDDriver, SheepdogDriver into their own respective driver
    files under cinder/volume/drivers/*. Moved FakeISCSIDriver and
    LoggingVolumeDriver into a fake driver file under the tests,
    since that's the only place where those are used.
    
    Implements bp driver-cleanup
    
    Change-Id: I39d91ac8e498a9e42c5443db16706203b988444b

 cinder/tests/fake_driver.py                |  113 +++++++++
 cinder/tests/fake_flags.py                 |    3 +-
 cinder/tests/integrated/test_volumes.py    |   13 +-
 cinder/tests/test_drivers_compatibility.py |   58 +++++
 cinder/tests/test_rbd.py                   |    2 +-
 cinder/volume/driver.py                    |  379 +---------------------------
 cinder/volume/drivers/__init__.py          |   22 ++
 cinder/volume/drivers/rbd.py               |  239 ++++++++++++++++++
 cinder/volume/drivers/sheepdog.py          |  100 ++++++++
 cinder/volume/manager.py                   |   11 +-
 etc/cinder/cinder.conf.sample              |    3 +
 11 files changed, 558 insertions(+), 385 deletions(-)

commit 3e82bf10ea755e7120ef5934dc22a81b98cc781b
Merge: 88d6be0 b864a08
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Nov 3 00:08:05 2012 +0000

    Merge "Adding a SSH Connection Pool."

commit 88d6be0c66694021847574d2e255d69bcd0bda73
Author: Nirmal Ranganathan <rnirmal@gmail.com>
Date:   Fri Nov 2 11:49:17 2012 -0500

    Minor optimization in create_volume in HpSanISCSIDriver
    
    Removing extra call to getClusterInfo in HpSANISCSIDriver
    on every create_volume call. The cluster info is now
    being lazily stored in a local variable.
    
    Fixes bug 1074201
    
    Change-Id: Iadf8383dbf87a8e82c649c312c67978c7dd3df71

 cinder/volume/san/hp_lefthand.py |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit b864a08b2aa7e7ba953dd4afce2c3042ba963ae7
Author: Nirmal Ranganathan <rnirmal@gmail.com>
Date:   Thu Nov 1 23:05:35 2012 -0500

    Adding a SSH Connection Pool.
    
    Adds a connection pool using eventlet.pools
    which works well with greenthreads. Adding new
    parameters ssh_min_pool_conn and ssh_max_pool_conn.
    
    Updating the _run_ssh method in san.py to use the
    connection pool and cleaning up the existing
    single connections, also added retries.
    
    Fixes bug 1074185
    
    Change-Id: I90dd89ffc025d09fc6ad060c4273508103b85456

 cinder/tests/test_utils.py    |   86 +++++++++++++++++++++++++++++++++++++++++
 cinder/utils.py               |   83 +++++++++++++++++++++++++++++++++++++--
 cinder/volume/san/san.py      |   73 ++++++++++++++++++----------------
 etc/cinder/cinder.conf.sample |    9 +++++
 4 files changed, 215 insertions(+), 36 deletions(-)

commit 29378ef7a588b8930329800423d6fc5e344072c7
Merge: 1cb3a4f ecc664d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 1 17:02:07 2012 +0000

    Merge "Return volume type name on volume create"

commit 1cb3a4f69cdb9706666b5d2a4679ef31adb4d0a1
Merge: f5cc528 9fe4477
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 1 03:48:14 2012 +0000

    Merge "Allow the user to update a volume's metadata"

commit f5cc52817af52e0e0c78925c56ca74556a0b80f9
Merge: 4645e63 9ea375c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 1 03:44:20 2012 +0000

    Merge "Log the body of an /action"

commit 4645e6326846a20b393fb218fce067b04df7decf
Merge: 80654f8 524c7fa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 31 22:01:29 2012 +0000

    Merge "Detect and fix issues caused by vol ID migration"

commit ecc664dca2c6844a7963da63d3495281ef5866c8
Author: Clay Gerrard <clay.gerrard@gmail.com>
Date:   Wed Oct 31 15:25:55 2012 -0500

    Return volume type name on volume create
    
    Update openstack api controller for volumes to fully inflate the
    returned volume model on create to populate the volume_type fields so
    the response serializer will return the name of the volume_type instead
    of the id on volume create requests.  Returning the name on create is
    consistent with the show and index commands.
    
    fixes bug #1071436
    
    Change-Id: Ie091cf824a2df40211d8bcfa7f177fc851d737f5

 cinder/api/openstack/volume/volumes.py            |    3 ++-
 cinder/tests/api/openstack/volume/test_volumes.py |   21 +++++++++++++++++++++
 2 files changed, 23 insertions(+), 1 deletion(-)

commit 80654f8bcda3db3f55c838f17dee2fccfc77f854
Merge: 04794c2 a105733
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 31 18:29:20 2012 +0000

    Merge "Add VolumeTenantAttribute API extension"

commit 04794c28b783193ec051e0bb1fd0293763a4a402
Author: Sean Dague <sdague@linux.vnet.ibm.com>
Date:   Wed Oct 31 10:10:29 2012 -0400

    pin sqlalchemy to the 0.7 series
    
    sqlalchemy 0.8 beta has hit mirrors, and changes dependencies, thus
    breaking jenkins. This pins it to 0.7 series until all the projects
    agree to move forward to 0.8.
    
    Fixes bug #1073569
    
    Change-Id: If11f39d311ba9ef5cb2b198c9649a8997b2a52b5

 tools/pip-requires |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a105733cc970eaac2f4bc28f04b48f9149a2c801
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Oct 30 15:06:12 2012 -0700

    Add VolumeTenantAttribute API extension
    
    Expose the ID of the project to which a volume belongs through a
    new API extension. This is only presented to Admins by default.
    Visibility can be controlled with the 'volume_tenant_attribute'
    policy rule.
    
    Change-Id: If85d9759af6a9457bf3230375cc64af9efe4a088

 .../volume/contrib/volume_tenant_attribute.py      |   91 +++++++++++++
 .../volume/contrib/test_volume_host_attribute.py   |    1 +
 .../volume/contrib/test_volume_tenant_attribute.py |  134 ++++++++++++++++++++
 cinder/tests/policy.json                           |    3 +-
 etc/cinder/policy.json                             |    3 +-
 5 files changed, 230 insertions(+), 2 deletions(-)

commit 4b6da60361f16e30da7233919b967069ce8f6285
Merge: 826c452 39e763d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 30 18:28:08 2012 +0000

    Merge "Split out drivers in san.py"

commit 9ea375c5dce105c657694ce296fbb24b03a0c6ab
Author: Derrick J. Wippler <thrawn01@gmail.com>
Date:   Fri Oct 19 14:53:18 2012 +0000

    Log the body of an /action
    
    The inability to deduce an /action request from the logs
    makes diagnosing integration with nova difficult. This change
    logs the action method and arguments
    
    Change-Id: Iea4f46c7da9c61e07aa23e897b60992b8fdb6663

 cinder/api/openstack/wsgi.py |    1 +
 1 file changed, 1 insertion(+)

commit 524c7fa6dfade6efcabda19b105d58cab8c434e2
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Oct 24 16:28:02 2012 -0600

    Detect and fix issues caused by vol ID migration
    
    The migration from volume ID to UUID neglected to update the provider_location
    field on the volume.  As a result the iqn and volume name no long match and
    existing volumes are no longer able to be attached after an upgrade
    (essex -> folsom and then nova-vol->cinder).
    
    This patch adds a method to the volume driver that will check for the
    mismatch of volume name in the iqn during service start up.  If
    detected it will update the provider_location field in the database
    to include the new ID.  Also it will create a symlink to the device backing
    file that also has the correct naming convention.
    
    Note: We don't disturb an connections that are currently attached.
    For this case we add a check in manager.detach and do any provider_location
    cleanup that's needed at that time.  This ensures that connections
    persist on restarts of tgtd and reboot.
    
    Change-Id: I8224824b793c98a9767c5d8dd741d892be720c4f
    Fixes: bug 1065702

 bin/cinder-volume-usage-audit        |    3 +-
 cinder/volume/driver.py              |   66 +++++++++++++++++++++++++++++++---
 cinder/volume/iscsi.py               |   11 +++++-
 cinder/volume/manager.py             |    5 +++
 etc/cinder/rootwrap.d/volume.filters |    1 +
 5 files changed, 80 insertions(+), 6 deletions(-)

commit 39e763d3aff5181a00e88b1ff2707bff209240ea
Author: Nirmal Ranganathan <rnirmal@gmail.com>
Date:   Sun Oct 21 11:38:45 2012 -0500

    Split out drivers in san.py
    
    The SolarisISCSIDriver and HpSanISCSIDriver have been removed from
    san.py and placed in their own files. The default SanISCSIDriver
    implementing some common methods still resides in san.py. These
    san drivers have now been grouped in the san module.
    
    Implements bp driver-cleanup
    
    Change-Id: I68802f01a4a8c7e93e097777d305fbee0d15128a

 cinder/tests/test_HpSanISCSIDriver.py |    8 +-
 cinder/volume/san.py                  |  652 ---------------------------------
 cinder/volume/san/__init__.py         |   27 ++
 cinder/volume/san/hp_lefthand.py      |  265 ++++++++++++++
 cinder/volume/san/san.py              |  146 ++++++++
 cinder/volume/san/solaris.py          |  286 +++++++++++++++
 cinder/volume/solidfire.py            |    2 +-
 cinder/volume/storwize_svc.py         |    2 +-
 cinder/volume/xiv.py                  |    2 +-
 etc/cinder/cinder.conf.sample         |    3 +
 10 files changed, 734 insertions(+), 659 deletions(-)

commit 826c4520d093f5e0809a08e10b5d18bf69adc698
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Oct 27 15:36:30 2012 -0700

    Add VolumeHostAttribute API extension
    
    Expose the host on which a volume resides through a new API
    extension. This is only presented to Admins by default. This
    can be controlled with the 'volume_host_attribute' policy
    rule.
    
    Fixes bug 1035350.
    
    Change-Id: I0a74a0dfbd78e853219150fbe0d3fba77c6f9bb6

 .../volume/contrib/volume_host_attribute.py        |   93 ++++++++++++++
 .../volume/contrib/test_volume_host_attribute.py   |  131 ++++++++++++++++++++
 cinder/tests/policy.json                           |    3 +-
 etc/cinder/policy.json                             |    4 +-
 4 files changed, 229 insertions(+), 2 deletions(-)

commit 61917c2193ec4ca822af946a808dd0061cb77ef4
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Wed Oct 3 17:10:57 2012 +0800

    Add default volume type flag
    
    Where using volume type scheduler, 'volume type' is an essential input for
    scheduler to perform sophysticated scheduling.  This patch adds a new
    flag 'default_volume_type to allow admin to set one volume type as the
    default type for volume creation if user doesn't specify any.
    
    Also add more clear 404 message to API if create request provided non-existing
    volume type.
    
    Note: Setting the 'default_volume_type' flag to non-existing volume type
    is problematic and should be avoided, and the outcome of such behavior is
    equivlant to setting default volume type to None.
    
    This is part of patch set implementing 'volume-type-scheduler'.
    
    Change-Id: Ib2b2bbdc9bc96ab097cca2821c9aef04c65c2857

 cinder/api/openstack/volume/volumes.py |    5 +--
 cinder/flags.py                        |    3 ++
 cinder/tests/fake_flags.py             |    3 ++
 cinder/tests/test_volume.py            |   55 ++++++++++++++++++++++++++++++++
 cinder/tests/test_volume_types.py      |   17 ++++++++++
 cinder/volume/api.py                   |    9 +++---
 cinder/volume/volume_types.py          |   19 +++++++++++
 7 files changed, 105 insertions(+), 6 deletions(-)

commit 452b92a13bcf4cc2afdf97c742f0773455608a26
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Thu Oct 25 16:14:07 2012 -0700

    Fix typo so setting volume_tmp_dir works
    
    This can be controlled by environment variables without setting
    volume_tmp_dir as well, so there's an easy workaround for
    Folsom.
    
    Fixes LP bug #1071536
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>
    
    Change-Id: I50996c7c7a870d8e2bab1d3f44fd4d15b8ced6a6

 cinder/tests/test_rbd.py |   29 +++++++++++++++++++++++++++++
 cinder/volume/driver.py  |    2 +-
 2 files changed, 30 insertions(+), 1 deletion(-)

commit 628adc99b41c097b0c071087a274ded850ff7df5
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Tue Oct 23 12:12:30 2012 +0000

    Rollback for resources during volume creation failure
    
    Fixes bug #1070258
    
    Add a single QUOTAS.rollback for all exceptions. Ensure that no stale
    "reservations" are left in place after a failed volume creation.
    
    Change-Id: Iedb193b213b8ee700a5765278ac4d00dac66d53a

 cinder/volume/api.py |   32 ++++++++++++++++++++------------
 1 file changed, 20 insertions(+), 12 deletions(-)

commit 9fe4477f9b1f4e825941cb1ce42ced1a1a862b33
Author: jking-6 <jking@internap.com>
Date:   Wed Oct 24 13:15:03 2012 -0400

    Allow the user to update a volume's metadata
    
    The fix mainly involves updating the VolumeController's update method
    to allow the 'metadata' key to be a valid key in a request body.
    
    The _translate_volume_summary_view method is updated to check for a
    'metadata' key in the vol parameter after checking first for
    'volume_metadata'.  This is to avoid making a third call to the
    database after updating the volume model.  This solution introduces
    the least amount of new code.
    
    Change-Id: I41256d03f9c4c7a0866ff0f2d35fce8e4fd26b11
    Fixes: bug #1046382

 cinder/api/openstack/volume/volumes.py            |    4 +++
 cinder/db/sqlalchemy/api.py                       |   12 ++++-----
 cinder/tests/api/openstack/volume/test_volumes.py |   28 +++++++++++++++++++++
 3 files changed, 38 insertions(+), 6 deletions(-)

commit df2f070604dad61738ccd3113016f76f2af20cae
Merge: b7df13c 5ddcf35
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 24 17:52:45 2012 +0000

    Merge "Drop unused quota_usage db methods"

commit b7df13c7b698556c5c43601a109231e843195eca
Merge: 02755f3 b3b1d48
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 24 17:22:53 2012 +0000

    Merge "Update HACKING.rst and related changes from Nova/PEP8."

commit 02755f322104617936c0aaec8ae81c7f6adefce3
Merge: f004634 1a7c6f4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 24 15:00:39 2012 +0000

    Merge "Adds support for Windows 2012 Storage Server blueprint windows2012driver https://blueprints.launchpad.net/cinder/+spec/windows2012driver"

commit f004634ac16839f543efdfae8c3b1ac0cb36ea35
Author: Vincent Hou <sbhou@cn.ibm.com>
Date:   Mon Oct 22 13:50:56 2012 +0800

    Add the generation of the username and password for iSCSI target.
    
    When a volume is created, a pair of username and password is generated by the
    driver for tgtadm and ietadm.
    
    Implementation of bpiSCSI-CHAP.
    
    Change-Id: I4f382a96ba4553158dc609e8caf9e70486e30603

 cinder/utils.py         |    5 +++++
 cinder/volume/driver.py |   14 +++++++++++++-
 cinder/volume/iscsi.py  |   38 +++++++++++++++++++++++++++++---------
 3 files changed, 47 insertions(+), 10 deletions(-)

commit c24a82a54e1a4be6d1e6f333763f15b435561573
Merge: 00251c0 7dbc23c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 23 01:17:19 2012 +0000

    Merge "Add trove classifiers for PyPI"

commit b3b1d48d5384cb9f70fdc4b27e07006ba44daa14
Author: Eric Harney <eharney@redhat.com>
Date:   Mon Oct 22 18:37:11 2012 -0400

    Update HACKING.rst and related changes from Nova/PEP8.
    
    Sync up with changes made in Nova, this adds information
    about line continuation (PEP8), OpenStack capitalization,
    and commit messages.
    
    Change-Id: Id6637307411bcc7a3637ac514c4ec34e26481e0d

 HACKING.rst                       |   43 +++++++++++++++++++++++++++++++++++++
 bin/cinder-clear-rabbit-queues    |    2 +-
 bin/cinder-rootwrap               |    2 +-
 bin/cinder-volume-usage-audit     |    2 +-
 doc/source/devref/xensmvolume.rst |    2 +-
 etc/cinder/api-paste.ini          |    2 +-
 6 files changed, 48 insertions(+), 5 deletions(-)

commit 00251c0e16f1149d3cee2719173490f3f0e8868e
Merge: f41e596 8b58a46
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 22 22:39:03 2012 +0000

    Merge "Ensure device node exists before wiping during volume deletion"

commit f41e596607f0a6ef29985a571fb8316132d09932
Merge: 921e13f 71994f4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 22 22:37:53 2012 +0000

    Merge "Update volume and snapshot status on delete"

commit 7dbc23c01eba6172a30448447084f4210457d99f
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Mon Oct 22 18:25:01 2012 -0400

    Add trove classifiers for PyPI
    
    Add classifiers so we can eventually register the project
    on PyPI to reserve the name, even though we won't release
    packages there.
    
    Change-Id: I11fa429d34301ba9a1ec9a543f88d57eb3ac56bb
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>

 setup.py |   10 ++++++++++
 1 file changed, 10 insertions(+)

commit 8b58a4605f83de6a6286ac9de2634dd3269c22b1
Author: Eric Harney <eharney@redhat.com>
Date:   Mon Oct 22 18:02:17 2012 -0400

    Ensure device node exists before wiping during volume deletion
    
    If the LVM device node is missing when a Cinder volume is deleted,
    a large amount of data will be written to /dev/.  Check that the
    device node exists before performing a _copy_volume('/dev/zero'...)
    to wipe it.  Fixes bug 1070023.
    
    Change-Id: I77a0a5545a54a4adc905a781ed8120db7adccc27

 cinder/volume/driver.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 71994f45f51bde72b3323fb84a2461ae452b6949
Author: Clay Gerrard <clay.gerrard@gmail.com>
Date:   Mon Oct 22 16:47:12 2012 -0500

    Update volume and snapshot status on delete
    
    Change the status of "deleting" resources at the same time we update boolean
    flag for deleted.  Makes dumb queries looking for stuck statuses a little
    easier.
    
    Change-Id: Iaf3386526a369f9bf281eb4be42eb11277038c92

 cinder/db/sqlalchemy/api.py |    6 ++++--
 cinder/tests/test_volume.py |    6 ++++++
 2 files changed, 10 insertions(+), 2 deletions(-)

commit 5ddcf35d6889464182173c0524801d20d807e3b6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Oct 22 14:37:26 2012 -0700

    Drop unused quota_usage db methods
    
    The quota_usage_update and quota_usage_destroy db methods are
    not used anywhere - drop them.
    
    Change-Id: Iaa23d1de1642ac7ec9ab4b4cbe119ec742346505

 cinder/db/api.py            |   12 ------------
 cinder/db/sqlalchemy/api.py |   29 -----------------------------
 2 files changed, 41 deletions(-)

commit 921e13f644db987295d22530434f16319f2643aa
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Oct 22 14:17:40 2012 -0700

    Drop duplicate sqlalchemy db api methods
    
    Several methods were redefined at the bottom of
    cinder/db/sqlalchemy/api.py. They have been removed:
    - quota_get
    - quota_get_all_by_project
    - quota_create
    - quota_update
    - quota_destroy
    - quota_destroy_all_by_project
    - quota_class_get
    - quota_class_get_all_by_name
    - quota_class_create
    - quota_class_update
    - quota_class_destroy
    - quota_class_destroy_all_by_name
    - quota_usage_get
    - quota_usage_get_all_by_project
    - quota_usage_create
    - quota_usage_update
    - quota_usage_destroy
    
    Fix bug 1070033
    
    Change-Id: I64b0b0045af7251853da97a8a8c4b2cb09b1dd53

 cinder/db/sqlalchemy/api.py |  222 -------------------------------------------
 1 file changed, 222 deletions(-)

commit 186e32da976b5b9a28952fceb967e2a7119b5851
Merge: f3ecc59 1ea9588
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 22 19:11:22 2012 +0000

    Merge "Update common."

commit f3ecc59364b9adf0bee60fa0dee81bf54587f712
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Mon Oct 22 03:39:04 2012 +0000

    Change output strings to i18ned
    
    Fixes bug #1069601.
    
    Ensure visible message in cinder-volume-usage-audit got through
    translation.
    
    Change-Id: I5c32ce3b2ef2541b8a5520ed53feaf8e00f43c9d

 bin/cinder-volume-usage-audit |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 1a7c6f4a09ef9980ead0c46d080078a7bbc81d10
Author: Pedro Navarro Perez <pednape@gmail.com>
Date:   Thu Oct 18 22:44:59 2012 +0200

    Adds support for Windows 2012 Storage Server
    blueprint windows2012driver
    https://blueprints.launchpad.net/cinder/+spec/windows2012driver
    
    Change-Id: I3f7efb1b976fedc4afb736b87d550a34c330c839

 cinder/tests/test_windows.py                       |  217 ++++++++++++++++++
 cinder/tests/windows/basetestcase.py               |   96 ++++++++
 cinder/tests/windows/db_fakes.py                   |   42 ++++
 cinder/tests/windows/mockproxy.py                  |  234 ++++++++++++++++++++
 cinder/tests/windows/stubs/README.rst              |    2 +
 ...dowsDriver.test_check_for_setup_errors_wmi.p.gz |  Bin 0 -> 473 bytes
 ...ws.TestWindowsDriver.test_create_export_os.p.gz |  Bin 0 -> 439 bytes
 ...s.TestWindowsDriver.test_create_export_wmi.p.gz |  Bin 0 -> 1441 bytes
 ....TestWindowsDriver.test_create_snapshot_os.p.gz |  Bin 0 -> 441 bytes
 ...TestWindowsDriver.test_create_snapshot_wmi.p.gz |  Bin 0 -> 1479 bytes
 ...Driver.test_create_volume_from_snapshot_os.p.gz |  Bin 0 -> 500 bytes
 ...river.test_create_volume_from_snapshot_wmi.p.gz |  Bin 0 -> 1843 bytes
 ...ws.TestWindowsDriver.test_create_volume_os.p.gz |  Bin 0 -> 439 bytes
 ...s.TestWindowsDriver.test_create_volume_wmi.p.gz |  Bin 0 -> 1057 bytes
 ....TestWindowsDriver.test_delete_snapshot_os.p.gz |  Bin 0 -> 441 bytes
 ...TestWindowsDriver.test_delete_snapshot_wmi.p.gz |  Bin 0 -> 1502 bytes
 ...ws.TestWindowsDriver.test_delete_volume_os.p.gz |  Bin 0 -> 472 bytes
 ...s.TestWindowsDriver.test_delete_volume_wmi.p.gz |  Bin 0 -> 1039 bytes
 ...ws.TestWindowsDriver.test_ensure_export_os.p.gz |  Bin 0 -> 439 bytes
 ...s.TestWindowsDriver.test_ensure_export_wmi.p.gz |  Bin 0 -> 1441 bytes
 ...indowsDriver.test_initialize_connection_os.p.gz |  Bin 0 -> 447 bytes
 ...ndowsDriver.test_initialize_connection_wmi.p.gz |  Bin 0 -> 1976 bytes
 ...ws.TestWindowsDriver.test_remove_export_os.p.gz |  Bin 0 -> 439 bytes
 ...s.TestWindowsDriver.test_remove_export_wmi.p.gz |  Bin 0 -> 1451 bytes
 cinder/tests/windows/windowsutils.py               |  145 ++++++++++++
 cinder/volume/windows.py                           |  232 +++++++++++++++++++
 26 files changed, 968 insertions(+)

commit 1ea9588c4df4ec5d36c2d56c66204138d6b68361
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Oct 18 11:43:12 2012 -0700

    Update common.
    
    policy.py is not updated as it causes test failures. I will investigate
    that separately.
    
    Change-Id: I9936137c1ab5b368ba6c3c35c423568b38bf913f

 cinder/openstack/common/rpc/impl_zmq.py   |   96 ++++++-----------------------
 cinder/openstack/common/rpc/matchmaker.py |   31 +---------
 cinder/openstack/common/rpc/service.py    |    9 +--
 cinder/openstack/common/setup.py          |   24 ++++----
 cinder/openstack/common/timeutils.py      |    5 ++
 5 files changed, 43 insertions(+), 122 deletions(-)

commit a4104b76d62c4aa7035891e94ab7bce8469324b6
Author: Cory Wright <corywright@gmail.com>
Date:   Thu Oct 18 08:00:41 2012 -0700

    Fix incorrect class path for legacycinder formatter in logging_sample.conf
    
    Change-Id: I313609f7b996650dfa2c804ebe964aa31549f5ea

 etc/cinder/logging_sample.conf |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1fa8442a525a49d4cf63a8f2b3fab00f2e6405ae
Author: Eric Harney <eharney@redhat.com>
Date:   Wed Oct 10 10:38:22 2012 -0400

    Error message references incorrect variable
    
    In remove_iscsi_target() for the TgtAdm class, the "Failed to
    create iscsi target for volume id:" message references a
    variable that doesn't exist -- use the correct variable name.
    
    Fixes bug 1065073.
    
    Change-Id: I55acb0dd2ee368fdc62a0ded6280d7ef7cd8ab7f

 cinder/volume/iscsi.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 69ab5832e8f4a6614903339c79a67faff06e61e4
Merge: 6912195 45ca339
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 9 02:32:13 2012 +0000

    Merge "Configuration Options clean up"

commit 69121952feba0d0046ba6df24258f6011b0325ce
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Sep 27 22:03:16 2012 +0100

    Loosen anyjson dependency to avoid clash with ceilometer
    
    Ceilometer depends on anyjson 0.3.1, whereas cinder requires
    exacly 0.2.4.
    
    The net effect is a devstack with ceilometer installed will
    appear to work initially, as ceilometer is sparked up after
    cinder. However, if any of the cinder services are subsequently
    restarted, they fail with:
    
      pkg_resources.DistributionNotFound: anyjson==0.2.4
    
    By simply allowing the cinder anyjson dependency version to
    be greater than as opposed to an exact match, we can avoid
    the clash.
    
    Change-Id: I21737a2504705f15dd16e6762b44624678177442

 tools/pip-requires |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 45ca3393b2e0348754fd943a00c4fcb2cf5c60d5
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Mon Oct 8 15:36:39 2012 +0800

    Configuration Options clean up
    
    Small clean up of configuration options including:
     * unused config opts:
       - reclaim_instance_interval
     * rename 'instance' in config opts name/help message to 'volume'
       - 'instance_usage_audit_period' to 'volume_usage_audit_period'
       - help message of 'volume_name_template'
    
    This change also re-generates cinder.conf.sample file.
    
    Change-Id: I3d6c43cf56a5335b4bf768c51d65d76735213431

 cinder/db/api.py              |    2 +-
 cinder/flags.py               |    7 ++----
 cinder/utils.py               |    2 +-
 etc/cinder/cinder.conf.sample |   48 +++++++++++++++++++++++------------------
 4 files changed, 31 insertions(+), 28 deletions(-)

commit 6205ef6f074a16ebe858c6721f37b00ec3373f9d
Merge: 1a524f8 6750acc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 5 18:16:35 2012 +0000

    Merge "Add snapshot force delete admin action"

commit 1a524f8b8088af65eb4551e6683b24a2fde17849
Merge: 61a5ab8 121a519
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 5 17:49:44 2012 +0000

    Merge "Mock out sleep in some retry tests"

commit 61a5ab81d3f784e498ff918a210767221f320785
Author: Julien Danjou <julien@danjou.info>
Date:   Fri Oct 5 14:29:19 2012 +0200

    Fix typo in policy documentation
    
    Change-Id: I61df9dc9b752e1598f4a472771e581091f4de18f
    Signed-off-by: Julien Danjou <julien@danjou.info>

 cinder/policy.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 12678167d1b620e85413f2887c173ad2e238364d
Merge: 30ac574 bdee787
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 5 04:32:15 2012 +0000

    Merge "Use policy based rule to define context.is_admin"

commit 6750acc73420490172d557302d715433351f1373
Author: clayg <clay.gerrard@gmail.com>
Date:   Thu Oct 4 02:31:28 2012 -0500

    Add snapshot force delete admin action
    
    Change-Id: I289030cf0db42aa78cd2d8441d89610dad6cbeaa

 .../api/openstack/volume/contrib/admin_actions.py  |   70 ++++++++++++------
 .../openstack/volume/contrib/test_admin_actions.py |   76 ++++++++++++++++++++
 cinder/tests/policy.json                           |    1 +
 cinder/volume/api.py                               |    4 +-
 etc/cinder/policy.json                             |    3 +-
 5 files changed, 130 insertions(+), 24 deletions(-)

commit 121a51911b6c88f97783cf57967506d81de12188
Author: Clay Gerrard <clay.gerrard@gmail.com>
Date:   Wed Oct 3 13:00:07 2012 -0500

    Mock out sleep in some retry tests
    
    Stub sleep in storwize tests
    Stub sleep in glance tests
    
    Change-Id: Ia935d561d104a4cd6373624208dedf5891b516e3

 cinder/tests/image/test_glance.py |    1 +
 cinder/tests/test_storwize_svc.py |    1 +
 2 files changed, 2 insertions(+)

commit 30ac5746c1c8a93c50ee65b66340fa59f33936a6
Merge: 08a1b5b 1fde9df
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 3 17:29:41 2012 +0000

    Merge "Fix typo in sample configuration file"

commit 08a1b5b2bf7638131bda890ed5cd360d26e10f86
Merge: 3a654b7 4662fa2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 3 17:19:08 2012 +0000

    Merge "Replace builtin hash with MD5 to solve 32/64-bit issues."

commit 3a654b7c4495f890caf508521f1dd5bb00d15368
Merge: 6d841d3 adc8340
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 3 17:15:11 2012 +0000

    Merge "Remove unused code: check_for_export."

commit 6d841d3d0df00fdef5b16c588b20049d4708dca1
Merge: 4cfb90a 38f4d6e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 2 22:58:34 2012 +0000

    Merge "Update distribute version in test requires."

commit bdee787cf79c359cc4583483e010ddf3d356cb18
Author: Clay Gerrard <clay.gerrard@gmail.com>
Date:   Mon Oct 1 11:33:25 2012 -0500

    Use policy based rule to define context.is_admin
    
    When creating a context set is_admin based on policy instead of
    hard coded requirement for a role named 'admin'.
    
    Fixes: bug# 1053181
    
    Change-Id: I9c05b8ecde887467557c4f01e074145b6a6372aa

 cinder/context.py           |    3 ++-
 cinder/policy.py            |   18 ++++++++++++++++++
 cinder/tests/policy.json    |    3 ++-
 cinder/tests/test_policy.py |   44 ++++++++++++++++++++++++++++++++++++++++++-
 etc/cinder/policy.json      |    5 +++--
 5 files changed, 68 insertions(+), 5 deletions(-)

commit 4cfb90a9b82c52c476187204f8b0a83d9ba7c186
Author: Clay Gerrard <clay.gerrard@gmail.com>
Date:   Fri Sep 28 16:27:09 2012 -0500

    Sync openstack common and add policy
    
    openstack-common.conf now includes network_utils and policy
    
    The default kombu imple for openstack.common.rpc seems to depends on
    network_utils.
    
    Fixes: bug #1058353
    
    Change-Id: I2526c7355e7f2be67b25bf22854c56ec65741d9a

 cinder/common/policy.py                   |  223 ---------------------
 cinder/openstack/common/network_utils.py  |   68 +++++++
 cinder/openstack/common/policy.py         |  301 +++++++++++++++++++++++++++++
 cinder/openstack/common/rpc/impl_kombu.py |  132 ++++++++-----
 cinder/openstack/common/rpc/impl_qpid.py  |   20 +-
 cinder/openstack/common/rpc/impl_zmq.py   |   96 +++++++--
 cinder/openstack/common/rpc/matchmaker.py |   31 ++-
 cinder/openstack/common/rpc/service.py    |   69 +++++++
 cinder/openstack/common/timeutils.py      |   16 +-
 cinder/policy.py                          |    8 +-
 cinder/tests/test_policy.py               |    9 +-
 openstack-common.conf                     |    2 +-
 12 files changed, 664 insertions(+), 311 deletions(-)

commit 1fde9df9a5a82edcb8125e34906520fa4813fb6c
Author: Julien Danjou <julien@danjou.info>
Date:   Fri Sep 28 11:49:46 2012 +0200

    Fix typo in sample configuration file
    
    Change-Id: I9f7f6c7c15969fe8cd701ac7580f33d173ea1375
    Signed-off-by: Julien Danjou <julien@danjou.info>

 etc/cinder/cinder.conf.sample |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 38f4d6ef58ae6f89958a4cdc025d0c7aa0dcfb0c
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Sep 27 18:45:39 2012 -0600

    Update distribute version in test requires.
    
    Changes in openstack-infrastructure have upgraded version of distribute.
    We should match this to keep things consistent.
    
    CI systems are installing virtualenv>=1.8 which gives distribute
    0.6.28, so we'll add that to our test-requires.
    
    Change-Id: I44ad33fd0e96576379ee62a6f584f742e466ce74

 tools/test-requires |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2a15ffc589fc5f96fc91c40a27403128d100775b
Merge: df818cc 5b61536
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 25 21:13:07 2012 +0000

    Merge "Fixes remove_export for IetAdm"

commit df818cc2bbd31d91d2055d0ec164736a36317f4d
Merge: 94c4ec8 b2627b2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 25 20:55:17 2012 +0000

    Merge "Fix NetAppCmodeISCSIDriver._get_lun_handle() method"

commit 94c4ec8a1e68fe7a764732a65a48322c7d1cc724
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Sep 25 15:52:38 2012 +0100

    Revert explicit usage of tgt-adm --conf option.
    
    Fixes bug 1056246.
    
    This reverts commit 0903603971033536751ba40df98a3c39175d3189.
    
    This ensures that we fail-fast if the tgtd configuration does
    not include the directory for volume iscsi target configs,
    instead of only blowing up when tgtd is restarted.
    
    Change-Id: I30aa3f1d8944eb33cd4a42d65e227031023406b4

 cinder/tests/test_iscsi.py |    3 +--
 cinder/volume/iscsi.py     |    8 +++++---
 2 files changed, 6 insertions(+), 5 deletions(-)

commit 5b61536fdf17332f48af4b422fe23c2e153934a1
Author: MotoKen <motokentsai@gmail.com>
Date:   Tue Sep 25 13:08:34 2012 +0800

    Fixes remove_export for IetAdm
    
    * Corrects indentation.
    * Uses specific iqn as keyword argument.
    
    Fixes bug 1055401
    
    Change-Id: Ie99dd8a34924f0d7f447cf41a305353659a51d11

 cinder/volume/driver.py |    2 +-
 cinder/volume/iscsi.py  |   14 ++++++--------
 2 files changed, 7 insertions(+), 9 deletions(-)

commit 7f00d13640edac8136241e546076f2106f7bfa61
Author: John Griffith <john.griffith@solidfire.com>
Date:   Mon Sep 24 12:59:15 2012 -0600

    Add missing entries in setup, fix up pip-requires
    
    setup.py still has references to nova/compute and was missing some
    requires statements, and more importantly didn't hvae the install_requires.
    
    Also, tools/pip-requires needed lxml versions set, as well as
    added the missing setuptools_git entry.
    
    This was exposed when trying to run Grenade as the requires.txt
    file was never generated.
    
    Fixes bug #1055693
    
    Change-Id: Iaf9669d66e89507989ef3fde630dc2b488a97cfc

 setup.py            |   10 +++++++---
 tools/pip-requires  |    7 ++++---
 tools/test-requires |    2 +-
 3 files changed, 12 insertions(+), 7 deletions(-)

commit b2627b27dae521d719b90831dcc41695b389712f
Author: Ben Swartzlander <bswartz@netapp.com>
Date:   Mon Sep 24 12:30:48 2012 -0400

    Fix NetAppCmodeISCSIDriver._get_lun_handle() method
    
    bug 1055578
    
    Change-Id: I06da6a9a59fa2320f1cae9698e5e63562e534916

 cinder/volume/netapp.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0f0a90ca0d16935fbd8d9af481a0ae0c263f133b
Merge: 454d596 186143e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 21:56:48 2012 +0000

    Merge "Fix cinder-volume-usage-audit"

commit adc83405e599bd51abb8f3617916c8f80c8a9d4f
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Sep 21 14:51:17 2012 -0400

    Remove unused code: check_for_export.
    
    This code has been unused since cinder was split from nova.  It used to
    be used as a safety check during live migration.  The check was removed
    recently in nova, since it wasn't being used with Cinder anyway (just
    nova-volumes).
    
    An alternative approach would be to expose this from Cinder somehow if
    we feel it's important, but until then, there's no reason to keep dead
    code around.
    
    Change-Id: I5adfb405c1bd04bcc1ad61d511afb227a198f4ed

 cinder/tests/test_storwize_svc.py |    2 --
 cinder/tests/test_volume.py       |    4 ----
 cinder/tests/test_zadara.py       |    1 -
 cinder/volume/driver.py           |   42 -------------------------------------
 cinder/volume/manager.py          |    7 -------
 cinder/volume/netapp.py           |    6 ------
 cinder/volume/nfs.py              |    4 ----
 cinder/volume/storwize_svc.py     |    3 ---
 cinder/volume/zadara.py           |    4 ----
 9 files changed, 73 deletions(-)

commit 454d596b65569eedcd6dc1e9bece66f2a13871f8
Merge: 414757d c678b04
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 17:23:25 2012 +0000

    Merge "Return 400 if create volume snapshot force parameter is invalid"

commit c678b045c9839ed30e13fe5e7e655e3cb2e2c3f9
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Wed Sep 12 10:18:31 2012 +0000

    Return 400 if create volume snapshot force parameter is invalid
    
    Fixes bug #1014689
    
    * Add is_valid_boolstr function in utils.py
    * Add force parameter check in SnapshotsController.create()
    * Add unittest for invalid force parameter.
    
    Change-Id: I0f64326f33eb4fad1cf384bd825f56f09e935f40

 cinder/api/openstack/volume/snapshots.py           |    7 ++++++-
 .../tests/api/openstack/volume/test_snapshots.py   |   11 +++++++++++
 cinder/utils.py                                    |    9 +++++++++
 3 files changed, 26 insertions(+), 1 deletion(-)

commit 186143ecc81369c02aca51b81feb976259bcad41
Author: Julien Danjou <julien@danjou.info>
Date:   Thu Sep 20 18:37:36 2012 +0200

    Fix cinder-volume-usage-audit
    
    It seems many point in the internal API and openstack.common changed, but
    this binary has been forgotten.
    
    Also, context ie needed when using the notifier, so import it.
    
    This fixes bug #1053502
    
    Change-Id: I306b8671e7b0ed8c2ce2548a51a4c5e6393e13cb
    Signed-off-by: Julien Danjou <julien@danjou.info>

 bin/cinder-volume-usage-audit           |   22 +++------
 cinder/openstack/common/context.py      |   81 +++++++++++++++++++++++++++++++
 cinder/openstack/common/notifier/api.py |    8 +--
 cinder/volume/utils.py                  |    2 +-
 openstack-common.conf                   |    2 +-
 5 files changed, 94 insertions(+), 21 deletions(-)

commit 414757d8c336ef791f9654a425693918e1ecd792
Author: Avishay Traeger <avishay@il.ibm.com>
Date:   Fri Sep 21 15:58:27 2012 +0300

    Sync with nova change I135ed85a.
    
    This patch syncs the cinder driver code with that of the nova code,
    as we received comments in the review process there.  All changes are
    minor: (1) removing unnecessary type checks of the flags, (2) not
    using getattr to access the FLAGS, and (3) using the self.flags()
    infrastructure that test.TestCase provides.
    
    Change-Id: Id740be6441862f048c3a9267394492a7ed65db84

 cinder/tests/test_storwize_svc.py |  134 ++++++++++++++++++-------------------
 cinder/volume/storwize_svc.py     |   67 ++++++-------------
 2 files changed, 88 insertions(+), 113 deletions(-)

commit 5c74bf51f6ef131db7c47606949b99c57cbbe217
Merge: 52de540 bc0fb11
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 04:45:51 2012 +0000

    Merge "Remove cinder gating hack"

commit 52de54082cd0dbacd2c79ccc8c6b0cbbd7609884
Merge: a978780 a1cbbe2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 04:04:42 2012 +0000

    Merge "Stop double logging to the console"

commit a978780f710a9eff34cd3720160ba2757d3215b9
Merge: f551985 d051ca9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 03:32:03 2012 +0000

    Merge "Set the default availability zone back to nova"

commit bc0fb113af225878b4305da7d834673a6b7f5e97
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Fri Sep 21 00:32:56 2012 +0000

    Remove cinder gating hack
    
    The hack was necessary while we switched the name used for az's
    in the gating tests. Now it can be removed
    
    Change-Id: I970205910ac0950ab4a961aa0537eb964d7f0d3c

 cinder/api/openstack/volume/volumes.py |    3 ---
 1 file changed, 3 deletions(-)

commit d051ca9cdf828b1e47ef5158c4b83beb9484109e
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Thu Sep 20 16:34:59 2012 +0000

    Set the default availability zone back to nova
    
    Currently nova and cinder have to have the same set of az's for
    the ec2 api to work properly. Therefore, set the default az for
    cinder to nova so they will match.
    
    Includes a hack to az to set cinder to nova to work around gate
    issues. The hack can be removed once the gate sets the zone to
    nova properly.
    
    Fixes bug 1053508
    
    Change-Id: I9c30ccc5c79b9c4e6c1ebeb3e80d0098e1ffbb11

 cinder/api/openstack/volume/volumes.py            |    3 +++
 cinder/flags.py                                   |    3 ++-
 cinder/tests/api/openstack/volume/test_volumes.py |    4 ++--
 cinder/tests/integrated/test_volumes.py           |    4 ++--
 cinder/tests/test_service.py                      |    8 ++++----
 5 files changed, 13 insertions(+), 9 deletions(-)

commit f55198570fd59b7a2a4ddd2f5e77b3d03d0a3d64
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Sep 20 17:27:13 2012 -0600

    Add lun number (0) to model_update in HpSanDriver
    
    The HpSanDriver was not setting the lun number in model_update
    and as a result default value of 1 was being used.  Trouble is the
    Lun number used by LeftHand is 0, so the connect info would be
    wrong and fail when trying to attach the volume.
    
    Fixes bug #1053717
    
    Change-Id: If82a66c6a78ab03da09223a7b79abe559a6f702f

 cinder/tests/test_HpSanISCSIDriver.py |    2 +-
 cinder/volume/san.py                  |    7 +++++--
 2 files changed, 6 insertions(+), 3 deletions(-)

commit 6929fa2166b44e47da40e798148ed901ede673f1
Merge: 730ebab 3b8a630
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 20 22:59:47 2012 +0000

    Merge "Fixes to the SolarisISCSI Driver"

commit 3b8a6303e6c04f0c7b45043c2fcd53948910d37e
Author: Yosef Berman <yosef@cloudscaling.com>
Date:   Thu Sep 20 10:34:24 2012 -0700

    Fixes to the SolarisISCSI Driver
    
    Even when the san_is_local config option was set to false, the
    SolarisISCSIDriver's _execute method was accidentally set to
    util.execute by the VolumeDriver's __init__ method.
    
    Fix bug 1053041
    
    Change-Id: Ie3299f5065e2b084644ec2956f0c6ebae4264a49

 cinder/volume/san.py |   17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)

commit a1cbbe2e9e5d7a5ec55ec1197571cd68fcdbad15
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Thu Sep 20 16:52:51 2012 +0000

    Stop double logging to the console
    
    The code in nova for logging added an extra root handler to be
    able to log messages to the console during log setup. This handler
    was removed in the setup method. The common setup method no longer
    removes this handler, so don't create it. Note that there may be
    a small period before the logging setup is finished where messages
    will not appear.
    
    Fixes bug 1053512
    
    Change-Id: I559cca8ffc2a33beff22025e42a9713487245980

 cinder/__init__.py |    5 -----
 1 file changed, 5 deletions(-)

commit 730ebab71e11812b6b5990180e7bd9cabfe237c4
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Sep 20 14:21:00 2012 +0200

    Restore SIGPIPE default action for subprocesses
    
    Python ignores SIGPIPE on startup, because it prefers to check every
    write and raise an IOError exception rather than taking the signal. Most
    Unix subprocesses don't expect to work this way. This patch (adapted
    from Colin Watson's post at http://tinyurl.com/2a7mzh5) sets SIGPIPE
    back to the default action for cinder.utils.execute and cinder-rootwrap
    created subprocesses.
    
    Fixes bug 1053364
    
    Change-Id: I4b3307bd2f0f5d0da529d8b7d80fabae28c57732

 bin/cinder-rootwrap |    9 +++++++++
 cinder/utils.py     |    8 ++++++++
 2 files changed, 17 insertions(+)

commit 32721a67ae2936093aef5ecea4efd8b32a516c32
Merge: 321d323 f14e955
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 20 05:05:14 2012 +0000

    Merge "Correct IetAdm remove_iscsi_target"

commit 4662fa29af88783cd9e95b553c044c733ea94753
Author: Ben Swartzlander <bswartz@netapp.com>
Date:   Wed Sep 19 17:07:47 2012 -0400

    Replace builtin hash with MD5 to solve 32/64-bit issues.
    
    It seems that Python's builtin hash returns different
    values on 32-bit and 64-bit architectures, so it's
    safer to use a well-defined hash like MD5.
    
    bug 1050359
    
    Change-Id: I0a4f11b34a1f76cda279ec801cede1440c6e5966

 cinder/tests/test_nfs.py |    9 +++++----
 cinder/volume/nfs.py     |    4 ++--
 2 files changed, 7 insertions(+), 6 deletions(-)

commit f14e955735065a998cd78280661f6d33c850d9e2
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Sep 19 11:18:51 2012 -0600

    Correct IetAdm remove_iscsi_target
    
    Remove logical units should be done before delete the target while
    unexport iSCSI volume. Or ietd will show "No such file or directory"
    error.
    
    Fix bug 1043107
    
    Change-Id: Iab5b97044c5a30c788fcabce827923ff82a84b91

 cinder/tests/test_iscsi.py |    4 ++--
 cinder/utils.py            |   15 +++++++++++++++
 cinder/volume/iscsi.py     |    5 ++---
 3 files changed, 19 insertions(+), 5 deletions(-)

commit 321d32379cd6044378f2f9c32c068de18f514df5
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Sep 18 13:29:20 2012 -0600

    Add nova migrate_version check to cinder import
    
    Cinder-manage migrate import only works from Nova/Folsom--->Cinder/Folsom
    this change adds an explicit check of the nova migrate_version (133)
    to make sure we have all of the volume id/uuid changes that are needed
    to be compatable, and presents an error message if that's not the case.
    
    Addresses bug #1052598
    
    Change-Id: I7f32cf35e33320f4348b7bc44a8e92b5716b71d8

 bin/cinder-manage |   12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 45e67e8b77ffbc783da111dda96add68f1687341
Merge: cbf2e46 04ca527
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 20:13:30 2012 +0000

    Merge "Add update to volume and snapshot controllers"

commit cbf2e466ad47c0911b10d5b16b734ed8311d250a
Merge: a5e9461 8cf45c9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 17:30:17 2012 +0000

    Merge "Bump version to 2013.1"

commit a5e9461d47238579509fd558cc5e83a8102bb102
Merge: 8c99195 58dd238
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 16:30:19 2012 +0000

    Merge "Clean up db.volume_create()"

commit 8cf45c9382461d29c5449d2ab542d9746064df24
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Sep 18 15:41:42 2012 +0200

    Bump version to 2013.1
    
    Bump version to 2013.1 on master branch to open Grizzly development.
    
    Change-Id: Iad73bf47c4ff77216ee27c3b08117dcaa9487ddf

 cinder/version.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8c9919582ce329822259474c55fec12f4a0dbf82
Merge: 2693b40 f9cf780
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 08:12:09 2012 +0000

    Merge "Fix volume deletion when device mapper is used"

commit 58dd2385365e7f5b79dc0c151092795d02bfe802
Author: John Griffith <john.griffith@solidfire.com>
Date:   Mon Sep 17 15:36:10 2012 -0600

    Clean up db.volume_create()
    
     Adding the metadata return to db.volume_create() introduced some
     messy and unnecessary repitition in the code.  This patch
     cleans that up and makes use of existing volume_get functions rather
     than duplicating the code in volume_create.
    
     This syncs cinder up with the patch as it's been submitted for nova
     in https://review.openstack.org/#/c/10461/
    
     Addresses bug #1052176
    
    Change-Id: I17aca069fbb0240770613f176430a1b2fcf2b25a

 cinder/db/sqlalchemy/api.py |   11 +----------
 cinder/tests/test_volume.py |    7 +++----
 2 files changed, 4 insertions(+), 14 deletions(-)

commit 2693b405b4c0667e1cec3295472331172d641cb4
Merge: 644a98a 9696bd9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 17 20:37:07 2012 +0000

    Merge "Update quota when deleting volume that failed to be scheduled"

commit f9cf780678078c77881fee41addc093abb15c136
Author: Rafi Khardalian <rafi@metacloud.com>
Date:   Wed Sep 5 05:51:43 2012 +0000

    Fix volume deletion when device mapper is used
    
    Call dmsetup remove if there is a /dev/mapper/nova--volumes-
    element present.
    
    Resolves bug 979020
    
    Change-Id: Iddaaed411a77dda4bd32f9a97687ff17744119eb

 cinder/volume/driver.py              |    4 ++++
 etc/cinder/rootwrap.d/volume.filters |    4 ++++
 2 files changed, 8 insertions(+)

commit 644a98a9eb1b0cedfc82f6e4efe0f12aeab93de4
Merge: 1a40881 a3e7da8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 17 18:14:34 2012 +0000

    Merge "Fix FLAGS.volumes_dir help message"

commit 9696bd9a8c11618edf970812de822ad0ba99498c
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Mon Sep 17 17:26:09 2012 +0800

    Update quota when deleting volume that failed to be scheduled
    
    If one volume was failed to get scheduled, removing such volume should
    also clean up reservation.
    Also when create_volume is ready to send to scheduler, reservation
    should be committed no matter backend can successfully create that
    volume or not since deleting volume call will do a minus reservation
    even on volume with 'error' status.
    
    Fix bug 1052052
    
    Change-Id: Iaec9926024ad5adb38b08b07772095f49b8593c2

 cinder/volume/api.py     |   24 ++++++++++++++++++------
 cinder/volume/manager.py |    9 ++-------
 2 files changed, 20 insertions(+), 13 deletions(-)

commit 1a408818e96434778d34415e880d81c6f176233f
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Sep 14 13:50:47 2012 -0400

    Sync a change to rpc from openstack-common.
    
    This commit pulls in the following change from openstack-common:
    
        ee44222 Change the qpid_heartbeat default to 60 seconds.
    
    Fix bug 1050661.
    
    Change-Id: I999e16c18227f9aab4dc8c2ff88cd6907c7c8191

 cinder/openstack/common/rpc/impl_qpid.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 26f5b0c7563bd89326715647e24ae284e70ec865
Merge: 8c7cf10 e255311
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 14 03:43:28 2012 +0000

    Merge "Sync notifier changes from openstack-common"

commit 8c7cf1087681c283d010aa7a2d6f10d94ef4536f
Merge: 0223924 2aa5015
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 14 03:43:06 2012 +0000

    Merge "Add a resume delete on volume manager startup"

commit 02239242ebf451ba7316d6ed9c4aef70147d6d29
Merge: 4ae3c1f dcecb58
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 14 03:41:14 2012 +0000

    Merge "Improve entity validation in volumes APIs"

commit 2aa501560384205b0fd3891ed5dd2a3864afcdc2
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Sep 13 10:53:52 2012 -0600

    Add a resume delete on volume manager startup
    
      Currently if for some reason the volume service was stopped
      during the zero out operation of a volume delete there was
      no way to get the volume removed from the system (it would
      be present in deleting status forever).
    
      This change adds a simple check of volumes in the DB with status
      of deleting, and if any are found it restarts the delete process
      on them.
    
      addresses bug #1011150
    
    Change-Id: Id4c4a3bc61f95245ebc6658234b4b88029956562

 cinder/volume/manager.py |    6 ++++++
 1 file changed, 6 insertions(+)

commit 4ae3c1fabaa807eec2e7639b4c2bc7208e9e86e9
Merge: 974cbd7 3dcb3fd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 13 16:45:10 2012 +0000

    Merge "Add entity body validation helper"

commit dcecb586a0578688656d5420c40c26e5a8caa942
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 12 12:51:40 2012 +0100

    Improve entity validation in volumes APIs
    
    Fixes bug #1048565
    
    Use the new Controller.is_valid_body() helper to validate the entity
    body in various volumes related POST/PUT handlers and return 422
    as appropriate.
    
    Change-Id: I04127972981522c1ed81903893396c4f9665bcd3

 .../openstack/volume/contrib/types_extra_specs.py  |   21 +++----
 .../api/openstack/volume/contrib/types_manage.py   |    7 +--
 cinder/api/openstack/volume/snapshots.py           |    6 +-
 cinder/api/openstack/volume/volumes.py             |    7 +--
 .../volume/contrib/test_types_extra_specs.py       |   60 ++++++++++++++------
 .../openstack/volume/contrib/test_types_manage.py  |   33 ++++++++---
 .../tests/api/openstack/volume/test_snapshots.py   |   29 ++++++++++
 cinder/tests/api/openstack/volume/test_volumes.py  |   39 ++++++++++---
 8 files changed, 145 insertions(+), 57 deletions(-)

commit 3dcb3fdba791639ab3fe7ab20b3398babcd27512
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 12 12:51:23 2012 +0100

    Add entity body validation helper
    
    Add a _valid_body() helper for the to avoid repeating the same tests in
    multiple methods. Include a check that the entity itself is actually a
    dict.
    
    (Cherry-picks part of commit d1ad73ee from Nova)
    
    Change-Id: If8114cc76d68567005c85c803f29e30e034db89a

 cinder/api/openstack/wsgi.py            |   17 +++++++++++++++++
 cinder/tests/api/openstack/test_wsgi.py |   29 +++++++++++++++++++++++++++++
 2 files changed, 46 insertions(+)

commit 974cbd718d9c66a33b8ae6b0e3c4f7dcc5563015
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Sep 13 08:50:09 2012 -0600

    Should've added super().tearDown() in test_iscsi
    
      Made changes to use tempfiles and implemented teardown,
      but should have also called super().tearDown as well.
    
      Associated with chage: I9b9a2400
    
    Change-Id: I2e9d1cb7bfbe78323630eb2f3270698a7ce7e4c4

 cinder/tests/test_iscsi.py |    1 +
 1 file changed, 1 insertion(+)

commit a130956e667da9d040f99de4edb0c0f72afde25d
Author: Avishay Traeger <avishay@il.ibm.com>
Date:   Tue Sep 11 17:11:41 2012 +0300

    Fixes bug 1050135.
    
    Regenerate cinder.conf.sample and fix a couple related bugs.
    
    Change-Id: I3e472f9c69ad4888dc15f901f4bc7cd825fb5ba1

 cinder/api/sizelimit.py       |    4 +-
 cinder/volume/solidfire.py    |    2 +-
 etc/cinder/cinder.conf.sample |  324 ++++++++++++++++++++++++++++++++++++++++-
 3 files changed, 322 insertions(+), 8 deletions(-)

commit a3e7da8c515e3d10217ebc5bf708da13479ab80c
Author: Joe Gordon <jogo@cloudscaling.com>
Date:   Wed Sep 12 18:06:34 2012 -0700

    Fix FLAGS.volumes_dir help message
    
    And other nova/volume/iscsi.py typos
    
    Change-Id: I781a07b4f11b6cf336c278a6994bd5575ae1a70a

 cinder/volume/iscsi.py |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit fde1827200b9b4ea1bec964df4dcd7f12de6b342
Merge: 924d8dd 96f72f2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 13 00:16:08 2012 +0000

    Merge "Use tmpdir and avoid leaving test files behind"

commit 924d8dd3a3a0f4ad5dc0fa872e4ad76f8153b050
Merge: 1f3c412 08bfa1c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 13 00:15:40 2012 +0000

    Merge "Sync log format changes from openstack-common."

commit 1f3c412e19b4120604453094c2583183aaeff116
Merge: 81061b1 b6cf220
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 13 00:15:16 2012 +0000

    Merge "Update rpc from openstack-common."

commit 96f72f2cfd0afa6e60399dadd30bb83b0ab8ee0e
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Sep 12 16:52:02 2012 -0600

    Use tmpdir and avoid leaving test files behind
    
     We were just creating a file for testing iscsi persist files and
     weren't cleaning up after the test.
    
     Change this to use a tmpdir and make sure we leave no tracks.
    
     Fixes bug #1050086
    
    Change-Id: I9b9a2400a172d52987d76f3132793cb042fd201c

 cinder/tests/test_iscsi.py |   14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

commit 81061b1b251a568697836a91d6e5dff08872cf3a
Merge: b4e63d4 a955730
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 12 23:24:55 2012 +0000

    Merge "Add volume quota in volume/api.py and olume/manager.py"

commit b4e63d4269c658d412d0e635e396993ea0a2dc86
Merge: 24b3cd5 190c49e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 12 17:40:45 2012 +0000

    Merge "Fixes bug 1049446."

commit 08bfa1c5b9ed168f0edda03e63b2e445068c514c
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Sep 12 12:34:43 2012 -0400

    Sync log format changes from openstack-common.
    
    This patch pulls in the following change from openstack-common:
    
        9f88d84 Improve logging of process id
    
    Change-Id: I6c5be346ed332d14357441b2b147ad1f09157f41

 cinder/openstack/common/log.py |    9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit b6cf220db95391ee6c85ad07903478ca03d42873
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Sep 12 12:30:04 2012 -0400

    Update rpc from openstack-common.
    
    Fix bug 1049843.
    
    This commit syncs the following commit from openstack-common:
    
        commit 7e9f72bb28456c912aa80945dbdb8d200f81b462
        Make projects define 'control_exchange'.
    
    This change allows cinder to set a project-specific default of 'cinder'
    for the 'control_exchange' option.  The option is now defined in
    cinder.flags.
    
    Change-Id: Ia91c172ca0665798d616f9faf5880770074235c8

 cinder/flags.py                           |    3 +++
 cinder/openstack/common/rpc/__init__.py   |   12 +++++++++---
 cinder/openstack/common/rpc/amqp.py       |    8 ++++++++
 cinder/openstack/common/rpc/impl_kombu.py |   13 +++++++------
 cinder/openstack/common/rpc/impl_qpid.py  |   17 +++++++----------
 etc/cinder/cinder.conf.sample             |    8 ++++----
 6 files changed, 38 insertions(+), 23 deletions(-)

commit a955730b569be6f1132cbd254d8f21828c54d2f2
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Wed Sep 12 07:10:53 2012 +0000

    Add volume quota in volume/api.py and olume/manager.py
    
    Fixes bug #1048158
    
    volume.api.API.create() call QUOTAS.reserve(), then
    volume.manager.VolumeManager.create_volume call QUOTAS.commit().
    volume.manager.VolumeManager.delete_volume call QUOTAS.reserve() and
    QUOTAS.commit().
    
    It also fixes bug #1049459.
    
    Change-Id: I764aeec83cce93595fbe9aa00205a7d8c9e13c35

 cinder/volume/api.py     |   12 ++++++++----
 cinder/volume/manager.py |   24 +++++++++++++++++++++++-
 2 files changed, 31 insertions(+), 5 deletions(-)

commit 190c49e1381cc39160ced743cb11e140c9be4825
Author: Avishay Traeger <avishay@il.ibm.com>
Date:   Tue Sep 11 13:31:01 2012 +0300

    Fixes bug 1049446.
    
    Removed the "vtype" option which did not work in the driver, and
    added the "easytier" option. Added another check to _check_flags
    and made sure -warning flag is passed properly. Added unit tests
    to check all option variations.
    
    Change-Id: I4e66436f8f62d851a079ec80209fe9d6b27fb5b4

 cinder/tests/test_storwize_svc.py |  252 +++++++++++++++++++++++++++++--------
 cinder/volume/storwize_svc.py     |   61 +++++----
 2 files changed, 233 insertions(+), 80 deletions(-)

commit 24b3cd56967193e789564245352acecb4c80f767
Merge: 6b612c1 e756bb9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 11 22:58:09 2012 +0000

    Merge "Remove null_kernel option."

commit 6b612c14eae150727cd24736bdb512d11b3a4f21
Merge: 2ed3eeb ea71637
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 11 22:15:46 2012 +0000

    Merge "Revert "Don't zero out snapshot volume on snapshot_delete""

commit ea716377a8a04937acfe637086b3657c4527f2ed
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Sep 11 21:41:30 2012 +0000

    Revert "Don't zero out snapshot volume on snapshot_delete"
    
    This reverts commit 1b3322d45fe2c5ed72cc7f8674e5e319928065ad
    
    Turns out that although it's less likely we can still see this issue when zeroing out regular volumes.

 cinder/tests/test_volume.py |    6 +++---
 cinder/volume/driver.py     |   22 +++++++++-------------
 2 files changed, 12 insertions(+), 16 deletions(-)

commit 04ca527aa394376b20e1fc09b1cdd1ca8a0a105a
Author: Clay Gerrard <clay.gerrard@gmail.com>
Date:   Mon Aug 27 21:38:25 2012 +0000

    Add update to volume and snapshot controllers
    
    Add update method to api.openstack.volume.volumes and snapshots
    controllers.  Url mapping automatically routes a PUT on the resource to
    the update method.  Implementation closely matches updates to server
    resource for the openstack compute api.
    
    e.g.
    
    curl http://localhost:8776/v1/${PROJECT_ID}/volumes/${VOLUME_ID} \
        -H 'x-auth-token: ${ADMIN_AUTH_TOKEN}' \
        -H 'content-type: application/json' \
        -XPUT -d '{"volume": {"display_name": "new-name"}}'
    
    Add volume.api.API.update_snapshot method to avoid making db calls
    directly from the SnapshotsController.
    
    Add tests for new methods.
    
    Update return value of test_volume.VolumeTestCase._create_snapshot
    to return the whole model like _create_volume
    
    fixes lp bug #1042904
    
    Change-Id: I887178f9b7834cc7afd54bba8fb902b630faf8c0

 cinder/api/openstack/volume/snapshots.py           |   33 ++++++++++++
 cinder/api/openstack/volume/volumes.py             |   33 ++++++++++++
 cinder/tests/api/openstack/fakes.py                |    4 ++
 .../tests/api/openstack/volume/test_snapshots.py   |   43 ++++++++++++++++
 cinder/tests/api/openstack/volume/test_volumes.py  |   53 ++++++++++++++++++++
 cinder/tests/integrated/api/client.py              |    3 ++
 cinder/tests/integrated/test_volumes.py            |   17 +++++++
 cinder/tests/policy.json                           |    1 +
 cinder/tests/test_volume.py                        |   36 ++++++++++---
 cinder/volume/api.py                               |    4 ++
 10 files changed, 221 insertions(+), 6 deletions(-)

commit 2ed3eeb13514ce502ce1df873970404084b50999
Merge: f070460 2c7c976
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 11 17:20:55 2012 +0000

    Merge "Remove unused utils.wrap_exception"

commit f070460b70cae09014c0f3799f21306d391f7506
Merge: 8d4c1cf b51265a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 10 18:40:17 2012 +0000

    Merge "Nail the pip requirement at 1.1."

commit 8d4c1cfffc9f672716da25464eb95a4fab09d10e
Merge: 200151a 848d5de
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 10 18:26:00 2012 +0000

    Merge "rename nova.pot => cinder.pot, nova.po => cinder.po"

commit b51265a9f61c8ef445fba4110ea5684bc918e682
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Sep 6 21:54:16 2012 -0400

    Nail the pip requirement at 1.1.
    
    The most recent version of pip (1.2.1 as of a couple days ago) fails
    to install the required Cinder .venv packages. Nailing the installed
    pip version when using run_tests.sh seems like a reasonable solution
    to this issue.
    
    Fixes LP Bug #1047120.
    
    Change-Id: I8d831f747b0d25b5d0f6e74a234e764ff448965b

 tools/install_venv.py |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 200151a36eaa421c8c2b5e45cec72f88bc2e469e
Merge: 97e1e71 1b3322d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 10 02:48:37 2012 +0000

    Merge "Don't zero out snapshot volume on snapshot_delete"

commit 97e1e712078e5d5b564b215a8e1c77fbf8103df7
Merge: dad3f66 6060836
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 10 02:19:56 2012 +0000

    Merge "Recent changes to SolidFire API changed iqn format"

commit dad3f665a1e018012647b758bfc9a3a58b2db0ec
Merge: 0f8269a 3eaf43a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Sep 9 17:45:46 2012 +0000

    Merge "Prevent from bug #1008866 is reverted"

commit 0f8269afcab478dfbfbc3dc744468402bc11c8d1
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Sun Sep 9 18:49:19 2012 +0800

    Clean up .gitignore
    
    remove:
    * nova.egg-info
    * .nova-venv
    * tools/conf/nova.conf*
    
    Change-Id: I6578a75314b86628a5afbd4c4282fb271b9a830e

 .gitignore |    3 ---
 1 file changed, 3 deletions(-)

commit 3eaf43a9f5a26a51a89347cffe39bfae2b12c2d6
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Sun Sep 9 15:35:26 2012 +0800

    Prevent from bug #1008866 is reverted
    
    Fixes bug #1047841.
    
    Commit 2f5360753308eb8b10581fc3c026c1b66f42ebdc (Adds new volume API
    extensions) reverted a part of commit
    99456bd690445443ae05c0d4fe1ec43ba6090f6f (Send 'create volume from
    snapshot' to the proper host), so bug #1008866 is reproduced. I make
    API.create_volume to call _cast_create_volume in cinder/volume/api.py,
    it Prevent from bug #1008866 is reverted.
    
    Change-Id: I1bf0b7c5fc47da756bce95128f8fd770d14399b0

 cinder/volume/api.py |   16 +++++-----------
 1 file changed, 5 insertions(+), 11 deletions(-)

commit 848d5dee9666cd7ea92559bb4023281481f09a4b
Author: Hui Cheng <freedomhui@gmail.com>
Date:   Sun Sep 9 13:04:09 2012 +0800

    rename nova.pot => cinder.pot, nova.po => cinder.po
    
    Fixes Bug #1047195
    
    	renamed:    cinder/locale/bs/LC_MESSAGES/nova.po -> cinder/locale/bs/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/nova.pot -> cinder/locale/cinder.pot
    	renamed:    cinder/locale/cs/LC_MESSAGES/nova.po -> cinder/locale/cs/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/da/LC_MESSAGES/nova.po -> cinder/locale/da/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/de/LC_MESSAGES/nova.po -> cinder/locale/de/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/en_AU/LC_MESSAGES/nova.po -> cinder/locale/en_AU/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/en_GB/LC_MESSAGES/nova.po -> cinder/locale/en_GB/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/es/LC_MESSAGES/nova.po -> cinder/locale/es/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/fr/LC_MESSAGES/nova.po -> cinder/locale/fr/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/it/LC_MESSAGES/nova.po -> cinder/locale/it/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/ja/LC_MESSAGES/nova.po -> cinder/locale/ja/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/ko/LC_MESSAGES/nova.po -> cinder/locale/ko/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/pt_BR/LC_MESSAGES/nova.po -> cinder/locale/pt_BR/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/ru/LC_MESSAGES/nova.po -> cinder/locale/ru/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/tl/LC_MESSAGES/nova.po -> cinder/locale/tl/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/tr/LC_MESSAGES/nova.po -> cinder/locale/tr/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/uk/LC_MESSAGES/nova.po -> cinder/locale/uk/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/zh_CN/LC_MESSAGES/nova.po -> cinder/locale/zh_CN/LC_MESSAGES/cinder.po
    	renamed:    cinder/locale/zh_TW/LC_MESSAGES/nova.po -> cinder/locale/zh_TW/LC_MESSAGES/cinder.po
    
    Change-Id: I3a7894ac90793f270fb27444034b197b7c4f2841

 cinder/locale/bs/LC_MESSAGES/cinder.po    | 8201 ++++++++++++++++++++++++++++
 cinder/locale/bs/LC_MESSAGES/nova.po      | 8201 ----------------------------
 cinder/locale/cinder.pot                  | 7463 ++++++++++++++++++++++++++
 cinder/locale/cs/LC_MESSAGES/cinder.po    | 8251 ++++++++++++++++++++++++++++
 cinder/locale/cs/LC_MESSAGES/nova.po      | 8251 ----------------------------
 cinder/locale/da/LC_MESSAGES/cinder.po    | 8203 ++++++++++++++++++++++++++++
 cinder/locale/da/LC_MESSAGES/nova.po      | 8203 ----------------------------
 cinder/locale/de/LC_MESSAGES/cinder.po    | 8208 ++++++++++++++++++++++++++++
 cinder/locale/de/LC_MESSAGES/nova.po      | 8208 ----------------------------
 cinder/locale/en_AU/LC_MESSAGES/cinder.po | 8209 ++++++++++++++++++++++++++++
 cinder/locale/en_AU/LC_MESSAGES/nova.po   | 8209 ----------------------------
 cinder/locale/en_GB/LC_MESSAGES/cinder.po | 8209 ++++++++++++++++++++++++++++
 cinder/locale/en_GB/LC_MESSAGES/nova.po   | 8209 ----------------------------
 cinder/locale/es/LC_MESSAGES/cinder.po    | 8220 ++++++++++++++++++++++++++++
 cinder/locale/es/LC_MESSAGES/nova.po      | 8220 ----------------------------
 cinder/locale/fr/LC_MESSAGES/cinder.po    | 8251 ++++++++++++++++++++++++++++
 cinder/locale/fr/LC_MESSAGES/nova.po      | 8251 ----------------------------
 cinder/locale/it/LC_MESSAGES/cinder.po    | 8210 ++++++++++++++++++++++++++++
 cinder/locale/it/LC_MESSAGES/nova.po      | 8210 ----------------------------
 cinder/locale/ja/LC_MESSAGES/cinder.po    | 8196 ++++++++++++++++++++++++++++
 cinder/locale/ja/LC_MESSAGES/nova.po      | 8196 ----------------------------
 cinder/locale/ko/LC_MESSAGES/cinder.po    | 8207 ++++++++++++++++++++++++++++
 cinder/locale/ko/LC_MESSAGES/nova.po      | 8207 ----------------------------
 cinder/locale/nova.pot                    | 7463 --------------------------
 cinder/locale/pt_BR/LC_MESSAGES/cinder.po | 8208 ++++++++++++++++++++++++++++
 cinder/locale/pt_BR/LC_MESSAGES/nova.po   | 8208 ----------------------------
 cinder/locale/ru/LC_MESSAGES/cinder.po    | 8304 +++++++++++++++++++++++++++++
 cinder/locale/ru/LC_MESSAGES/nova.po      | 8304 -----------------------------
 cinder/locale/tl/LC_MESSAGES/cinder.po    | 8200 ++++++++++++++++++++++++++++
 cinder/locale/tl/LC_MESSAGES/nova.po      | 8200 ----------------------------
 cinder/locale/tr/LC_MESSAGES/cinder.po    | 8202 ++++++++++++++++++++++++++++
 cinder/locale/tr/LC_MESSAGES/nova.po      | 8202 ----------------------------
 cinder/locale/uk/LC_MESSAGES/cinder.po    | 8199 ++++++++++++++++++++++++++++
 cinder/locale/uk/LC_MESSAGES/nova.po      | 8199 ----------------------------
 cinder/locale/zh_CN/LC_MESSAGES/cinder.po | 8064 ++++++++++++++++++++++++++++
 cinder/locale/zh_CN/LC_MESSAGES/nova.po   | 8064 ----------------------------
 cinder/locale/zh_TW/LC_MESSAGES/cinder.po | 8207 ++++++++++++++++++++++++++++
 cinder/locale/zh_TW/LC_MESSAGES/nova.po   | 8207 ----------------------------
 38 files changed, 155212 insertions(+), 155212 deletions(-)

commit 1b3322d45fe2c5ed72cc7f8674e5e319928065ad
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Sep 5 19:27:48 2012 +0000

    Don't zero out snapshot volume on snapshot_delete
    
     When trying to zero out an LVM snapshot on precise the kernel sometimes
     hangs when performing the dd.  Also the dd process itself can take
     an extremely long time even when it does succesfully complete.
     This can be up to 30 minutes for a 1 Gig volume/snapshot.
    
     I believe this is a kernel specific issue with LVM snapshots.  The
     zeroing process is unreliable and can cause kernel hangs to let's remove it.
    
     In order to protect against data leakage we'll implement the zeroing process
     on volume creation.  This doesn't seem to have a significant impact and doesn't
     suffer from the same isues tha zeroing out an LVM snapshot does.
    
     No reason to continue zero on delete, the zero on creation should
     probably be sufficient.
    
     Doesn't seem to cause any timing issues but need to keep this in mind.
    
     Fixes bug 1023755
    
    Change-Id: I56209d8e5973cffa997b4ec3e51c3361838386de

 cinder/tests/test_volume.py |    6 +++---
 cinder/volume/driver.py     |   22 +++++++++++++---------
 2 files changed, 16 insertions(+), 12 deletions(-)

commit 60608360e0e052492a4352df015c177e6483bec0
Author: John Griffith <john.griffith@solidfire.com>
Date:   Sat Sep 8 10:40:55 2012 -0600

    Recent changes to SolidFire API changed iqn format
    
     The SF API initially didn't supply the in prefix so we
     formed it manually in the OpenStack driver.
    
     This has been fixed in the API so we dropped the manual
     build of the prefix in volume create.  Unfortunatly missed
     the same case needed in create-from-snapshot.
    
     Going forward we're adding running integration tests against
     SF to catch this sort of thing.
    
    Change-Id: I7107537d586f0a7c457dcbabfc90e1bc081d28d2

 cinder/volume/solidfire.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 43bc69336b10e357c4b8a8d802bfaf9e4a29157a
Merge: e96c3ea d9b8a51
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 18:03:06 2012 +0000

    Merge "avoid the buffer cache when copying volumes"

commit e96c3ea9d408f1826b8fdd532511b07a5eb2e463
Merge: 6eedab9 922fdd0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 17:15:00 2012 +0000

    Merge "Update dev docs   * Quick pass at implementing the basics for cinder dev docs   * Remove the N/A compute related stuff   * Clean up the architecture a bit to only show cinder related   * Remove various modules form TOC's that aren't applicable"

commit 6eedab91fe1c298527dbbcbc5eaf20d6ab2ab972
Merge: 9885eb1 aef9f4a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 15:53:08 2012 +0000

    Merge "Filter volumes and snapshots by query string"

commit 9885eb1d2f6edcaa2f9ab334a7809c4dcb403694
Merge: 92e3b84 21f4153
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 15:40:37 2012 +0000

    Merge "Rename test_nova_rootwrap.py to test_cinder_rootwrap.py"

commit 92e3b84bf11e3ee8c6e8bedb29858ebac311e079
Merge: 0c78f59 2d211b6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 15:08:12 2012 +0000

    Merge "Update SolidFire driver to reflect IQN changes"

commit 0c78f59907a18700292b8bd03667bf7711b201a9
Merge: 178e483 f926eb6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 14:47:30 2012 +0000

    Merge "Remove vpn_ping function in cinder/utils.py"

commit 178e48339bb824d8a741dcdca95e7062b94dc7cd
Merge: 0a67894 a17fc22
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 14:46:54 2012 +0000

    Merge "Clean up some codes about compute in VolumeTestCase"

commit 0a6789462e3bcebe49ffb30f450659d0de255c8d
Merge: fb78951 3e9b64c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 14:46:35 2012 +0000

    Merge "Typo nova => cinder"

commit fb789516b0699a98afde017d3206a471c542885c
Merge: e5a2cd8 aba4dcb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 14:46:12 2012 +0000

    Merge "Remove unused db api"

commit 2c7c9765377dd18325884e4f1676358807581aad
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Sep 7 11:29:00 2012 +0100

    Remove unused utils.wrap_exception
    
    Moved into utils by commit 6ad36074, but it hasn't been used in cinder
    since commit 9e4242c3 which prepared for switching to common rpc.
    
    Change-Id: I9dff70e81c0bae36f26df893ac6971e17ba46bb3

 cinder/tests/test_exception.py |   36 ---------------------
 cinder/utils.py                |   68 ----------------------------------------
 2 files changed, 104 deletions(-)

commit e2553117e1a772e0697fdf9fa224359a65d718a2
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 5 12:15:41 2012 +0100

    Sync notifier changes from openstack-common
    
    Syncs the following from stable/folsom:
    
     c767e9b Add multiple-driver support to the notifier api.
    
    Also remove notification_driver from cinder.flags. This should
    have been done when first adopting this code from openstack-common
    since the option is defined there now.
    
    Note: I've left the cinder-specific change to use cinder's context
    rather than openstack-common's context.
    
    Change-Id: I6ff4b5d45ca9cc4acaf37c62c143f2886ebee423

 cinder/flags.py                                   |    6 +-
 cinder/openstack/common/log.py                    |    7 +-
 cinder/openstack/common/notifier/api.py           |   60 +++++++++--
 cinder/openstack/common/notifier/list_notifier.py |  118 ---------------------
 cinder/tests/test_volume.py                       |    7 +-
 cinder/tests/test_volume_utils.py                 |   11 +-
 6 files changed, 67 insertions(+), 142 deletions(-)

commit a17fc22b4d26b351a11aa5f3d4a2688cf46f007b
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Fri Sep 7 14:47:51 2012 +0800

    Clean up some codes about compute in VolumeTestCase
    
    self.compute have not be assigned in VolumeTestCase, so clean up some
    codes about it.
    
    Change-Id: Ie2577065ad27b4ee5b54dec65adfe723bf93985f

 cinder/tests/test_volume.py |   17 ++---------------
 1 file changed, 2 insertions(+), 15 deletions(-)

commit aba4dcbf9d8bcb2cc65109960e1e53169db8ff69
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Fri Sep 7 14:40:45 2012 +0800

    Remove unused db api
    
    service_get_all_compute_by_host and service_get_all_compute_sorted are
    not be used by cinder.
    
    Change-Id: Ie384d2666bbfea1d5fab74e4e3e021909f6c0e3f

 cinder/db/api.py |   14 --------------
 1 file changed, 14 deletions(-)

commit e5a2cd89761b041883433829fe9a751c15eab229
Merge: 42cfb8f 590d3e7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 06:36:02 2012 +0000

    Merge "Fixes potential bugs found by pylint"

commit 3e9b64c09ee631b355e8131930f8e9c35c061029
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Fri Sep 7 14:25:27 2012 +0800

    Typo nova => cinder
    
    Change-Id: I715feee8ca84fb65518e750585f82e942e710ecd

 bin/cinder-manage |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f926eb6f7ccca4dacad438382f48cf75f854ab77
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Fri Sep 7 14:13:11 2012 +0800

    Remove vpn_ping function in cinder/utils.py
    
    vpn_ping is not be used by cinder.
    
    Change-Id: I3ea04200360a23259ce3cce54ff88125895e217b

 cinder/utils.py |   48 ------------------------------------------------
 1 file changed, 48 deletions(-)

commit 2d211b66994240b2047d78b3d084d52abeac72a2
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Sep 6 23:50:49 2012 -0600

    Update SolidFire driver to reflect IQN changes
    
     Prior to release the SolidFire device returned only
     a partial iqn string in it's api call.
    
     With the GA release, this was modified to return the entire
     iqn string, so just drop the prefix we were using in beta.
    
    Change-Id: I7fa9d1ec6e2639149375a1115198eee90c527ef1

 cinder/volume/solidfire.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 21f415347a3f26f022427ea9c640396a4a19f4f5
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Fri Sep 7 12:21:40 2012 +0800

    Rename test_nova_rootwrap.py to test_cinder_rootwrap.py
    
    Change-Id: I13554b7afa994ec7c68e86e27568110445d1e4ed

 cinder/tests/test_cinder_rootwrap.py |  129 ++++++++++++++++++++++++++++++++++
 cinder/tests/test_nova_rootwrap.py   |  129 ----------------------------------
 2 files changed, 129 insertions(+), 129 deletions(-)

commit 590d3e7b0f74524093725a2e28150b083a77cf96
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Fri Sep 7 11:16:36 2012 +0800

    Fixes potential bugs found by pylint
    
    Partial fixes bug #1043884
    
    * remove _ec2_volume_get_query and _ec2_snapshot_get_query in
    cinder.db.sqlalchemy.api, because they no longer be used in cinder.
    * import openstack.commmon.utils.timeutils, because notify_usage_exists use it.
    
    Change-Id: I3e989b940b6a99ac7751c940fa766aa13c61607b

 cinder/db/sqlalchemy/api.py |   12 ------------
 cinder/volume/utils.py      |    3 ++-
 2 files changed, 2 insertions(+), 13 deletions(-)

commit 42cfb8fbb29577e1a0ab98ec7d8614c270f241ae
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Sep 6 22:52:35 2012 -0400

    Handle missing 'provider_location' in rm_export.
    
    Updates the remove_export function in the ISCSIDriver so that
    it handles the case where provider_location isn't set on
    a volume. This can occur if a volume is created but not exported.
    
    This was a regression from a previous commit
    (9785963c841aff5ea1c159da81f93c2bf62c70c6) which changed the way iscsi
    targets are created/deleted.
    
    Fixes LP Bug #1046484.
    
    Change-Id: Ie762b092dd2a84fe4f3b72c46c03a97ae67c53b7

 cinder/volume/driver.py |   14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 2cd6a4d68f0faf592b5e2185f792afae27b438d9
Merge: 956fb82 8eb6462
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 23:31:02 2012 +0000

    Merge "Sync cfg changes from openstack-common"

commit 956fb8236a62435a27c380fd42aff0c6dfa33bf0
Merge: 66eb4a1 46060d6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 23:30:11 2012 +0000

    Merge "Sync misc changes from openstack-common"

commit 66eb4a1eb424b8fe27e2ec3bda7205129f0ef6af
Merge: 8235a22 dc89c6f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 23:29:51 2012 +0000

    Merge "Sync zmq changes from openstack-common"

commit 8235a22f1990a5b2e1f1b706dd01eb752ec3d9a4
Merge: 1d92751 6985bf4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 23:28:06 2012 +0000

    Merge "Remove default_schedule_zone."

commit 1d92751ccf024bfb3076c4f381101201f7206b60
Merge: 5c0c720 c86483b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 23:09:43 2012 +0000

    Merge "Remove memcached_servers config option."

commit 5c0c72051fd0a32c51bb68d955169b07d36ec882
Merge: 5edbbd3 7b45807
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 22:49:39 2012 +0000

    Merge "Remove dependencies for netaddr."

commit 5edbbd3f34256d60a3f39f129253680ec01cc159
Merge: d16b820 d6a5d0f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 22:49:07 2012 +0000

    Merge "Fix Typo in LOG.error"

commit d16b820dd51344d5b96b095102fd5d465f69a489
Merge: 01b1a9e 0903603
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 22:47:05 2012 +0000

    Merge "Specify the conf file when creating a volume."

commit 01b1a9e1795ecccccbdc66bf9068ccb4f544d5fe
Merge: 5d72e7a 51a008d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 22:30:57 2012 +0000

    Merge "Fix xml metadata for volumes api in cinder."

commit 0903603971033536751ba40df98a3c39175d3189
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Sep 6 14:50:50 2012 -0400

    Specify the conf file when creating a volume.
    
    Updates the tgt-admin command to actually use the config file
    we create for the volume being created.
    
    This fixes an issue introduced in
    9785963c841aff5ea1c159da81f93c2bf62c70c6 which breaks iscsi
    volume creation.
    
    Fixes LP Bug #1046985.
    
    Change-Id: I06e83c9ba351c2b4846b557a3abb170a51d506c0

 cinder/tests/test_iscsi.py |    2 +-
 cinder/volume/iscsi.py     |    2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

commit d9b8a5189fa9adf4308bf492dcf6537ba2b75311
Author: Pdraig Brady <pbrady@redhat.com>
Date:   Fri Jul 13 18:22:17 2012 +0100

    avoid the buffer cache when copying volumes
    
    The dd process when clearing volumes, was seen to starve
    the system when writing to an iSCSI SAN connected over GigE.
    
    So use O_DIRECT within the dd process so that the system
    buffer cache is not impacted, which is generally the
    best thing to do when streaming large amounts of data.
    
    Also one could drop the I/O priority of the dd process
    by prepending "ionice -c3". That would change the priority
    from "normal" (best effort) to "idle", which means zeroing
    will only proceed when there is no other I/O on the system.
    It was thought best to leave scheduling decisions to the
    system however, rather than specifying them explicitly.
    
    Fixes bug: 937694
    Change-Id: Ic842d7b83209c41d8ff05075990ed12e6f86283a

 cinder/volume/driver.py |   13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit 5d72e7a40e49e6d69e6733b2564dcfc08f398bd1
Merge: 802c05b c191d0d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 6 19:24:57 2012 +0000

    Merge "Add admin actions extension"

commit d6a5d0f9faa43a82104a0ed936382195b89d4107
Author: Chuck Short <zulcss@ubuntu.com>
Date:   Thu Sep 6 09:50:37 2012 -0500

    Fix Typo in LOG.error
    
    Fix typo in LOG.error, it should be
    vol_id rather than volume_id.
    Fixes bug #1046875
    
    Change-Id: Id162c6f185a110b63e8f9f509f5cde75f3626cbf
    Signed-off-by: Chuck Short <zulcss@ubuntu.com>

 cinder/volume/iscsi.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7b458073cefac296f41c11ffacb0f18785f127d8
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Sep 3 22:11:59 2012 -0400

    Remove dependencies for netaddr.
    
    Updates cinder utils.py to remove the parse_server_string and
    is_valid_cidr functions. These functions aren't in use
    and are the only reason we need the netaddr dependency.
    
    Updates pip-requires to drop the netaddr dependency.
    
    Also removes the unit tests for removed functions.
    Change-Id: I521ae60b758324069fb1ffa1701b1f9deb780f65

 cinder/tests/test_utils.py |   23 ------------------
 cinder/utils.py            |   55 --------------------------------------------
 tools/pip-requires         |    1 -
 3 files changed, 79 deletions(-)

commit aef9f4ab05946e2bfef0cdb53071e52425c7f518
Author: Clay Gerrard <clay.gerrard@gmail.com>
Date:   Fri Aug 31 20:16:29 2012 +0000

    Filter volumes and snapshots by query string
    
    Fix query string search_opts filters in api.openstack.volume.volumes and
    snapshots.  Fix get_all methods in volumes.api to adequately handle
    parameter matching.
    
    The current api does not properly apply query string filters by
    display_name, status, or (in the case of snapshots) volume_id.  These
    filters are needed both for the end user and operator to display logical
    grouping of these resources.
    
    Fixes: bug #1046353
    
    Change-Id: Ia12ffe1bf8a27c8a78daa24c4b728b394932a2b0

 cinder/api/openstack/volume/snapshots.py           |    4 +
 cinder/api/openstack/volume/volumes.py             |    4 +-
 .../tests/api/openstack/volume/test_snapshots.py   |   86 ++++++++++++++++++++
 cinder/tests/api/openstack/volume/test_volumes.py  |   61 ++++++++++++++
 cinder/volume/api.py                               |   33 ++++++--
 5 files changed, 177 insertions(+), 11 deletions(-)

commit e756bb932d3275e89ac24713e76464fd18da821b
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Sep 5 13:20:54 2012 -0400

    Remove null_kernel option.
    
    This option was only used in the image/fake.py class. In this patch
    I've updated the fake to use an inline 'nokernel' string instead of
    this option which we don't make use of in the runtime Cinder code.
    
    Change-Id: I05d4f227f1278c827ace2ce3c62319f9b18d04d4

 cinder/flags.py               |    4 ----
 cinder/tests/image/fake.py    |   24 ++++++++++++------------
 etc/cinder/cinder.conf.sample |    6 +-----
 3 files changed, 13 insertions(+), 21 deletions(-)

commit 6985bf48bed99f752d420071d0ac4db0ad81fd1c
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Sep 5 13:17:24 2012 -0400

    Remove default_schedule_zone.
    
    We don't use this config options.
    
    Change-Id: I94a7940dc74341580ab954ffcda1f91fb5433e3f

 cinder/flags.py               |    3 ---
 etc/cinder/cinder.conf.sample |    5 +----
 2 files changed, 1 insertion(+), 7 deletions(-)

commit c86483b596c75003645e2c2052c8a63ae85294b4
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Sep 5 13:15:58 2012 -0400

    Remove memcached_servers config option.
    
    We don't use this in Cinder.
    
    Change-Id: Id8503ff373622a2667fe0575f79e089056677019

 cinder/flags.py               |    3 ---
 etc/cinder/cinder.conf.sample |    5 +----
 2 files changed, 1 insertion(+), 7 deletions(-)

commit 802c05b86a927787d480d16798a62794613695b5
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Sep 5 13:13:08 2012 -0400

    Regenerate cinder.conf.sample.
    
    Create a new version of cinder.conf.sample using
    tools/conf/generate_sample.sh.
    
    Old version had 475 options.
    
    New version has 133 options (more accurate).
    
    Change-Id: Id60aec1d91179a294e1969b7ab1f54051cb7a728

 etc/cinder/cinder.conf.sample | 1012 ++++++++++++++++++-----------------------
 1 file changed, 443 insertions(+), 569 deletions(-)

commit 0094303e36cf1c01db539a1eea7771ebcb4d336a
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Sep 5 12:59:28 2012 -0400

    Sync improvements to config file generator tools.
    
    We made some improvements to the config file generator in
    Nova during Folsom including spacing and formatting changes.
    
    This patch merges these into Cinder so we can make use of
    them to generate a new sample config file.
    
    Change-Id: I1e1166ac6e2a28cc179223e5af547995f58b36e6

 tools/conf/create_conf.py     |  159 ----------------------------------
 tools/conf/extract_opts.py    |  188 +++++++++++++++++++++++++++++++++++++++++
 tools/conf/generate_sample.sh |   11 ++-
 3 files changed, 193 insertions(+), 165 deletions(-)

commit b7745f5e8d871b6ce4a140eb9705b6ec39754159
Merge: 700583d 8c30edf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 17:19:01 2012 +0000

    Merge "Removed unnecessary call to ensure_export"

commit 46060d64167c1f700a8af5b89744ac0909d53c5a
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 5 12:21:36 2012 +0100

    Sync misc changes from openstack-common
    
    Syncs the following changes from stable/folsom:
    
     769ec65 Don't trap then re-raise ImportError.
     202b8b7 Fix spelling typos
     01b4f31 Support for marshalling datetime while preserving microseconds.
    
    Change-Id: I6ed5e71ed18cdf3c528351713a42645f31fd8965

 cinder/openstack/common/excutils.py    |    4 ++--
 cinder/openstack/common/importutils.py |    2 +-
 cinder/openstack/common/timeutils.py   |   22 ++++++++++++++++++++--
 3 files changed, 23 insertions(+), 5 deletions(-)

commit dc89c6f3d2b0f54fd3056f1ff6c677ba50688b66
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 5 12:19:07 2012 +0100

    Sync zmq changes from openstack-common
    
    Syncs the following from stable/folsom:
    
     9f9e14c Update zmq context cleanup to use term.
     704fb8b Remove register_opts from client methods
     f88d38b Rename FLAGS to CONF; Remove self.conf
    
    Change-Id: Ic6ab732d71420aba032554c51904dd71f1d23b78

 cinder/openstack/common/rpc/impl_zmq.py |   37 +++++++++++++------------------
 1 file changed, 15 insertions(+), 22 deletions(-)

commit 8eb64625e52aa8a6a2046f5ac53e132e1c1ea6de
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 5 12:04:16 2012 +0100

    Sync cfg changes from openstack-common
    
    Syncs the following from stable/folsom:
    
     4dc2043 cfg: clean up None value handling
     513bd3a Allow set_default and set_override to use None
     0a36c92 Tilde expansion for --config-file and --config-dir
     038d597 Add import_opt() method to ConfigOpts
    
    Change-Id: Ifa85280fdc072965f3e9ae8641bdf85268a9a6ac

 cinder/openstack/common/cfg.py |   85 ++++++++++++++++++++++++++++++++--------
 1 file changed, 68 insertions(+), 17 deletions(-)

commit 700583d26220cd3e792c1af33c60b8c1ba3c0769
Merge: 5586119 ffe5036
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 17:59:05 2012 +0000

    Merge "Fix bug where image size is incorrectly rejected."

commit 5586119f4a838b12a46bd12b316c9944efa6691a
Merge: bdba7e3 b84d623
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 17:56:21 2012 +0000

    Merge "Make size optional when creating a volume from a snap"

commit 51a008dfdbb80c158d85beed4e310f94b068d341
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Tue Sep 4 11:08:16 2012 -0400

    Fix xml metadata for volumes api in cinder.
    
    Fixes bug 1040891.
    
    Change-Id: Idf8cc641162617ade2aeb77b666270cf1ce54c54
    Signed-off-by: Matthew Treinish <treinish@linux.vnet.ibm.com>

 cinder/api/openstack/common.py                    |   74 +++++++++++
 cinder/api/openstack/volume/volumes.py            |   53 +++++++-
 cinder/api/openstack/wsgi.py                      |   12 ++
 cinder/tests/api/openstack/volume/test_volumes.py |  136 ++++++++++++++++++++-
 4 files changed, 266 insertions(+), 9 deletions(-)

commit ffe5036fa0e63ccde2d19aa0f425ec43de338dd7
Author: Dermot Tynan <tynan@hp.com>
Date:   Thu Aug 30 17:38:22 2012 +0000

    Fix bug where image size is incorrectly rejected.
    
    Fixes bug 1043952.
    
    Added GB-1 (one byte less than a gig) to the numerator to
    correct round-off errors.
    
    Change-Id: I6d97f3c53ab5a8ff5a0752400fd189f23223958f
    
    Fixed PEP8 complaints.
    
    Change-Id: Iacecddd4e65c80964f4860d6580872d897ec2356

 cinder/tests/test_volume.py |   43 +++++++++++++++++++++++++++++++++++++++++++
 cinder/volume/api.py        |    2 +-
 2 files changed, 44 insertions(+), 1 deletion(-)

commit bdba7e3bbf7cef4417309eb356aea4b805d3c974
Merge: 56405da b60c390
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 03:24:45 2012 +0000

    Merge "Several hacking compliance fixes."

commit b60c3909cec2e96e09c664bf7caca4b7b3b6ba54
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Sep 3 22:17:06 2012 -0400

    Several hacking compliance fixes.
    
    Updates bin/nova-manage and the solidfire driver with several
    hacking compliance fixes.
    
    Makes it so run_tests.sh -p runs clean again.
    
    Change-Id: Iee675cae06acda6a585a77073e773651aab9d5a1

 bin/cinder-manage          |    6 +++---
 cinder/volume/solidfire.py |    2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 56405da849bc76dc97e3e1bcbfda00d3b73a57cd
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Sep 3 22:02:22 2012 -0400

    Remove Cheetah from pip-requires.
    
    We don't use Cheetah so no need to install it w/ pip.
    
    Change-Id: I29ea1b0ec2bf2eaebe4378c15c3cfc0caebabf99

 tools/pip-requires |    1 -
 1 file changed, 1 deletion(-)

commit 922fdd0bdc83f7f2cfecb8846bd667f71e7e42ad
Author: John Griffith <john.griffith@solidfire.com>
Date:   Mon Sep 3 17:16:49 2012 -0600

    Update dev docs
      * Quick pass at implementing the basics for cinder dev docs
      * Remove the N/A compute related stuff
      * Clean up the architecture a bit to only show cinder related
      * Remove various modules form TOC's that aren't applicable
    
    Change-Id: I0089c388524c9def7494658e836f4ed03a61f5b5

 doc/source/devref/aggregates.rst   |   65 -----------
 doc/source/devref/api.rst          |  105 +-----------------
 doc/source/devref/architecture.rst |   39 +++----
 doc/source/devref/auth.rst         |   19 ----
 doc/source/devref/cinder.rst       |  215 ++++++++++++++++++++++++++++++++++++
 doc/source/devref/cloudpipe.rst    |  166 ----------------------------
 doc/source/devref/database.rst     |    2 +-
 doc/source/devref/glance.rst       |   28 -----
 doc/source/devref/index.rst        |    4 -
 doc/source/devref/interfaces       |   17 ---
 doc/source/devref/multinic.rst     |   39 -------
 doc/source/devref/network.rst      |  128 ---------------------
 doc/source/devref/nova.rst         |  215 ------------------------------------
 doc/source/devref/scheduler.rst    |   12 +-
 doc/source/devref/volume.rst       |    8 +-
 doc/source/index.rst               |   29 ++++-
 16 files changed, 268 insertions(+), 823 deletions(-)

commit bedc8b6622bc711acc86e7ef245be478c1e4a2b4
Author: RongzeZhu <zrzhit@gmail.com>
Date:   Mon Sep 3 12:26:35 2012 +0800

    Typo fix: nova => cinder
    
    Change-Id: I816473b3aa7de16bd2d8569c695c6ced9e1d9033

 cinder/volume/xiv.py                 |    2 +-
 etc/cinder/rootwrap.d/volume.filters |   22 +++++++++++-----------
 2 files changed, 12 insertions(+), 12 deletions(-)

commit c58e87cfe19adbd432b23cfea00ce72e8636403b
Author: Ben Swartzlander <bswartz@netapp.com>
Date:   Wed Aug 29 20:35:33 2012 -0400

    Move newly created NFS exceptions to standard location in exception.py
    Addresses bug 1037619
    
    bug 1037619
    
    Change-Id: I20b1c612c03ef90eeb074814b979a9bc7492109c

 cinder/exception.py      |   12 ++++++++++++
 cinder/tests/test_nfs.py |    9 +++++----
 cinder/volume/nfs.py     |   23 +++++------------------
 3 files changed, 22 insertions(+), 22 deletions(-)

commit 99e8882f5ff777ce19ea25b923416bbb4511dd63
Merge: fe70a0e 91311d5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 1 00:57:54 2012 +0000

    Merge "Remove unused flags"

commit c191d0d10c6cb5730a4fb6540198ca3be6595b02
Author: Clay Gerrard <clay.gerrard@gmail.com>
Date:   Mon Aug 27 07:48:32 2012 +0000

    Add admin actions extension
    
    The optional os-admin-actions extension adds new wsgi_actions to the
    volumes/action resource and a new snapshots/action endpoint.
    
    With this extension both controllers will support an os-reset_status
    action to force a database update of a volume or snapshot that is stuck
    in a failed/incorrect status.  The os-reset_status action works
    similarly to the compute api's os-reset_state action for instances.
    
    The os-force_delete action behaves similarly to the "cinder-manage
    volume delete" command and allows operators/admins to retry the delete
    operation after it has gone into an error_deleting status with an admin
    api call.
    
    The os-admin-actions extension is enabled by default, but limited to the
    admin api by the default policy.json rules.  Individual admin actions
    can be disabled with policy rules as well.
    
    Example of os-reset_status action on a volume:
    
    curl http://localhost:8776/v1/${PROJECT_ID}/volumes/${VOLUME_ID}/action \
        -H 'x-auth-token: ${ADMIN_AUTH_TOKEN}' \
        -H 'content-type: application/json' \
        -d '{"os-reset_status": {"status": "error"}}'
    
    The new admin only api can assist deployers who encounter bugs or
    operational issues that result in failed actions.
    
    It can also be used by future storage backends to support async callback
    style status updates from long running actions or operations which have
    encountered an error will be retried.
    
    Also updates the api.openstack.wsgi.ControllerMetaclass to support
    sub-classing wsgi.Controllers that define wsgi_actions.
    
    Partial fix for bug #1039706
    
    Change-Id: I29f4b892a99108b6c24eebc3eb58033a9e01e679

 cinder/api/openstack/extensions.py                 |    5 +-
 cinder/api/openstack/volume/__init__.py            |    5 +-
 .../api/openstack/volume/contrib/admin_actions.py  |  129 ++++++++++++++
 cinder/api/openstack/volume/snapshots.py           |    7 +-
 cinder/api/openstack/wsgi.py                       |    3 +
 .../openstack/volume/contrib/test_admin_actions.py |  176 ++++++++++++++++++++
 cinder/tests/api/openstack/volume/test_router.py   |    8 +-
 cinder/tests/policy.json                           |    5 +
 cinder/tests/test_volume.py                        |   47 +++++-
 cinder/volume/api.py                               |    4 +-
 etc/cinder/policy.json                             |    5 +-
 11 files changed, 377 insertions(+), 17 deletions(-)

commit fe70a0ebc47843a08d085e7ab4104898c069f427
Merge: 48ce2b7 5da61a7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 31 16:41:24 2012 +0000

    Merge "Use event.listen() instead of deprecated listeners kwarg"

commit 48ce2b79a1d393de14c825e5722b5a7710eb36aa
Merge: f5f1824 a3af3f8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 31 16:12:07 2012 +0000

    Merge "Implement volume quota support in Cinder"

commit f5f1824a4ba9a3e5fa29d955961b988168b22207
Merge: aab103b 9785963
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 31 15:23:45 2012 +0000

    Merge "Fix creation of iscsi targets"

commit aab103bd25db6444a94a834224da662080f3105f
Merge: 7f4cc61 560b650
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 31 15:22:33 2012 +0000

    Merge "Add cinder- prefix to all binaries."

commit 7f4cc61ceb026505654098bd630ea63a12001587
Merge: cabb54c 4aebd52
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 31 15:06:31 2012 +0000

    Merge "Make glance image service check base exception classes"

commit 8c30edff982042d2533a810709308b586267c0e9
Author: Unmesh Gurjar <unmesh.gurjar@vertex.co.in>
Date:   Fri Aug 31 07:25:39 2012 -0700

    Removed unnecessary call to ensure_export
    
    Removed the extra call to 'ensure_export' from '_copy_image_to_volume' while
    creating a volume from an image.
    
    Fixes LP: #1044399
    
    Change-Id: I189a4cb66b965367289c2f677147ee085e431190

 cinder/volume/manager.py |    1 -
 1 file changed, 1 deletion(-)

commit 560b650fa83ff3ce274a705c321fb940c7499a75
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Aug 31 09:56:50 2012 -0400

    Add cinder- prefix to all binaries.
    
    Renames clear_rabbit_queues and volume-usuage-audit binaries
    so that they are prefixed with 'cinder-'.
    
    As part of this change the clear_rabbit_queues binary was changed
    to use dashes instead of underscores for consistency with the rest
    of the cinder binaries.
    
    Fixes LP Bug #1044386.
    
    Change-Id: I7692a543cc67af2d342a64b84626de38c0a64f81

 bin/cinder-clear-rabbit-queues |   77 +++++++++++++++++++++++++++++++++++
 bin/cinder-volume-usage-audit  |   87 ++++++++++++++++++++++++++++++++++++++++
 bin/clear_rabbit_queues        |   77 -----------------------------------
 bin/volume-usage-audit         |   87 ----------------------------------------
 setup.py                       |    8 ++--
 5 files changed, 168 insertions(+), 168 deletions(-)

commit b84d6237729efb9241d934e2d06d77bf9adb8471
Author: Duncan Thomas <duncan.thomas@gmail.com>
Date:   Fri Aug 17 10:15:52 2012 +0000

    Make size optional when creating a volume from a snap
    
    Changing the size of a volume when cloning a snapshot doesn't
    make a great deal of sense *and isn't part of the ec2 api).
    
    This patch makes the field optional, defaulting to the same
    size as the snapshot (and therefore the origination volume).
    
    Change-Id: I3fea7fe1c0415d10e549c66a242cf2a336a7204e

 cinder/api/openstack/volume/volumes.py |   10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 9785963c841aff5ea1c159da81f93c2bf62c70c6
Author: Chuck Short <zulcss@ubuntu.com>
Date:   Tue Aug 28 15:06:25 2012 -0500

    Fix creation of iscsi targets
    
    Previously when creating iscsi volumes, we were using
    
    tgt-admin -e -c <config file> --update volume-id
    
    Unfortunately the side affect of this is that tgt-admin
    removed other volumes that weren't connected to an iscsi
    connector. Which is obvlously not what we want.
    
    In order to fix this we create the targets.conf for the
    volume but we call tgt-admin --update icssi qualified name.
    
    We're dropping the use of iscsi_targets table when using TgtAdm.
    Compatability for other target admin types is maintained.
    
    Fixes LP: #1038062
    
    Change-Id: I9060a43208df5b79e9b17dadcab8bc0a8eeef55e
    Signed-off-by: Chuck Short <zulcss@ubuntu.com>

 cinder/exception.py         |   15 ++++--
 cinder/tests/test_iscsi.py  |   23 ++++----
 cinder/tests/test_volume.py |   67 ++++-------------------
 cinder/volume/driver.py     |  123 ++++++++++++++++++++++++++++++-------------
 cinder/volume/iscsi.py      |  122 ++++++++++++++++++++++++++----------------
 5 files changed, 199 insertions(+), 151 deletions(-)

commit cabb54c5806022e696697e7c1fa6c81b482d2b20
Author: Joe Gordon <jogo@cloudscaling.com>
Date:   Thu Aug 30 13:35:07 2012 -0700

    Spelling: Persistant=>Persistent
    
    Change-Id: Id8e1bef634fe66e06624b5b3bcd82f59735d76e3

 cinder/volume/manager.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3af3f87f5ca95e9b400dc15e7593746d01bc43a
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Aug 16 15:52:52 2012 -0600

    Implement volume quota support in Cinder
    
    parital fix for bug 1023311
      * To use needs cinderclient https://review.openstack.org/#/c/11509/
      * Updates quota classes with changes in Nova
      * Adds needed quota related DB tables
      * Updates test_quota to reflect changes in Nova
      * Adds absolute limits and empty rate limit functions
      * Updates test/integration/test_volume to make it work w/ above changes
    
    Change-Id: I221c7a9dc51a2bb9bf7228c056f63ba9546cf5f9

 cinder/api/openstack/volume/__init__.py            |    5 +
 .../api/openstack/volume/contrib/quota_classes.py  |  105 ++
 cinder/api/openstack/volume/contrib/quotas.py      |  125 ++
 cinder/api/openstack/volume/limits.py              |  482 ++++++
 .../api/openstack/volume/schemas/v1.1/limits.rng   |   28 +
 cinder/api/openstack/volume/views/limits.py        |  100 ++
 cinder/api/openstack/wsgi.py                       |   60 +-
 cinder/db/api.py                                   |    6 +-
 cinder/db/sqlalchemy/api.py                        |  519 ++++++-
 .../migrate_repo/versions/002_quota_class.py       |  140 ++
 cinder/db/sqlalchemy/models.py                     |   37 +-
 cinder/exception.py                                |   37 +
 cinder/quota.py                                    |  911 +++++++++---
 cinder/tests/api/openstack/fakes.py                |    1 +
 cinder/tests/api/openstack/volume/test_limits.py   |  896 ++++++++++++
 cinder/tests/integrated/test_volumes.py            |    2 +-
 cinder/tests/test_quota.py                         | 1527 +++++++++++++++++---
 cinder/tests/test_volume.py                        |   43 +-
 cinder/volume/api.py                               |   44 +-
 etc/cinder/policy.json                             |    8 +-
 20 files changed, 4617 insertions(+), 459 deletions(-)

commit a55430ce286b291e5a5611b1e908b325ab3de20d
Merge: 6db3732 3ed4d0b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 17:02:44 2012 +0000

    Merge "Fix PEP8 issues."

commit 6db37323239a4fa455c0708a15f082af5c68d096
Merge: cc25287 5475deb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 17:01:50 2012 +0000

    Merge "Add 'detaching' to volume status"

commit cc252878f2c778cb63d383479b9dce63ca2d98c7
Merge: c13d0d2 198a91a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 17:01:28 2012 +0000

    Merge "Remove unused return values and commented out code from NFS driver"

commit c13d0d2d19549cdd3f26eae43e6dca026fa55f7d
Merge: 4533e5b 938d92e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 15:43:42 2012 +0000

    Merge "Remove unused exceptions from cinder/exception.py"

commit 198a91a5e447915beca9585546cb92ab956fb0e6
Author: Ben Swartzlander <bswartz@netapp.com>
Date:   Wed Aug 29 19:10:11 2012 -0400

    Remove unused return values and commented out code from NFS driver
    
    bug 1037622
    
    Change-Id: Idea3005ad94fd6bfc76fd0f3969ee78e3031767e

 cinder/volume/nfs.py |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 91311d5c2c89aca666bb40dc04d917eea9266ed1
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Wed Aug 29 09:46:32 2012 +0000

    Remove unused flags
    
    * region_list
    * aws_access_key_id
    * aws_secret_access_key
    * osapi_scheme
    * osapi_path
    * metadata_host
    * metadata_port
    * default_project
    * default_image
    * default_instance_type
    * vpn_image_id
    * vpn_key_suffix
    * auth_token_ttl
    * bandwith_poll_interval
    * start_guests_on_host_boot
    * resume_guests_state_on_host_boot
    * default_ephemeral_format
    * use_ipv6
    * allow_resize_to_same_host
    * zombie_instance_updated_at_window
    * isolated_images
    * isolated_hosts
    
    Change-Id: Ia3d5ac7d7c983845b5411e2fc1f49eb579e3280f

 cinder/flags.py               |   70 -----------------------------------------
 etc/cinder/cinder.conf.sample |   44 --------------------------
 2 files changed, 114 deletions(-)

commit 3ed4d0b62838d53fedea5280523fdaaec76381bb
Author: lrqrun <lrqrun@gmail.com>
Date:   Tue Aug 28 23:28:48 2012 +0800

    Fix PEP8 issues.
    
    Fix some pep8 issues in doc/ext/cinder_todo.py make the code looks pretty.
    
    Change-Id: I137c8bf5af30eb54a44cbff7f1fbc35bc2c3ed9e

 doc/ext/cinder_todo.py |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 4533e5b4509643768c070f6b5a672f1d6a62e27b
Merge: eb9a58d ca25ea4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 27 16:04:14 2012 +0000

    Merge "Migrate volume related quota info in db migration"

commit eb9a58d3eaa10a8a661baf0c1ed534aeb0877dcf
Merge: 56b2e78 f80f8df
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 25 17:57:27 2012 +0000

    Merge "Fix PEP8 issues."

commit 56b2e78a12bb3c61a64ea24420e1a94aa7fd4dea
Merge: 5b34c99 8b92df9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 25 17:49:37 2012 +0000

    Merge "Typo fix in cinder: existant => existent"

commit 5b34c99c734a5749ef03879745226dc5831f6642
Merge: 53de0dd 3034247
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 25 17:49:02 2012 +0000

    Merge "Fix incorrect tgt-admin call in create_iscsi_target"

commit 3034247a4ec7c9c6e433cad6d13183b001fe2e6d
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Aug 23 13:23:04 2012 -0600

    Fix incorrect tgt-admin call in create_iscsi_target
    
      * Fixes bug 1039826
      * Missed one of the execute cmds that was using 'val %s' as args
    
    Change-Id: I5e6af737ada1c2bcf7a495710e2b10c8c74bb534

 cinder/volume/iscsi.py |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 5475debcf706e87b1df926d489b72074662614f3
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Tue Aug 21 15:07:02 2012 +0000

    Add 'detaching' to volume status
    
    Fixes bug #1004382
    
    When attach a volume , the volume status is "available -> attaching ->
    in-use", But when detaching a volume , the volume status is "in-use ->
    available". So We need 'detaching' volume status, it make the change of
    state of the volume more clearly.
    
    Change-Id: Idf8c38413135bf8e8cd025f11937f8c7250557c1

 .../api/openstack/volume/contrib/volume_actions.py |   16 ++++++++++++++++
 cinder/tests/policy.json                           |    2 ++
 cinder/tests/test_volume.py                        |   11 +++++++++++
 cinder/volume/api.py                               |    9 +++++++++
 4 files changed, 38 insertions(+)

commit 8b92df9febce5bc45fa57bb347779b9644a38c44
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Thu Aug 23 03:00:08 2012 +0000

    Typo fix in cinder: existant => existent
    
    Impact:
    * locale message in cinder/locale/*/LC_MESSAGES/nova.po
    * locale message in cinder/locale/nova.po
    * Test function names
    * Test strings and comments
    
    Change-Id: I623af176d3b556a1ea9f8bde2c609fc4f752d7da

 cinder/locale/bs/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/cs/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/da/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/de/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/en_AU/LC_MESSAGES/nova.po |    2 +-
 cinder/locale/en_GB/LC_MESSAGES/nova.po |    2 +-
 cinder/locale/es/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/fr/LC_MESSAGES/nova.po    |    4 ++--
 cinder/locale/it/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/ja/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/ko/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/nova.pot                  |    2 +-
 cinder/locale/pt_BR/LC_MESSAGES/nova.po |    2 +-
 cinder/locale/ru/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/tl/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/tr/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/uk/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/zh_CN/LC_MESSAGES/nova.po |    2 +-
 cinder/locale/zh_TW/LC_MESSAGES/nova.po |    2 +-
 cinder/tests/test_nova_rootwrap.py      |    4 ++--
 cinder/tests/test_volume_types.py       |    2 +-
 cinder/tests/test_wsgi.py               |    2 +-
 22 files changed, 24 insertions(+), 24 deletions(-)

commit 4aebd529f979ed51f46c27b20ed5fe34e48757f7
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Aug 22 16:26:15 2012 -0600

    Make glance image service check base exception classes
    
    Fixes bug 1039675
    
    glanceclient can raise HTTPNotFound (as well as NotFound) it appears,
    but glance image service is only converting NotFound ->
    InstanceNotFound.  Same applies to 'Forbidden' and other exceptions.
    
    This patch converts 'exc_type is NotFound'-like checks to use
    'isinstance' instead, which will cover HTTPNotFound, etc.
    
    Also add missing glance/image tests that weren't in Cinder
    
    Change-Id: I8787598daccf401a26d9397946ecd55f89ff62b3

 cinder/image/glance.py            |   24 +-
 cinder/tests/glance/__init__.py   |   20 ++
 cinder/tests/glance/stubs.py      |  112 ++++++++
 cinder/tests/image/test_glance.py |  546 +++++++++++++++++++++++++++++++++++++
 4 files changed, 690 insertions(+), 12 deletions(-)

commit f80f8dfecb280673e9661447a9555bac0959e827
Author: Ray Chen <oldsharp@163.com>
Date:   Wed Aug 22 11:57:42 2012 +0800

    Fix PEP8 issues.
    
    Fix some pep8 issues in doc/ext/cinder_todo.py and
    doc/source/conf.py and make the code looks pretty.
    
    Change-Id: Ie164bc7328507e20b0ab5993ba97eaadbd74bf63

 doc/ext/cinder_todo.py |   15 +++++++------
 doc/source/conf.py     |   56 +++++++++++++++++++++++++++++-------------------
 2 files changed, 42 insertions(+), 29 deletions(-)

commit 938d92e8a9a2ee97fb7951ed232b58d614a27adf
Author: RongzeZhu <zrzhit@gmail.com>
Date:   Wed Aug 22 11:37:26 2012 +0800

    Remove unused exceptions from cinder/exception.py
    
    find cinder/ -type f -name "*pyc" -exec rm {} \;
    exceptions=`cat cinder/exception.py| grep -E '^class' |\
     awk {'print $2'} | awk -F '(' {'print $1'}`
    for exc in $exceptions
    do
        i=`find cinder/ -type f -exec grep -R $exc {} \; |wc -l`
        if [ $i -eq 1 ]
        then
            echo $exc
        fi
    done
    
    First removed exceptions:
    
    DecryptionFailure
    ImagePaginationFailed
    VirtualInterfaceCreateException
    VirtualInterfaceMacAddressException
    MelangeConnectionFailed
    VolumeUnattached
    InvalidKeypair
    InvalidSignature
    InvalidInstanceType
    InvalidIpProtocol
    InvalidCidr
    InvalidAggregateAction
    InvalidGroup
    InstanceInvalidState
    InstanceNotRunning
    InstanceNotSuspended
    InstanceNotInRescueMode
    InstanceSuspendFailure
    InstanceResumeFailure
    InstanceRebootFailure
    InstanceTerminationFailure
    VolumeServiceUnavailable
    UnableToMigrateToSelf
    DestinationHostUnavailable
    SourceHostUnavailable
    InvalidHypervisorType
    DestinationHypervisorTooOld
    DestinationDiskExists
    InvalidDevicePath
    DeviceIsBusy
    InvalidCPUInfo
    InvalidIpAddressError
    InvalidVLANTag
    InvalidVLANPortGroup
    InvalidDiskFormat
    InstanceUnacceptable
    FlagNotSet
    NoVolumeTypesFound
    VolumeDriverNotFound
    ListingImageRefsNotSupported
    KernelNotFoundForImage
    ProjectNotFound
    ProjectMembershipNotFound
    UserRoleNotFound
    StorageRepositoryNotFound
    DatastoreNotFound
    FixedIpNotFoundForAddress
    FixedIpNotFoundForInstance
    FixedIpNotFoundForNetworkHost
    FixedIpNotFoundForSpecificInstance
    FixedIpNotFoundForHost
    FixedIpAlreadyInUse
    FixedIpInvalid
    NoMoreFixedIps
    NoFixedIpsDefined
    FloatingIpDNSExists
    FloatingIpNotFoundForAddress
    FloatingIpNotFoundForHost
    NoMoreFloatingIps
    FloatingIpAssociated
    FloatingIpNotAssociated
    NoFloatingIpsDefined
    NoFloatingIpInterface
    KeypairNotFound
    CertificateNotFound
    AuthTokenNotFound
    AccessKeyNotFound
    SecurityGroupNotFoundForProject
    SecurityGroupNotFoundForRule
    SecurityGroupExistsForInstance
    SecurityGroupNotExistsForInstance
    NoInstanceTypesFound
    InstanceTypeNotFoundByName
    FlavorNotFound
    CellNotFound
    SchedulerHostFilterNotFound
    SchedulerCostFunctionNotFound
    SchedulerWeightFlagNotFound
    InstanceMetadataNotFound
    InstanceTypeExtraSpecsNotFound
    LDAPUserNotFound
    LDAPGroupNotFound
    LDAPGroupMembershipNotFound
    NoFilesFound
    SwitchNotFoundForNetworkAdapter
    NetworkAdapterNotFound
    GlobalRoleNotAllowed
    ImageRotationNotAllowed
    RotationRequiredForBackup
    LDAPUserExists
    LDAPGroupExists
    LDAPMembershipExists
    ProjectExists
    InstanceExists
    InstanceTypeExists
    InvalidSharedStorage
    CannotResizeToSameSize
    ImageTooLarge
    ZoneRequestError
    InstanceTypeMemoryTooSmall
    InstanceTypeDiskTooSmall
    InsufficientFreeMemory
    CouldNotFetchMetrics
    AggregateError
    AggregateNotFound
    AggregateNameExists
    AggregateHostNotFound
    AggregateMetadataNotFound
    AggregateHostConflict
    AggregateHostExists
    InstanceTypeCreateFailed
    SolidFireAPIStatusException
    DuplicateVlan
    InvalidInstanceIDMalformed
    CouldNotFetchImage
    
    Search again, Second removed exceptions:
    
    UserNotFound
    FixedIpNotFoundForNetwork
    FloatingIpNotFound
    SecurityGroupNotFound
    InstanceTypeNotFound
    LDAPObjectNotFound
    UserExists
    
    Search again, Third removed exceptions:
    
    FixedIpNotFound
    
    Change-Id: I028122c6132340b2fef2c144da787b7c4efddccf

 cinder/exception.py |  517 ---------------------------------------------------
 1 file changed, 517 deletions(-)

commit 53de0dd77ead04422e05a6251cb92c46d787aae6
Author: Clark Boylan <clark.boylan@gmail.com>
Date:   Tue Aug 21 14:08:57 2012 -0700

    Add nosehtmloutput as a test dependency.
    
    Adding nosehtmloutput as a test dependency allows nose to output its
    results to an html file. This will be used by Jenkins to save logs
    on a different server.
    
    Change-Id: I03f61fe4a8f0daa4a43fc9e7d41456b65018cf66

 tools/test-requires |    1 +
 1 file changed, 1 insertion(+)

commit ca25ea47782be90f65e9e5311de295499de19f2b
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Aug 21 14:00:18 2012 -0600

    Migrate volume related quota info in db migration
    
      * Fixes bug 1039615
      * Now that quotas are back we need to handle migration
        of volume related quota data in the cinder-manage migrate helper
      * Only resource types transferred are volumes and gigabytes
    
    Change-Id: Idd9aab834612e929683491f47fa1e1861bdbd0d1

 bin/cinder-manage |   17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 4e81c907bbb9d94d4b76b00ff591418374175d41
Merge: d2db1e9 bace7fb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 21 00:19:27 2012 +0000

    Merge "Add declare for xiv driver in fake_flags"

commit d2db1e9c40cb13ac513184a6435b2eb581305a46
Merge: d0c6448 e958531
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 20 17:12:40 2012 +0000

    Merge "Remove logging in volume tests"

commit 5da61a7ad9d7c3320831c437c03c428b9df84ebb
Author: unicell <unicell@gmail.com>
Date:   Mon Aug 20 19:34:19 2012 +0800

    Use event.listen() instead of deprecated listeners kwarg
    
    Fixes bug 1031405
    
    The listeners kwarg is deprecated in SQLAlchemy 0.7.0. Since 0.7.3 is
    the minimum required version of SQLAlchemy, use the new event.listen()
    API instead.
    
    Change-Id: I1b851e197c04b131ae96e814780b04e6dcdeeb1a

 cinder/db/sqlalchemy/session.py |   39 +++++++++++++++++----------------------
 1 file changed, 17 insertions(+), 22 deletions(-)

commit bace7fb1b6596c44c500468f689b9b1ef4ad5222
Author: John Griffith <john.griffith@solidfire.com>
Date:   Fri Aug 17 11:27:21 2012 -0600

    Add declare for xiv driver in fake_flags
    
      fixes bug 1038183
    
    Change-Id: I324a8e4df61782c903146cc8e0bb1d1bbae46c2f

 cinder/tests/fake_flags.py |    1 +
 cinder/tests/test_xiv.py   |    3 ++-
 2 files changed, 3 insertions(+), 1 deletion(-)

commit d0c6448cbc1334ee7e3053761d155f8044ecc6fa
Merge: 68aaff4 1753889
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 17 16:34:33 2012 +0000

    Merge "Call driver for attach/detach_volume."

commit 68aaff4c742d7994c0dcbbd5d8ebf966efa3f38d
Merge: e5b3ef5 b192cfe
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 17 15:35:03 2012 +0000

    Merge "Remove unused function"

commit e958531929e04364759a721a689665ef891ff623
Author: RongzeZhu <zrzhit@gmail.com>
Date:   Fri Aug 17 22:24:43 2012 +0800

    Remove logging in volume tests
    
    Fixes bug #932137
    
    Usage of logging seems to be limited to the check_for_export() tests and
    should be to cleanup. check_for_export() raises an exception if there's
    a problem and it does nothing if it succeeds. The tests should just
    check whether an exception was raised.
    
    Change-Id: I72bc3d97aa75950c7f31fae03535c541059501c2

 cinder/tests/test_volume.py |   26 +++-----------------------
 1 file changed, 3 insertions(+), 23 deletions(-)

commit 17538890dc9d005652b2d912cea4a0307e5d6e18
Author: Cory Stone <corystone@gmail.com>
Date:   Fri Aug 17 09:18:52 2012 -0500

    Call driver for attach/detach_volume.
    
    The volume driver may want to know which guest is going to be
    attached to a volume. The manager now calls down into the driver
    on attach_volume and detach_volume.
    
    Fixes bug 1038109.
    
    Change-Id: I084c2d09a1871fa158312f9ba479abb474da1d28

 cinder/volume/driver.py  |    8 ++++++++
 cinder/volume/manager.py |   19 +++++++++++++++++++
 2 files changed, 27 insertions(+)

commit e5b3ef5622fc2662addad17f96a9d903ca68db9b
Author: RongzeZhu <zrzhit@gmail.com>
Date:   Fri Aug 17 11:20:09 2012 +0800

    Fix spelling typos
    
    Fixes for:
    * cinder/locale/*/LC_MESSAGES/nova.po
    * cinder/locale/nova.pot
    * cinder/testing/README.rst
    
    Change-Id: Ib50432a72b2300742169ebe4c77584466be7bfba

 cinder/locale/bs/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/cs/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/da/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/de/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/en_AU/LC_MESSAGES/nova.po |    2 +-
 cinder/locale/en_GB/LC_MESSAGES/nova.po |    2 +-
 cinder/locale/es/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/fr/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/it/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/ja/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/ko/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/nova.pot                  |    2 +-
 cinder/locale/pt_BR/LC_MESSAGES/nova.po |    2 +-
 cinder/locale/ru/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/tl/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/tr/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/uk/LC_MESSAGES/nova.po    |    2 +-
 cinder/locale/zh_CN/LC_MESSAGES/nova.po |    2 +-
 cinder/locale/zh_TW/LC_MESSAGES/nova.po |    2 +-
 cinder/testing/README.rst               |    2 +-
 20 files changed, 20 insertions(+), 20 deletions(-)

commit b192cfebb85b4cb6b5f35df3c21ecfa15fc0aa49
Author: RongzeZhu <zrzhit@gmail.com>
Date:   Fri Aug 17 10:07:05 2012 +0800

    Remove unused function
    
    'wait_creation' function in cinder.volume.api.API is unused.
    
    Change-Id: I4062e026b3e227513321be18ee920a4e5882cbd7

 cinder/volume/api.py |    9 ---------
 1 file changed, 9 deletions(-)

commit d2babbfd4b59bde09fe17f7b69c86d857a82d104
Merge: f276d01 6e5ef61
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 04:58:27 2012 +0000

    Merge "Remove unused imports"

commit f276d01946710154cac900a6cf98f606d0eb7dd6
Merge: d05ef80 11545df
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 04:48:41 2012 +0000

    Merge "Implements bp migrate-nova-volumes-to-cinder"

commit d05ef8007b25fc251e45edbe06884ca425602c0d
Merge: e5910c6 7ea56d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 04:01:24 2012 +0000

    Merge "blueprint zadara-volume-driver"

commit e5910c64916f0b5ba511a730808ce31070565523
Merge: cfc79c7 d807526
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 04:01:23 2012 +0000

    Merge "Add driver for using files on a generic NFS server as virtual block devices Add NetApp-specific NFS virtual block driver"

commit cfc79c784dbe6d24f464a8339493a263eb01b7e0
Merge: bc5c955 df5c4ba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 03:23:24 2012 +0000

    Merge "Update SolidFire volume driver"

commit 7ea56d215453a01ac33934a71f801f2e4a99f4ce
Author: Vladimir Popovski <vladimir@zadarastorage.com>
Date:   Fri Aug 10 00:14:26 2012 -0700

    blueprint zadara-volume-driver
    
    Adds support for Zadara VPSA storage arrays as a BackEnd for Cinder
    
    Change-Id: I8c2a163079853d4003223eb2c156cfd2ccef3129

 cinder/exception.py         |   36 +++
 cinder/tests/test_zadara.py |  577 +++++++++++++++++++++++++++++++++++++++++++
 cinder/volume/zadara.py     |  483 ++++++++++++++++++++++++++++++++++++
 3 files changed, 1096 insertions(+)

commit bc5c955036208a89e53a0f39d8c14ee6c927317b
Merge: a75d75b edc1110
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 01:37:28 2012 +0000

    Merge "add ability to clone images"

commit a75d75b5cf1dab92d6c0e3c7f73e08c0d70bb2b0
Merge: 6ad3607 0b221c9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 01:23:36 2012 +0000

    Merge "Add proper support for deprecation messages"

commit 6ad360741f88c25d97ac9b39844302e79d83e781
Author: Craig Vyvial <cp16net@gmail.com>
Date:   Wed Aug 15 15:50:29 2012 -0500

    Adding the volume notifications to cinder
    
    adding the volume notifications
    added unit tests for notifications
    added context for notify with rabbit
    
    blueprint cinder-notifications
    
    Change-Id: I5aef1e718eebb9a61e0670d524fcd5f438dee016

 bin/volume-usage-audit            |   87 +++++++++++++++++++++++++++++++++++++
 cinder/db/api.py                  |    7 +++
 cinder/db/sqlalchemy/api.py       |   17 ++++++++
 cinder/exception.py               |   48 --------------------
 cinder/tests/test_exception.py    |   13 +++---
 cinder/tests/test_volume.py       |   32 ++++++++++++++
 cinder/tests/test_volume_utils.py |   86 ++++++++++++++++++++++++++++++++++++
 cinder/utils.py                   |   70 +++++++++++++++++++++++++++++
 cinder/volume/manager.py          |   11 +++++
 cinder/volume/utils.py            |   83 +++++++++++++++++++++++++++++++++++
 setup.py                          |    1 +
 11 files changed, 401 insertions(+), 54 deletions(-)

commit edc11101cbc06bdce95b10cfd00a4849f6c01b33
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Tue Aug 14 12:27:48 2012 -0700

    add ability to clone images
    
    Given the backend location from Glance, drivers can determine
    whether they can clone or otherwise efficiently create a volume
    from the image without downloading all the data from Glance.
    
    For now implement cloning for the RBD driver. There's already a
    Glance backend that stores images as RBD snapshots, so they're
    ready to be cloned into volumes. Fall back to copying all the
    data if cloning is not possible.
    
    Change-Id: I71a8172bd22a5bbf64d4c68631630125fcc7fd34
    Implements: blueprint efficient-volumes-from-images
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>

 cinder/tests/test_rbd.py |  161 ++++++++++++++++++++++++++++++++++++++++++++++
 cinder/volume/api.py     |    2 +-
 cinder/volume/driver.py  |   83 ++++++++++++++++++++++++
 cinder/volume/manager.py |   23 +++++--
 4 files changed, 261 insertions(+), 8 deletions(-)

commit df5c4ba864732d6534af561ebe2600d738c07f17
Author: John Griffith <john.griffith@solidfire.com>
Date:   Mon Aug 13 18:35:35 2012 -0600

    Update SolidFire volume driver
    
    Implements blueprint update-solidfire-driver
    
    * Updates driver to reflect changes in the release version of SF API
    * Modify SF naming scheme
    * Implement snapshot functionality
    * Implement setting qos on create via metadata
    * Update/Add tests
    
    Change-Id: I08f7aac31e9d95f971d297a19c285dfa7151b931

 cinder/tests/test_SolidFireSanISCSIDriver.py |  186 -----------
 cinder/tests/test_solidfire.py               |  210 +++++++++++++
 cinder/volume/san.py                         |  243 ---------------
 cinder/volume/solidfire.py                   |  423 ++++++++++++++++++++++++++
 4 files changed, 633 insertions(+), 429 deletions(-)

commit 87ba5de73e82ae1a68a23c3eb245fac68597c3e3
Merge: 12aae1a 171a57a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 15 20:15:21 2012 +0000

    Merge "add get_location method for images"

commit 0b221c998338e33627822d9837441c8f24124f90
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Aug 8 17:49:44 2012 +0200

    Add proper support for deprecation messages
    
    Add support for warning once about deprecated options. Use that in
    the rootwrap options deprecation message, and move it to run_as_root
    so that the deprecated message is emitted once and only if used.
    
    Change-Id: I29e39c662b4456256f4c9397f305bfa857972c46

 cinder/common/deprecated.py     |   55 +++++++++++++++++++++++++++++++++++++++
 cinder/exception.py             |    4 +++
 cinder/tests/test_deprecated.py |   46 ++++++++++++++++++++++++++++++++
 cinder/utils.py                 |   15 ++++++-----
 4 files changed, 114 insertions(+), 6 deletions(-)

commit 12aae1a0728629f9e4e4cc2542756653aab2657b
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Aug 10 23:10:18 2012 -0400

    Remove utils.deprecated functions.
    
    We don't seem to use utils.deprecated at all... so lets
    remove it and save ourselves 200 lines of code.
    
    Also moves a couple misc. test cases in utils.py out of the
    DeprecationTest suite and into the GenericUtilsTestCase
    suite.
    
    Change-Id: I96e93d8fa056110057c8855f2ce52c9f55cd4a9b

 cinder/tests/test_utils.py |  200 ++++++++++----------------------------------
 cinder/utils.py            |  167 ------------------------------------
 2 files changed, 45 insertions(+), 322 deletions(-)

commit 8d48d1a2fd8e03e05b02e187eaafce49a8ff571a
Merge: f7938c0 f5ebb33
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 15 17:40:35 2012 +0000

    Merge "Move volume size validation to api layer."

commit f5ebb33f9a0ebc3b8f6d0e0d97e3d4b673106907
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Aug 15 14:10:03 2012 +0100

    Move volume size validation to api layer.
    
    As per the discussion on this patch:
    
      ihttps://review.openstack.org/10540
    
    Change-Id: I5d3031a08aa1e2d17b5fb233ebaec938c66fa88b

 cinder/api/openstack/volume/volumes.py            |   10 +-----
 cinder/tests/api/openstack/volume/test_volumes.py |   12 ++-----
 cinder/tests/test_volume.py                       |   38 +++++++++++++++++++++
 cinder/volume/api.py                              |   13 ++++++-
 4 files changed, 54 insertions(+), 19 deletions(-)

commit f7938c0b96c047490b6eb935cbf882505ce4a811
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Aug 15 10:36:09 2012 +0000

    Map internal exceptions in the nova style.
    
    Fixes LP 1014687.
    
    Adopt the nova idiom of internal exceptions mapped to their
    corresponding HTTP reponse code in the FaultWrapper middleware,
    and also inclusion of their detail message if declared safe for
    external exposure.
    
    Change-Id: I95a3c30466f6951e02f7a182545ff8db8fbecee8

 cinder/api/openstack/__init__.py |   47 +++++++++++++++++-----
 cinder/exception.py              |    7 ++++
 cinder/tests/test_wsgi.py        |   80 +++++++++++++++++++++++++++++++++++++-
 cinder/utils.py                  |   13 +++++++
 4 files changed, 137 insertions(+), 10 deletions(-)

commit d8075263f52489d4f9550376eb5beba2f4c8285d
Author: Ben Swartzlander <bswartz@netapp.com>
Date:   Mon Aug 13 16:57:50 2012 -0400

    Add driver for using files on a generic NFS server as virtual block devices
    Add NetApp-specific NFS virtual block driver
    
    blueprint nfs-files-as-virtual-block-devices
    blueprint netapp-nfs-cinder-driver
    
    Change-Id: I10ef6f3e230fcea2748152313d341db46bffce55

 cinder/tests/test_netapp_nfs.py |  260 ++++++++++++++++
 cinder/tests/test_nfs.py        |  628 +++++++++++++++++++++++++++++++++++++++
 cinder/volume/netapp_nfs.py     |  266 +++++++++++++++++
 cinder/volume/nfs.py            |  309 +++++++++++++++++++
 4 files changed, 1463 insertions(+)

commit 11545df5cb4fde935adec8160154e591cde8d1b9
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Aug 8 13:33:08 2012 -0600

    Implements bp migrate-nova-volumes-to-cinder
    
      Helper cmds to transition from nova to cinder
    
      Implements an import section in cinder-manage to transfer
      applicable tables from local or remote Nova database into a
      fresh Cinder database.
    
      Also implements optional method to copy persistent target files.
    
    Change-Id: I2e655e26c55f1986f3b1554726cead9e73ee9bd6

 bin/cinder-manage   |  134 +++++++++++++++++++++++++++++++++++++++++++++++----
 cinder/exception.py |    4 ++
 2 files changed, 129 insertions(+), 9 deletions(-)

commit 5f31f6e6974d097e525dbc3157f716bf069e4702
Merge: b760654 6454235
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 14 20:33:53 2012 +0000

    Merge "Add C-mode driver for NetApp."

commit 171a57a6879683dac5f219a0e8f1080ea687105d
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Tue Aug 14 12:26:19 2012 -0700

    add get_location method for images
    
    This is useful for determining whether the backend storage for the
    image in Glance is the same as the storage used in a volume driver.
    
    The direct_url is only available in the v2 images API, so add a
    version parameter to each request. As more parts of the v2 API are
    used, this parameter will become more useful.
    
    Change-Id: I5ca06b6d80ffe4118f8dd381ed11283573bce71f
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>

 cinder/image/glance.py     |   51 ++++++++++++++++++++++++++++++--------------
 cinder/tests/image/fake.py |    4 ++++
 2 files changed, 39 insertions(+), 16 deletions(-)

commit b760654404f96d6a566b84df6ae61cc9630f5028
Merge: ff45e32 f03e2e3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 14 17:24:38 2012 +0000

    Merge "Driver for IBM XIV storage."

commit ff45e32b97a7b87a611715ba61f0ebab5185edc3
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Mon Aug 13 15:13:06 2012 -0700

    rbd: implement create_volume_from_snapshot
    
    In an upcoming release, rbd will support creating volumes from
    snapshots ('cloning'). To clone a snapshot, it must first be
    'protected', which means it cannot be deleted until it is unprotected.
    A snapshot can only be unprotected if no clones depend on it. Thus,
    translate a failure to unprotect into a SnapshotIsBusy exception.
    
    Also check for remaining snapshots before deleting a volume,
    and raise VolumeIsBusy if any exist. While we're here, tidy up
    the shell arguments to be more readable.
    
    This is backwards compatible since it does not use the new features
    unless they are available in the installed version of rbd.
    
    Change-Id: If4105e7af7ba33f09a15103b53ad675aceb2ebb4
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>

 cinder/volume/driver.py |   68 +++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 60 insertions(+), 8 deletions(-)

commit 66afa15568f5077da2376a4129ef04a1e06cc64a
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Sun Aug 12 02:21:00 2012 -0700

    Replace deprecated client with python-glanceclient
    
    This is a copy of the code that was merged into Nova.
    python-glanceclient is required for Folsom, and for using
    the v2 API.
    
    Implementing blueprint efficient-volumes-from-images
    requires this since it needs to access the v2 API.
    
    Change-Id: Ia088517abab61e824a641d4adf616e08a53a94bc

 cinder/image/glance.py     |  236 +++++++++++++++-----------------------------
 cinder/tests/image/fake.py |   13 +--
 tools/pip-requires         |    2 +-
 3 files changed, 81 insertions(+), 170 deletions(-)

commit 6e5ef61f8f752fad4c2209b5ebc477f47693506e
Author: RongzeZhu <zrzhit@gmail.com>
Date:   Tue Aug 14 22:07:42 2012 +0800

    Remove unused imports
    
    Fixes bug #1036666
    
    Removed unused imports found by:
    find . -type f -name "*py" -exec pylint -r n {} \; | grep -E "Unused imp|^\*"
    
    Change-Id: Iad69354dd47c2a0dfa3a23a95c1a23eb66773b8d

 cinder/api/openstack/common.py                     |    5 -----
 .../volume/contrib/extended_snapshot_attributes.py |    1 -
 .../api/openstack/volume/contrib/volume_actions.py |    2 --
 cinder/api/openstack/wsgi.py                       |    2 --
 cinder/api/sizelimit.py                            |    1 -
 cinder/db/sqlalchemy/migration.py                  |    1 -
 cinder/db/sqlalchemy/models.py                     |    1 -
 cinder/openstack/common/notifier/api.py            |    1 -
 cinder/openstack/common/rpc/common.py              |    2 --
 cinder/test.py                                     |    3 ---
 cinder/testing/runner.py                           |    2 --
 cinder/tests/api/openstack/common.py               |    2 --
 cinder/tests/api/openstack/test_common.py          |    4 ----
 cinder/tests/api/openstack/test_wsgi.py            |    3 ---
 cinder/tests/db/fakes.py                           |    1 -
 cinder/tests/integrated/api/client.py              |    1 -
 cinder/tests/integrated/test_extensions.py         |    1 -
 cinder/tests/integrated/test_xml.py                |    1 -
 cinder/tests/scheduler/fakes.py                    |    2 --
 cinder/tests/scheduler/test_scheduler.py           |    6 ------
 cinder/tests/test_flags.py                         |    2 --
 cinder/tests/test_migrations.py                    |    1 -
 cinder/tests/test_misc.py                          |    7 -------
 cinder/tests/test_quota.py                         |    1 -
 cinder/tests/test_storwize_svc.py                  |    1 -
 cinder/tests/test_test_utils.py                    |    1 -
 cinder/tests/test_utils.py                         |    6 ------
 cinder/volume/netapp.py                            |    1 -
 cinder/volume/storwize_svc.py                      |    1 -
 29 files changed, 63 deletions(-)

commit 3b9379c6fba605589c6b753163e5c8f8670c73bf
Merge: 4f7f295 2f53607
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 14 13:29:46 2012 +0000

    Merge "Adds new volume API extensions"

commit 4f7f295c09a498006be6d8a007698432b1c792d8
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Mon Aug 13 10:42:27 2012 -0700

    Fix check_for_export() in non-exporting drivers
    
    This overrides the default check_for_export so that drivers that don't
    need to export block devices on the host like Sheepdog and RBD don't
    raise a NotImplemented exception when this is called.
    
    Reported-by: Mark Moseley <moseleymark@gmail.com>
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>
    
    Change-Id: Icf72f51904e7bdc368bfaf0a91dd0433ce3b1cf6

 cinder/volume/driver.py |    8 ++++++++
 1 file changed, 8 insertions(+)

commit 2f5360753308eb8b10581fc3c026c1b66f42ebdc
Author: Unmesh Gurjar <unmesh.gurjar@vertex.co.in>
Date:   Sat Aug 11 10:31:51 2012 -0700

    Adds new volume API extensions
    
    Adds following extensions:
    1. Create volume from image
    2. Copy volume to image
    
    Added unit tests.
    
    Implements: blueprint create-volume-from-image
    Change-Id: I9c73bd3fa2fa2e0648c01ff3f4fc66f757d7bc3f

 cinder/api/openstack/__init__.py                   |    4 +-
 cinder/api/openstack/extensions.py                 |    3 +
 cinder/api/openstack/volume/__init__.py            |    4 +-
 .../api/openstack/volume/contrib/image_create.py   |   31 ++
 .../api/openstack/volume/contrib/volume_actions.py |   84 +++-
 cinder/api/openstack/volume/volumes.py             |   46 +-
 cinder/flags.py                                    |    3 +
 cinder/image/__init__.py                           |   16 +
 cinder/image/glance.py                             |  492 ++++++++++++++++++++
 cinder/tests/api/openstack/fakes.py                |   13 +-
 .../volume/contrib/test_volume_actions.py          |  149 +++++-
 cinder/tests/api/openstack/volume/test_router.py   |    9 +-
 cinder/tests/api/openstack/volume/test_volumes.py  |  100 +++-
 cinder/tests/image/__init__.py                     |   20 +
 cinder/tests/image/fake.py                         |  248 ++++++++++
 cinder/tests/policy.json                           |    1 +
 cinder/tests/test_volume.py                        |  198 +++++++-
 cinder/utils.py                                    |   15 +-
 cinder/volume/api.py                               |   68 ++-
 cinder/volume/driver.py                            |   22 +
 cinder/volume/manager.py                           |   65 ++-
 etc/cinder/rootwrap.d/volume.filters               |    3 +
 22 files changed, 1553 insertions(+), 41 deletions(-)

commit f03e2e3ca3e31c830c5ef9b22f9b1c3aa8b1557a
Author: Avishay Traeger <avishay@il.ibm.com>
Date:   Sun Aug 12 14:55:04 2012 +0300

    Driver for IBM XIV storage.
    
    Volume driver for IBM XIV storage systems, along with unit tests. The
    driver imports the xiv_openstack_box class, which is a closed-source
    proxy available separately to IBM XIV customers.
    
    Change-Id: I3a3ec8b1d3e3adf1895b4a0bbd86993010d2e447

 cinder/tests/fake_flags.py |    1 +
 cinder/tests/test_xiv.py   |  242 ++++++++++++++++++++++++++++++++++++++++++++
 cinder/volume/xiv.py       |  128 +++++++++++++++++++++++
 3 files changed, 371 insertions(+)

commit dccfa57f6b49d9e92157a3361f42dee0f55bd70c
Merge: 59c55da ac1b465
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 13 07:51:09 2012 +0000

    Merge "Fake requests in tests should be to v1"

commit ac1b465ac3d81516b748740554e6bed8ebefe5ef
Author: Mike Perez <thingee@gmail.com>
Date:   Sun Aug 12 16:20:53 2012 -0700

    Fake requests in tests should be to v1
    
    v2 does not exist, yet.
    
    Change-Id: Id3a332c4d78c87882a7db1a8b98479a3881b0a5f

 .../tests/api/openstack/volume/test_snapshots.py   |    6 +++---
 cinder/tests/api/openstack/volume/test_types.py    |    4 ++--
 cinder/tests/api/openstack/volume/test_volumes.py  |    8 ++++----
 3 files changed, 9 insertions(+), 9 deletions(-)

commit 6454235a27f6c167290ef55a8262277f10d0febf
Author: Ben Swartzlander <bswartz@netapp.com>
Date:   Sun Aug 12 00:43:05 2012 -0400

    Add C-mode driver for NetApp.
    
    blueprint netapp-volume-driver-cmode
    
    Change-Id: I1eb418d05f557068bc0d4f359e19721c9c61068b

 cinder/tests/test_netapp.py |  390 ++++++++++++++++++++++++++++++++++++++++++-
 cinder/volume/netapp.py     |  294 ++++++++++++++++++++++++++++++++
 2 files changed, 683 insertions(+), 1 deletion(-)

commit 59c55dadfdf0da57638f971113563ea0950f57b4
Author: Avishay Traeger <avishay@il.ibm.com>
Date:   Sun Aug 12 11:31:26 2012 +0300

    storwize-svc: improved test coverage and fixes.
    
    Added test cases to cover more error paths, now providing 97% test
    coverage of the storwize-svc driver. Some tests uncovered bugs in the
    driver, which are fixed by this patch. In addition, there are some
    fixes to the code included which address comments from the submission
    of this driver to nova-volume and sync the two versions.
    
    Change-Id: I7c646885a7f2b1e761725c14940f1d741996beb4

 cinder/tests/test_storwize_svc.py |  767 +++++++++++++++++++++++++------------
 cinder/volume/storwize_svc.py     |  139 ++++---
 etc/cinder/cinder.conf.sample     |    4 +-
 3 files changed, 625 insertions(+), 285 deletions(-)

commit 63783084fa012469c25a91017cd3d142483fd09f
Merge: 9a7de84 4bc03ba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 10 20:34:01 2012 +0000

    Merge "Add iscsiadm path for qauntal."

commit 9a7de84b69650a63ca287d34e363dff897349221
Merge: a2c2448 a4c8e71
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 10 20:25:10 2012 +0000

    Merge "Use openstack.common.notifier."

commit a2c2448e0cc83a173f6d997eecfc36ce41d45a4b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Aug 10 11:55:48 2012 -0400

    Use setuptools-git.
    
    Change-Id: I6861a29d65b809362949f2c54197940fd0988785

 MANIFEST.in         |   40 ++++------------------------------------
 setup.py            |    1 +
 tools/test-requires |    1 +
 3 files changed, 6 insertions(+), 36 deletions(-)

commit 4bc03bab32270b4d6fcd302d3b64ac28e2596bd0
Author: Chuck Short <zulcss@ubuntu.com>
Date:   Fri Aug 10 10:06:50 2012 -0500

    Add iscsiadm path for qauntal.
    
    Resynchronize with nova/etc/nova/rootwrap.d/nova.volumes.
    
    Change-Id: I9737454bb2f48bbd97fe14bca163059e93ef825b
    Signed-off-by: Chuck Short <zulcss@ubuntu.com>

 etc/cinder/rootwrap.d/volume.filters |    1 +
 1 file changed, 1 insertion(+)

commit 69aa04d1f89c838d2ea1c96e715e175fb26f0883
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Aug 7 16:25:52 2012 -0400

    Create unique volumes_dir for testing.
    
    Updates test_volume.py so that we create a uniq volumes_dir for testing.
    This avoids polluting the source tree with fake volume UUID's when running
    tests.
    
    Change-Id: I3c37083915effec0eff7c8d9bfffb9f7674fe6f5

 cinder/tests/test_volume.py |   19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)

commit 6773b92c4e6e8834c8ab699cb6da6d60fde1523e
Merge: df8ef47 1c68bd3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 9 21:33:28 2012 +0000

    Merge "Straight port of the NetApp driver updates from nova-volume to cinder."

commit df8ef4703fd5e43b5031148c37abc5c1b08c1a69
Merge: 3ab7f55 30a5916
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 9 17:34:50 2012 +0000

    Merge "Remove redundant 'availability_zone' config options."

commit 3ab7f55ed1fcebdf990454624b327cebcb2371f5
Merge: e8db777 43626d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 9 17:33:21 2012 +0000

    Merge "Admin users should be restricted from seeing all snapshots by default."

commit 30a591616687f41af4cfa2605078a436b2bd795d
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Thu Aug 9 00:41:28 2012 +0800

    Remove redundant 'availability_zone' config options.
    
    There are two availability_zone related config options now:
      node_availability_zone and storage_availability_zone
    While volume API uses node_availability_zone, the scheduler uses
    the other, which causes failure in scheduler when these two options
    have different values.
    
    This patch removes 'node_availability_zone' so that end user
    can specify 'availability zone' when create volumes using
    Simple scheduler.
    
    Partially implement blueprint implement-availability-zones
    
    Change-Id: Ia2f0710908495ec64dacd2ee9bd10d7f8cd415df

 cinder/flags.py               |    2 +-
 cinder/scheduler/simple.py    |    2 +-
 cinder/service.py             |    4 ++--
 cinder/volume/api.py          |    1 -
 cinder/volume/manager.py      |    4 ----
 etc/cinder/cinder.conf.sample |    4 +---
 6 files changed, 5 insertions(+), 12 deletions(-)

commit 1c68bd3c617edca059d6a5ee1c95f5567c26861a
Author: Ben Swartzlander <bswartz@netapp.com>
Date:   Wed Aug 8 14:27:44 2012 -0400

    Straight port of the NetApp driver updates from nova-volume to cinder.
    
    These changes were already accepted into nova-volume, and I have only
    altered the exception classes to match the new cinder classes.
    
    blueprint netapp-volume-driver
    
    Change-Id: I0d59db64e00bc7e93223a24dabadbcbd0b290fb9

 cinder/tests/test_netapp.py |  119 ++++++--
 cinder/volume/netapp.py     |  643 ++++++++++++++++++++++++++++++++-----------
 2 files changed, 572 insertions(+), 190 deletions(-)

commit e8db777de63e2308c12a8c3b54e7a0ed54f8a068
Merge: 3905a99 2b2c97e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 7 23:49:59 2012 +0000

    Merge "Deprecate root_helper in favor of rootwrap_config"

commit 3905a9902606871bbe92fe7c48480db3349ea316
Author: Ronen Kat <ronenkat@il.ibm.com>
Date:   Mon Aug 6 10:11:10 2012 +0300

    Use volume driver specific execeptions.
    
    Change generic use of exception.Error in the cinder/volume directory
    to specific exceptions. The exceptions used in this patch are:
    exception.VolumeBackendAPIException
    exception.InvalidInput
    exception.InvalidVolume
    exceptio.VolumeAtatched
    Patch includes updates to the appropriate tests as well.
    
    Change-Id: I10407ff3f5babe64e88f445d3529269b7665ee16

 cinder/exception.py                   |    6 +++-
 cinder/tests/test_HpSanISCSIDriver.py |    2 +-
 cinder/tests/test_storwize_svc.py     |    2 +-
 cinder/tests/test_volume.py           |    2 +-
 cinder/volume/driver.py               |   22 +++++++-----
 cinder/volume/manager.py              |    6 ++--
 cinder/volume/netapp.py               |   43 +++++++++++-----------
 cinder/volume/san.py                  |   27 +++++++-------
 cinder/volume/storwize_svc.py         |   63 +++++++++++++++++----------------
 cinder/volume/xensm.py                |   34 +++++++++++-------
 10 files changed, 118 insertions(+), 89 deletions(-)

commit e6e1e983695fdc59650c7a4f3013c0e5338144cc
Merge: c02c5a7 c401895
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 7 04:09:00 2012 +0000

    Merge "Add persistent volumes for tgtd."

commit c02c5a76cb1e59dca94ea2bc13ad890c02965d6d
Merge: a1b4bd5 99456bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 7 03:50:25 2012 +0000

    Merge "Send 'create volume from snapshot' to the proper host"

commit 43626d293739dbe06c7fe26845d17c2e580e62dd
Author: jakedahn <jake@ansolabs.com>
Date:   Sun Aug 5 14:32:07 2012 -0700

    Admin users should be restricted from seeing all
    snapshots by default.
    
      * Now to view all snapshots across all tenants you need
        to include the all_tenants=1 GET param in your api request.
      * Fixes remaining issues blocking bug #967882
    
    Change-Id: I2a8338d77badc70201bb315198183f2091df43fb

 cinder/api/openstack/volume/snapshots.py           |    6 ++-
 cinder/tests/api/openstack/fakes.py                |   26 +++++++++++++
 .../contrib/test_extended_snapshot_attributes.py   |    2 +-
 .../tests/api/openstack/volume/test_snapshots.py   |   41 ++++++++++++++++++--
 cinder/volume/api.py                               |   13 +++++--
 5 files changed, 79 insertions(+), 9 deletions(-)

commit a4c8e71e0895f6652d1e2c8fbb06b6b2447b6086
Author: Chmouel Boudjnah <chmouel@chmouel.com>
Date:   Mon Aug 6 10:25:31 2012 +0200

    Use openstack.common.notifier.
    
    - Update openstack.common.log to use it (and fixes #1030078 for cinder as
      well so we can get review I9d4251b4292188c0174ebac1dcd98318df44c0e3
      working).
    - Don't use openstack.common.context but our own just yet.
    
    Change-Id: I10feda623788a3b2418cad6bf55cbdb860ba8ee7

 cinder/exception.py                                |    7 +-
 cinder/flags.py                                    |    2 +-
 cinder/notifier/__init__.py                        |   14 --
 cinder/notifier/api.py                             |  135 -------------------
 cinder/notifier/capacity_notifier.py               |   81 -----------
 cinder/notifier/list_notifier.py                   |   71 ----------
 cinder/notifier/log_notifier.py                    |   34 -----
 cinder/notifier/no_op_notifier.py                  |   19 ---
 cinder/notifier/rabbit_notifier.py                 |   46 -------
 cinder/notifier/test_notifier.py                   |   25 ----
 cinder/openstack/common/cfg.py                     |    5 +-
 cinder/openstack/common/exception.py               |    1 -
 cinder/openstack/common/jsonutils.py               |    6 +-
 cinder/openstack/common/log.py                     |   37 +++--
 cinder/openstack/common/notifier/__init__.py       |   14 ++
 cinder/openstack/common/notifier/api.py            |  142 ++++++++++++++++++++
 cinder/openstack/common/notifier/list_notifier.py  |  118 ++++++++++++++++
 cinder/openstack/common/notifier/log_notifier.py   |   35 +++++
 cinder/openstack/common/notifier/no_op_notifier.py |   19 +++
 .../openstack/common/notifier/rabbit_notifier.py   |   46 +++++++
 cinder/openstack/common/notifier/test_notifier.py  |   22 +++
 cinder/openstack/common/rpc/common.py              |    6 +-
 cinder/openstack/common/rpc/impl_qpid.py           |    2 +-
 cinder/openstack/common/rpc/proxy.py               |   12 +-
 cinder/openstack/common/setup.py                   |    6 +-
 cinder/openstack/common/timeutils.py               |    1 -
 cinder/tests/notifier/__init__.py                  |   16 ---
 cinder/tests/notifier/test_list_notifier.py        |   84 ------------
 cinder/tests/scheduler/test_scheduler.py           |    2 +-
 cinder/tests/test_exception.py                     |    2 +-
 cinder/tests/test_notifier.py                      |  133 ------------------
 cinder/utils.py                                    |    5 +-
 etc/cinder/cinder.conf.sample                      |   10 +-
 openstack-common.conf                              |    2 +-
 34 files changed, 449 insertions(+), 711 deletions(-)

commit a1b4bd5e86cd865869308c976c6aebf9a4ad23a8
Author: jakedahn <jake@ansolabs.com>
Date:   Tue Jul 31 16:35:26 2012 -0700

    Admin users should be restricted from seeing all
    volumes by default.
    
      * Now to view all volumes across all tenants you need
        to include the all_tenants=1 GET param in your api request.
      * Fixes remaining issues blocking bug #967882
    
    Change-Id: Ie9d74e9c09fa0c192ab6257b5fb02d65b593cbfb

 cinder/api/openstack/volume/volumes.py            |   27 ++++++++++++++-
 cinder/tests/api/openstack/fakes.py               |    8 ++++-
 cinder/tests/api/openstack/volume/test_volumes.py |   37 ++++++++++++++++++++-
 cinder/volume/api.py                              |   13 +++++---
 4 files changed, 78 insertions(+), 7 deletions(-)

commit 2b2c97eb5ca332ce7d1f83e4fd2e81fabe0acb66
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Aug 3 15:35:03 2012 +0200

    Deprecate root_helper in favor of rootwrap_config
    
    Align with recent changes in nova-rootwrap by marking the
    root_helper option deprecated and introduce usage of the
    rootwrap_config option instead. The root_helper option will still
    fully be supported in Folsom, but will be removed in Grizzly.
    
    Transition notes: you should replace:
    root_helper=sudo cinder-rootwrap /etc/cinder/rootwrap.conf
    
    by:
    rootwrap_config=/etc/cinder/rootwrap.conf
    
    Change-Id: I22a6d2bdee6ad2c5ad587ceec574cec4b2887f22

 bin/cinder-rootwrap |    2 +-
 cinder/flags.py     |    6 +++++-
 cinder/utils.py     |   14 ++++++++++++--
 3 files changed, 18 insertions(+), 4 deletions(-)

commit 99456bd690445443ae05c0d4fe1ec43ba6090f6f
Author: ZhuRongze <zrzhit@gmail.com>
Date:   Fri Jul 13 12:07:13 2012 +0000

    Send 'create volume from snapshot' to the proper host
    
    A simple solution for bug 1008866. When creating volume from snapshot on
    multicluster, in volume it will check if snapshot_id is set. If snapshot_id
    is set, make the call create volume directly to the volume host where the
    snapshot resides instead of passing it through the scheduler. So snapshot can
    be copy to new volume.
    
    Change-Id: Ie9c1a77f62abc40e294b1d0c604cf885652728da

 cinder/volume/api.py          |   40 ++++++++++++++++++++++++++++++++++------
 etc/cinder/cinder.conf.sample |    5 +++++
 2 files changed, 39 insertions(+), 6 deletions(-)

commit c401895f8f2b6f1693601f7996da88d7b3d45fa0
Author: Chuck Short <zulcss@ubuntu.com>
Date:   Fri Jul 27 12:05:55 2012 -0500

    Add persistent volumes for tgtd.
    
    Currently if you restart the server running nova-volume
    or restart tgt, you will loose your iscsi targets that
    have been created. This is not good.
    
    In order for iscsi targets to be persistent across
    reboots or restarts, one has to have the target's configuration
    information in /etc/tgt/targets.conf or /etc/tgt/conf.d.
    So when tgtd is restarted then the iscsi targets will be there
    as expected.
    
    This patch will add a configuration file to $state_path/volumes
    when the volume is created. The configuration file is identified by
    the volume uuid. It creates a logicalunit when the volume is created
    as well. The iscsi target and configuration file
    will be removed once the volume has been removed as well.
    
    In order to use this, you have to include the following in
    your /etc/tgt/targets.conf
    
    include $state_path/volumes/*
    
    For upgrades, it will just re-create the volumes
    already in the volumes table.
    
    Fixes LP: #1011159
    
    Change-Id: Ib74dcc1efa0332842041b4c045ca5fa85d4a32ca
    Signed-off-by: Chuck Short <zulcss@ubuntu.com>

 cinder/tests/test_iscsi.py           |   40 ++++------
 cinder/volume/driver.py              |   12 ++-
 cinder/volume/iscsi.py               |  137 ++++++++++++++++++++++------------
 etc/cinder/rootwrap.d/volume.filters |    1 +
 4 files changed, 111 insertions(+), 79 deletions(-)

commit 0be1725cdcc6d0706475aca3444f108ba76db246
Merge: 6e781fc 053837f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 1 18:40:04 2012 +0000

    Merge "Include AUTHORS file in MANIFEST.in"

commit 6e781fc4b04a5e60e5b8de194931d9f00dda2150
Merge: b765b6b f758bde
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 1 18:40:01 2012 +0000

    Merge "Scheduler-clean-up"

commit b765b6b7e0814c4ecd71bf434a856d2d86d75f50
Merge: 424e6af c01bf56
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 1 18:40:00 2012 +0000

    Merge "Add authors for IBM Storwize and SVC driver."

commit f758bde47439be52a743b2b4181d4900f2c1bc8a
Author: ZhuRongze <zrzhit@gmail.com>
Date:   Sat Jul 28 08:14:03 2012 +0000

    Scheduler-clean-up
    
    Some instance related functions and opts were still present in Cinder
    Scheduler.
    
    Remove the functions and opts and modify some computer related comments.
    
    Change-Id: Ia01099e66bcbb129493870dfbf212d5e6669ebe1

 cinder/scheduler/__init__.py          |    2 +-
 cinder/scheduler/chance.py            |   24 +------
 cinder/scheduler/driver.py            |   55 ---------------
 cinder/scheduler/manager.py           |  119 ++-------------------------------
 cinder/scheduler/simple.py            |   66 ------------------
 cinder/tests/scheduler/test_rpcapi.py |    2 -
 cinder/tests/test_quota.py            |   11 +--
 etc/cinder/cinder.conf.sample         |    6 --
 8 files changed, 7 insertions(+), 278 deletions(-)

commit 053837f89b01beb6c3b09cd753e3ccb1ba32b4c9
Author: Chmouel Boudjnah <chmouel@chmouel.com>
Date:   Wed Aug 1 09:05:24 2012 +0200

    Include AUTHORS file in MANIFEST.in
    
    Change-Id: I4b2ddeaaaa5f58eafd25cba6bd613c6fe477ad4d

 MANIFEST.in |    1 +
 1 file changed, 1 insertion(+)

commit 424e6af7c0ade3128826f7262a87df9e040f67af
Merge: 7d30cb0 5b605b6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 1 05:27:11 2012 +0000

    Merge "Include volume_metadata with object on vol create"

commit c01bf56ba9b89600bbd913bb094fc1164bfa4559
Author: Avishay Traeger <avishay@il.ibm.com>
Date:   Tue Jul 31 21:47:57 2012 +0300

    Add authors for IBM Storwize and SVC driver.
    
    Change-Id: I0d48dd6ce595e6bd9801478fc0b90bcb8fdf5947
    Co-authored-by: Ronen Kat <ronenkat@il.ibm.com>

 cinder/tests/test_storwize_svc.py |    4 ++++
 cinder/volume/storwize_svc.py     |    4 ++++
 2 files changed, 8 insertions(+)

commit 7d30cb059a7ac262a40eaa367349f045fbe6362c
Merge: 0d8e026 097acdd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 16:22:25 2012 +0000

    Merge "Remove unused instance_name_template flag"

commit 0d8e026dab830d0a1e836f7e3f1d84ea7ccfd6a4
Author: Avishay Traeger <avishay@il.ibm.com>
Date:   Sun Jul 15 15:53:36 2012 +0300

    Driver for IBM Storwize and SVC storage.
    
    Volume driver for IBM Storwize and SVC storage systems, along with unit
    tests and updated sample config file. The unit tests include a
    Storwize/SVC management simulator to allow for testing without
    controller hardware. Also added a new exception for volume drivers.
    
    Change-Id: Id7e3e79cd6e62fac4b10937b6f1b5f6bcb7908fe

 cinder/exception.py               |    5 +
 cinder/tests/test_storwize_svc.py |  939 +++++++++++++++++++++++++++++
 cinder/volume/storwize_svc.py     | 1200 +++++++++++++++++++++++++++++++++++++
 etc/cinder/cinder.conf.sample     |   19 +-
 4 files changed, 2162 insertions(+), 1 deletion(-)

commit 097acddf82b937a042c2591da02da3b2092a1519
Author: ZhuRongze <zrzhit@gmail.com>
Date:   Sat Jul 28 07:28:50 2012 +0000

    Remove unused instance_name_template flag
    
    Only used in nova/db/sqlalchemy/models
    
    Change-Id: I1029848bb639402cad30c01b51630c0ddd9dd7b8

 cinder/db/api.py              |    3 ---
 etc/cinder/cinder.conf.sample |    2 --
 2 files changed, 5 deletions(-)

commit 62af23cff67791781e5851ad83334857752eae36
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jul 30 16:11:18 2012 +0100

    Allow XML payload for volume creation.
    
    Fixes cinder aspect of LP 1030330
    
    Tolerate volume size attribute of type string as opposed to int.
    
    Change-Id: I8d300a6c23c2e4e92187e26260ce49da35590545

 cinder/api/openstack/volume/volumes.py            |   12 +++++++++++-
 cinder/tests/api/openstack/volume/test_volumes.py |   10 ++++++++--
 2 files changed, 19 insertions(+), 3 deletions(-)

commit 5b605b6b8ae00f51deac5e0531f7aeda9bd11019
Author: John Griffith <john.griffith@solidfire.com>
Date:   Fri Jul 27 22:30:47 2012 -0600

    Include volume_metadata with object on vol create
    
    Fix for Bug 1029762
    
    The symptom of this bug is that the response data of an
    OSAPI create call always shows and empty dict for volume_metadata
    regardless of what was passed in to created and actually used.
    
    Upon the db create_volume call a reference to the volume
    object is all that was being returned.  Since metadata is
    specified and set, it should also be returned with the
    create reference object.
    
    This will result in the the osapi create call returning
    a body with correct metdata info rather than always showing
    and empty dict as it was previously.
    
    Change-Id: I9ae9c737bd2aa5bfa14c19fe8b8b2a7a5aa4d43a

 cinder/db/sqlalchemy/api.py |   11 ++++++++++-
 cinder/tests/test_volume.py |   20 +++++++++++++++++++-
 2 files changed, 29 insertions(+), 2 deletions(-)

commit 95262bb692746ca89dc01337357c4329766df5e5
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Jul 26 16:26:55 2012 +0000

    Trim volume type representation.
    
    Fixes cinder aspect of LP 1027281.
    
    Use view builder pattern to only include non-extraneous
    volume type attributes in the representation.
    
    Change-Id: I33f1b579fd6ed4ed98fa04e9148e91eca125213e

 .../api/openstack/volume/contrib/types_manage.py   |    5 +-
 cinder/api/openstack/volume/types.py               |   10 ++--
 cinder/api/openstack/volume/views/types.py         |   34 ++++++++++++++
 cinder/tests/api/openstack/volume/test_types.py    |   48 ++++++++++++++++++++
 4 files changed, 93 insertions(+), 4 deletions(-)

commit cdaf23ea960f64d62140f5c5807f5c2fd8ca9feb
Merge: 46e3e73 612b1bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 24 23:25:38 2012 +0000

    Merge "Don't do PEP8 test for openstack-common code."

commit 46e3e73bf7b37ffdd8bcdab93442cebc78d09d4d
Merge: d2d3c9c 111b753
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 24 23:20:41 2012 +0000

    Merge "Cleanup unused code in servce.py"

commit d2d3c9cba4a647724f75c036a1985a10c966da35
Author: Thierry Carrez <thierry@openstack.org>
Date:   Mon Jul 23 16:21:28 2012 +0200

    Port nova-rootwrap changes to cinder-rootwrap
    
    Port recent nova-rootwrap changes to cinder-rootwrap, including:
    * Move filter definition from Python module to configuration files
    * Fix tests execution on Fedora (bug 1027814)
    * Remove executable bit on cinder/rootwrap files
    
    This certainly needs a matching change to devstack to pass gating.
    
    Change-Id: I963bc7890ba285ae515ea61bbd960bd2523f9061

 bin/cinder-rootwrap                  |   33 ++++++++++++++++---------
 cinder/rootwrap/filters.py           |   19 ++++++++------
 cinder/rootwrap/volume.py            |   45 ----------------------------------
 cinder/rootwrap/wrapper.py           |   42 +++++++++++++++++++------------
 cinder/tests/test_nova_rootwrap.py   |   38 +++++++++++++---------------
 etc/cinder/rootwrap.conf             |    7 ++++++
 etc/cinder/rootwrap.d/volume.filters |   27 ++++++++++++++++++++
 7 files changed, 112 insertions(+), 99 deletions(-)

commit 612b1bd95510252721ba1a0531bd27e2706cad1d
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Mon Jul 23 14:39:48 2012 +0800

    Don't do PEP8 test for openstack-common code.
    
    Pep8 test reports issue on openstack-common modules, which would
    fail CI test. Pep8 test should skip openstack-common and assuming
    they are problem-free code. Even it's not, bug/fix should go to
    openstack-common first, then resync back to Cinder.  Therefore,
    Cinder should skip pep8 test for openstack-common code.
    
    Fix bug #1027774
    
    Change-Id: I22c45542401022a6bad9f2320e8657f972915f69

 run_tests.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 111b7534b602d62e4984ada998f757038677b745
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Mon Jul 23 11:17:26 2012 +0800

    Cleanup unused code in servce.py
    
    Remove unused code in Service() class which is meant to be used
    by 'nova-compute'.
    
    Change-Id: Iadd58914c7fb7a581f9878880908aabcfa5733d6
    Signed-off-by: zhiteng.huang@intel.com

 cinder/service.py |    3 ---
 1 file changed, 3 deletions(-)

commit 3a2036cccb2852b29d2aca15bd25d9e4ad919bcc
Author: Chmouel Boudjnah <chmouel@chmouel.com>
Date:   Fri Jul 20 12:26:18 2012 +0000

    Use openstack.common.setup.
    
    - Remove Authors and add it to .gitignore since this is now auto
      generated.
    
    Change-Id: I513b362a0ea8aca9cf5e06807834316b46a5f430

 .gitignore                       |    3 +
 .mailmap                         |    2 +-
 Authors                          |   54 ------
 cinder/openstack/common/setup.py |  360 ++++++++++++++++++++++++++++++++++++++
 cinder/tests/test_misc.py        |   28 ---
 openstack-common.conf            |    2 +-
 setup.py                         |   36 +---
 7 files changed, 367 insertions(+), 118 deletions(-)

commit 1cd9f0426437099be05d609abb32781941ac7af4
Merge: 9a5e830 56701c3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 20 16:41:01 2012 +0000

    Merge "Remove unused fake memcache client"

commit 9a5e830c2453b0e4fd93c56173881ce43cffc3e8
Author: Mike Perez <thingee@gmail.com>
Date:   Fri Jul 20 08:59:40 2012 -0700

    utils module is still being used by cinder-volume service
    
    bug 1026949
    
    Change-Id: I7327d94b5a9f35bc74e179a05976d511c6642a7a

 bin/cinder-volume |    1 +
 1 file changed, 1 insertion(+)

commit d8ae1541c43b3586bc1b6dd25639727e5618ae79
Merge: 797fe5f fe716c0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 20 15:08:03 2012 +0000

    Merge "Use openstack.common.log for logging."

commit 797fe5f81caf2adc442e447def5c7ef843f79171
Merge: 635f149 c99bae9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 20 15:06:36 2012 +0000

    Merge "Remove unused check_snapshots_enabled"

commit 56701c3eb0dfa0db90bc686ba49dd978da974106
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 03:58:01 2012 +0100

    Remove unused fake memcache client
    
    Used by the consoleauth service and the EC2 and metadata APIs in Nova.
    
    Change-Id: I3048d9ab7b1d30eff583e15044c5a7bf74d52a3c

 cinder/common/memorycache.py |   65 ------------------------------------------
 1 file changed, 65 deletions(-)

commit c99bae92e8aa3a38d5e3411e71df0d65a9484298
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:15:32 2012 +0100

    Remove unused check_snapshots_enabled
    
    Only used in Nova by the createImage action.
    
    Change-Id: I114281fd553020ac96c499c18ff3e4a2a626c3b2

 cinder/api/openstack/common.py |   12 ------------
 etc/cinder/cinder.conf.sample  |    5 -----
 2 files changed, 17 deletions(-)

commit fe716c0ee499ed13f37231c651b8e018baede772
Author: Chmouel Boudjnah <chmouel@chmouel.com>
Date:   Fri Jul 20 10:53:41 2012 +0000

    Use openstack.common.log for logging.
    
    - We are not using openstack.common.notifier just yet so handedit
      openstack.common.log to use cinder.notifier now.
    
    Change-Id: I9d912904c53a8ef5d90b4ab5792f5577701b6817

 Authors                                            |    1 +
 bin/cinder-all                                     |    4 +-
 bin/cinder-api                                     |    4 +-
 bin/cinder-manage                                  |    4 +-
 bin/cinder-scheduler                               |    4 +-
 bin/cinder-volume                                  |    4 +-
 bin/clear_rabbit_queues                            |    4 +-
 cinder/api/auth.py                                 |    2 +-
 cinder/api/openstack/__init__.py                   |    2 +-
 cinder/api/openstack/auth.py                       |    2 +-
 cinder/api/openstack/common.py                     |    2 +-
 cinder/api/openstack/extensions.py                 |    2 +-
 cinder/api/openstack/urlmap.py                     |    2 +-
 cinder/api/openstack/volume/__init__.py            |    2 +-
 cinder/api/openstack/volume/contrib/__init__.py    |    2 +-
 .../volume/contrib/extended_snapshot_attributes.py |    2 +-
 .../api/openstack/volume/contrib/volume_actions.py |    2 +-
 cinder/api/openstack/volume/extensions.py          |    2 +-
 cinder/api/openstack/volume/snapshots.py           |    2 +-
 cinder/api/openstack/volume/volumes.py             |    2 +-
 cinder/api/openstack/wsgi.py                       |    2 +-
 cinder/api/sizelimit.py                            |    2 +-
 cinder/context.py                                  |    2 +-
 cinder/db/sqlalchemy/api.py                        |    2 +-
 .../migrate_repo/versions/001_cinder_init.py       |    2 +-
 cinder/db/sqlalchemy/migration.py                  |    2 +-
 cinder/db/sqlalchemy/session.py                    |    2 +-
 cinder/exception.py                                |    2 +-
 cinder/flags.py                                    |   16 -
 cinder/log.py                                      |  416 ------------------
 cinder/manager.py                                  |    2 +-
 cinder/notifier/api.py                             |    2 +-
 cinder/notifier/capacity_notifier.py               |    2 +-
 cinder/notifier/list_notifier.py                   |    2 +-
 cinder/notifier/log_notifier.py                    |    2 +-
 cinder/notifier/rabbit_notifier.py                 |    2 +-
 cinder/openstack/common/exception.py               |    1 +
 cinder/openstack/common/excutils.py                |    2 +-
 cinder/openstack/common/importutils.py             |   22 +-
 cinder/openstack/common/iniparser.py               |    3 +-
 cinder/openstack/common/log.py                     |  459 ++++++++++++++++++++
 cinder/openstack/common/rpc/impl_zmq.py            |    2 +-
 cinder/scheduler/driver.py                         |    2 +-
 cinder/scheduler/manager.py                        |    2 +-
 cinder/service.py                                  |    2 +-
 cinder/test.py                                     |    2 +-
 cinder/testing/runner.py                           |    4 +-
 cinder/tests/api/openstack/volume/test_router.py   |    2 +-
 .../tests/api/openstack/volume/test_snapshots.py   |    2 +-
 cinder/tests/fake_utils.py                         |    2 +-
 cinder/tests/integrated/api/client.py              |    2 +-
 cinder/tests/integrated/integrated_helpers.py      |    2 +-
 cinder/tests/integrated/test_extensions.py         |    2 +-
 cinder/tests/integrated/test_login.py              |    2 +-
 cinder/tests/integrated/test_volumes.py            |    2 +-
 cinder/tests/integrated/test_xml.py                |    2 +-
 cinder/tests/notifier/test_list_notifier.py        |    2 +-
 cinder/tests/test_HpSanISCSIDriver.py              |    2 +-
 cinder/tests/test_SolidFireSanISCSIDriver.py       |    2 +-
 cinder/tests/test_log.py                           |  217 ---------
 cinder/tests/test_migrations.py                    |    2 +-
 cinder/tests/test_netapp.py                        |    2 +-
 cinder/tests/test_notifier.py                      |    6 +-
 cinder/tests/test_volume.py                        |    7 +-
 cinder/tests/test_volume_types.py                  |    2 +-
 cinder/utils.py                                    |    2 +-
 cinder/volume/api.py                               |    2 +-
 cinder/volume/driver.py                            |    2 +-
 cinder/volume/manager.py                           |    2 +-
 cinder/volume/netapp.py                            |    2 +-
 cinder/volume/nexenta/jsonrpc.py                   |    2 +-
 cinder/volume/nexenta/volume.py                    |    2 +-
 cinder/volume/san.py                               |    2 +-
 cinder/volume/volume_types.py                      |    2 +-
 cinder/volume/xensm.py                             |    2 +-
 cinder/wsgi.py                                     |    2 +-
 etc/cinder/logging_sample.conf                     |    4 +-
 openstack-common.conf                              |    2 +-
 78 files changed, 564 insertions(+), 736 deletions(-)

commit 635f1498757d5ab8a0a8957d6e5aafaf3ceee022
Author: Mike Perez <thingee@gmail.com>
Date:   Thu Jul 19 23:35:32 2012 -0700

    Don't create volumes if an incorrect size was given
    
    bug 1006875
    
    Change-Id: Ied4c6f6d03c0a70838e1e483d69f3ed1ec08a9b5

 Authors                                           |    1 +
 cinder/tests/api/openstack/volume/test_volumes.py |   13 +++++++++++++
 cinder/volume/api.py                              |    3 +++
 3 files changed, 17 insertions(+)

commit 3536ee616f0e381704ea0f7dfc7d1c7dc16c665e
Merge: ae28dc0 8b6397b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 17:03:09 2012 +0000

    Merge "Remove some unused helper scripts"

commit ae28dc01b335cbc2b264dfca8962fe59934ab432
Merge: 16158d1 23df265
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 16:57:18 2012 +0000

    Merge changes I4e00ca81,I223aca1a
    
    * changes:
      Remove unused get_{id,version}_from_href()
      Remove unused metadata serialization

commit 16158d18045c2ebc4ae724619659dc53d81e5c8e
Merge: 897b5e3 fbf1ee2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 16:56:14 2012 +0000

    Merge "Remove unused OverLimitFault"

commit 897b5e3b4beb364fd6a053eb5bba9540a317d1d1
Merge: f49c947 c73d15d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 16:54:48 2012 +0000

    Merge "Remove unused wrap_errors decorator"

commit f49c947b0fef819997a461bf94dd30b31c9f9b96
Merge: 05b661e 03700f1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 16:53:43 2012 +0000

    Merge "Remove unused raise_http_conflict_for_instance_invalid_state()"

commit 05b661e967d004d458ab6326635e8463695554fa
Merge: 15f971d ed7e05b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 16:52:28 2012 +0000

    Merge "Remove unused enabled_apis flag"

commit 15f971de5bce79648f812209df0f82622a3711d0
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Jun 13 10:48:54 2012 -0400

    Use rpc from openstack-common.
    
    Final patch for blueprint common-rpc.
    
    This patch removes cinder.rpc in favor of the copy in openstack-common.
    
    Change-Id: I9c2f6bdbe8cd0c44417f75284131dbf3c126d1dd

 bin/cinder-manage                         |    2 +-
 bin/clear_rabbit_queues                   |    2 +-
 cinder/manager.py                         |    2 +-
 cinder/notifier/rabbit_notifier.py        |    2 +-
 cinder/openstack/common/rpc/__init__.py   |  264 ++++++++++
 cinder/openstack/common/rpc/amqp.py       |  418 ++++++++++++++++
 cinder/openstack/common/rpc/common.py     |  315 ++++++++++++
 cinder/openstack/common/rpc/dispatcher.py |  150 ++++++
 cinder/openstack/common/rpc/impl_fake.py  |  184 +++++++
 cinder/openstack/common/rpc/impl_kombu.py |  751 +++++++++++++++++++++++++++++
 cinder/openstack/common/rpc/impl_qpid.py  |  599 +++++++++++++++++++++++
 cinder/openstack/common/rpc/impl_zmq.py   |  725 ++++++++++++++++++++++++++++
 cinder/openstack/common/rpc/matchmaker.py |  258 ++++++++++
 cinder/openstack/common/rpc/proxy.py      |  161 +++++++
 cinder/rpc/__init__.py                    |  239 ---------
 cinder/rpc/amqp.py                        |  406 ----------------
 cinder/rpc/common.py                      |  295 -----------
 cinder/rpc/dispatcher.py                  |  105 ----
 cinder/rpc/impl_fake.py                   |  179 -------
 cinder/rpc/impl_kombu.py                  |  744 ----------------------------
 cinder/rpc/impl_qpid.py                   |  566 ----------------------
 cinder/rpc/proxy.py                       |  161 -------
 cinder/scheduler/driver.py                |    3 +-
 cinder/scheduler/rpcapi.py                |    4 +-
 cinder/service.py                         |    2 +-
 cinder/tests/fake_flags.py                |    2 +-
 cinder/tests/rpc/__init__.py              |   19 -
 cinder/tests/rpc/common.py                |  270 -----------
 cinder/tests/rpc/test_common.py           |  147 ------
 cinder/tests/rpc/test_dispatcher.py       |  109 -----
 cinder/tests/rpc/test_fake.py             |   33 --
 cinder/tests/rpc/test_kombu.py            |  371 --------------
 cinder/tests/rpc/test_kombu_ssl.py        |   66 ---
 cinder/tests/rpc/test_proxy.py            |  124 -----
 cinder/tests/rpc/test_qpid.py             |  343 -------------
 cinder/tests/scheduler/test_rpcapi.py     |    2 +-
 cinder/tests/scheduler/test_scheduler.py  |    4 +-
 cinder/tests/test_notifier.py             |    6 +-
 cinder/tests/test_quota.py                |    4 +-
 cinder/tests/test_test.py                 |    2 +-
 cinder/tests/test_volume.py               |    2 +-
 cinder/volume/api.py                      |    2 +-
 cinder/volume/manager.py                  |    2 +-
 openstack-common.conf                     |    2 +-
 44 files changed, 3847 insertions(+), 4200 deletions(-)

commit 84b7025547455d1f83d0fc20c7b9de0a3291f9e6
Author: Russell Bryant <rbryant@redhat.com>
Date:   Mon Jul 2 11:30:10 2012 -0400

    Add missing gettextutils from openstack-common.
    
    This patch adds gettextutils from openstack-common to cinder.  It is used
    by rpc, so some parts of rpc are broken without this patch.
    
    Change-Id: I0830319f4e2011b87180abcc24354c935bea8d16

 cinder/openstack/common/gettextutils.py |   33 +++++++++++++++++++++++++++++++
 openstack-common.conf                   |    2 +-
 2 files changed, 34 insertions(+), 1 deletion(-)

commit 1b3cbc537ee1b69940cfb3a5d5b408db13df266d
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue May 1 17:31:26 2012 -0400

    Use save_and_reraise_exception() from common.
    
    This patch common.excutils from openstack-common, which includes
    save_and_reraise_exception().  The patch also converts the code
    base to use it from there instead of cinder.utils and then removes
    it from cinder.utils.
    
    The initial motivation for this was removing another cinder dependency
    from cinder.rpc so that it can eventually be moved to openstack-common.
    
    Change-Id: I7354ca51a02aec9c709cf33f77d4abc46acc2742

 cinder/openstack/common/excutils.py |   49 +++++++++++++++++++++++++++++++++++
 cinder/rpc/amqp.py                  |    5 ++--
 cinder/scheduler/manager.py         |    8 +++---
 cinder/utils.py                     |   33 +++--------------------
 cinder/volume/manager.py            |    9 ++++---
 openstack-common.conf               |    2 +-
 6 files changed, 66 insertions(+), 40 deletions(-)

commit 0f362edeb03177c12a65b9587d13df7aac76a2f7
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Jun 1 14:42:32 2012 -0400

    Use openstack.common.cfg.CONF.
    
    Part of blueprint common-rpc.
    
    This patch makes the rpc code use the global config object from
    openstack-common.  Based on some recent discussions on the mailing list,
    this may not be the final way configuration handling is done here, but
    it is certainly better than the register_opts() hack that is removed by
    this patch.
    
    Change-Id: Id128126e0bc064a2a1c710c6bd32fb3d137dc7f6

 bin/cinder-manage                  |    1 -
 bin/clear_rabbit_queues            |    1 -
 cinder/rpc/__init__.py             |   27 ++++++++++-----------------
 cinder/rpc/impl_fake.py            |    4 ----
 cinder/rpc/impl_kombu.py           |    6 ++----
 cinder/rpc/impl_qpid.py            |    6 ++----
 cinder/service.py                  |    2 --
 cinder/tests/__init__.py           |    3 ---
 cinder/tests/rpc/test_kombu.py     |    1 -
 cinder/tests/rpc/test_kombu_ssl.py |    1 -
 cinder/tests/rpc/test_qpid.py      |    1 -
 11 files changed, 14 insertions(+), 39 deletions(-)

commit 8f1d99d6942538622c737b791007cecdf9248d8a
Author: Russell Bryant <rbryant@redhat.com>
Date:   Sat May 26 20:42:09 2012 -0400

    Remove cinder.log usage from cinder.rpc.
    
    Part of blueprint common-rpc.
    
    This patch removes the usage of cinder.log from cinder.rpc.  This is
    necessary before cinder.rpc can be moved to openstack-common.  The rpc
    logging was not using any of the extra features provided in cinder.log as
    far as I can tell, so the changes are very simple.
    
    This is the final dependency.  After this change, the rpc code
    can be moved to openstack-common without any changes.
    
    Change-Id: I17ca4b691bb8d4f18e618632a2381dd12d31852a

 cinder/rpc/amqp.py      |    2 +-
 cinder/rpc/common.py    |    2 +-
 cinder/rpc/impl_qpid.py |    4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)

commit d916746ae9f656f6feda9d806c1ea45853e2efa3
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri May 25 16:24:03 2012 -0400

    Remove cinder.context dependency from cinder.rpc
    
    Part of blueprint common-rpc.
    
    This patch removes the usage of cinder.context from cinder.rpc.  Everything
    needed to implement RpcContext now exists within cinder.rpc.
    
    Change-Id: I9e6ec0d22e55d3d4f38e12e0fdd2df745da496f5

 cinder/rpc/amqp.py      |    7 +++----
 cinder/rpc/common.py    |   45 +++++++++++++++++++++++++++++++++++++++++++++
 cinder/rpc/impl_fake.py |    7 +++----
 3 files changed, 51 insertions(+), 8 deletions(-)

commit 2daf95464f18e57edd0409413142f18b11a7745b
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri May 25 14:13:34 2012 -0400

    Localize rpc options to rpc code.
    
    Part of blueprint common-rpc.
    
    Move rpc options from cinder.flags into cinder.rpc code.  This is necessary
    before the rpc code can be moved to openstack-common.
    
    Change-Id: I474c3660e1cbd3ab663571b1e088c84deb905e0b

 cinder/flags.py                       |   38 ---------------------------------
 cinder/rpc/__init__.py                |    6 ++++++
 cinder/rpc/impl_kombu.py              |   33 ++++++++++++++++++++++++++++
 cinder/scheduler/rpcapi.py            |   33 ----------------------------
 cinder/tests/scheduler/test_rpcapi.py |   34 -----------------------------
 5 files changed, 39 insertions(+), 105 deletions(-)

commit 863b6afe12fb409f4866299bb7c975db7c2ad72e
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed May 16 16:40:05 2012 -0400

    Add version to scheduler rpc API.
    
    Part of blueprint versioned-rpc-apis.
    
    One side effect of this change was that cinder.scheduler.api was removed
    in favor of cinder.scheduler.rpcapi.  In this case, the api was just a
    direct wrapper around rpc usage.  For other APIs, I've been following
    the pattern that the rpcapi module provides the rpc client wrapper, and
    if any other client-side logic is needed, that's where an api module is
    used.
    
    Change-Id: Ibd0292936f9afc77aeb5d040660bfa857861eed1

 cinder/manager.py                     |    7 ++-
 cinder/scheduler/api.py               |   72 -----------------------
 cinder/scheduler/manager.py           |    5 ++
 cinder/scheduler/rpcapi.py            |   79 +++++++++++++++++++++++++
 cinder/tests/scheduler/test_rpcapi.py |  103 +++++++++++++++++++++++++++++++++
 cinder/tests/test_quota.py            |    2 +-
 6 files changed, 192 insertions(+), 76 deletions(-)

commit ec6e9e4fde537eedb25946734b07297ba6c63c94
Author: Russell Bryant <rbryant@redhat.com>
Date:   Mon Jul 16 21:24:02 2012 +0100

    Sync cfg and iniparser from openstack-common.
    
    Cherry picks af387b9, cb6bf34 and c6c29ab from Nova.
    
    This change pulls in the latest version of the cfg module from
    openstack-common includes some formatting changes, spelling fixes,
    support for bol/eol spaces in values and support for deprecated
    options.
    
    Change-Id: I58c7b2100b594f5f261c089d674f449a1a7d067b

 cinder/openstack/common/cfg.py       |  108 +++++++++++++++++++++++-----------
 cinder/openstack/common/iniparser.py |    5 +-
 2 files changed, 77 insertions(+), 36 deletions(-)

commit e435bca7181240b3a4e4a9a81a21266ba9a6f3e7
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jul 16 21:19:55 2012 +0100

    Use cfg's new global CONF object
    
    Cherry picks 00786bc from Nova.
    
    Implements blueprint cfg-global-object
    
    Replace cinder.flags.FLAGS with openstack.common.cfg.CONF.
    
    In future, we can do a s/FLAGS/CONF/ across the codebase.
    
    Change-Id: If213a4a5da1faf96aac82f34b18d1e0b061495c0

 bin/cinder-all                 |    3 +-
 bin/cinder-api                 |    3 +-
 bin/cinder-manage              |   31 +++--
 bin/cinder-scheduler           |    3 +-
 bin/cinder-volume              |    4 +-
 bin/clear_rabbit_queues        |    4 +-
 cinder/flags.py                |   17 +--
 cinder/openstack/common/cfg.py |  246 ++++++++++++++++++++++++++--------------
 cinder/test.py                 |    1 +
 cinder/tests/test_flags.py     |   67 ++++-------
 cinder/utils.py                |   21 ----
 11 files changed, 211 insertions(+), 189 deletions(-)

commit 64306e87b38483c00e5055f246294f081e1f0a5b
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jul 17 05:10:29 2012 +0100

    Make use of openstack.common.jsonutils.
    
    This patch imports jsonutils from openstack-common.  It removes the
    equivalent code from cinder.utils and then converts the code base to use
    jsonutils.  The primary motivator for this change was to remove the rest
    of the dependencies from cinder.rpc on cinder.utils.
    
    Change-Id: I4b16577f774194a628bf84d5352e63ec1f868698

 cinder/api/openstack/wsgi.py         |    8 +-
 cinder/notifier/api.py               |    3 +-
 cinder/openstack/common/jsonutils.py |  146 ++++++++++++++++++++++++++++++++++
 cinder/rpc/common.py                 |    6 +-
 cinder/tests/test_utils.py           |   87 --------------------
 cinder/utils.py                      |  100 -----------------------
 openstack-common.conf                |    2 +-
 7 files changed, 156 insertions(+), 196 deletions(-)

commit d211eba148f2ec401dadd62114b9a2ea2c95f11a
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jul 16 21:00:15 2012 +0100

    Sync with latest version of openstack.common.cfg
    
    Cherry picks c1bf456 from Nova.
    
    Changes since last sync:
    
     - Alphabetize imports in openstack/common/cfg.py
     - make reset() clear defaults and overrides
     - automatically create option groups
     - allow options to be marked as required
     - use a list comprehension instead of map()
    
    Change-Id: Ie17fe855a75b5021b031902aa86031d8ddc06dfd
    Reviewed-on: https://review.openstack.org/9867
    Approved: James E. Blair <jeblair@hp.com>
    Reviewed-by: James E. Blair <jeblair@hp.com>
    Tested-by: James E. Blair <jeblair@hp.com>

 cinder/openstack/common/cfg.py |  103 +++++++++++++++++++++++++++++++++-------
 cinder/tests/test_flags.py     |    5 +-
 2 files changed, 90 insertions(+), 18 deletions(-)

commit 2f7feffc64ac435846fb9ee6c467ce128f66b20d
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Tue Jul 17 15:11:26 2012 +0800

    Convert Cinder to use openstack-common jsonutils.
    
    This patch replaces json handling code in Cinder with openstack-common
    jsonutils.  Also remove some unused imports.
    
    Implement blueprint cinder-common-jsonutils
    
    Change-Id: I28c1a095823c2f04f30c32724144297a2d67fba4
    Reviewed-on: https://review.openstack.org/9912
    Reviewed-by: Mark McLoughlin <markmc@redhat.com>
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 cinder/common/policy.py                            |    9 +++++----
 cinder/log.py                                      |    4 ++--
 cinder/notifier/log_notifier.py                    |    4 ++--
 cinder/tests/api/openstack/common.py               |   18 ------------------
 cinder/tests/api/openstack/test_faults.py          |    6 +++---
 .../contrib/test_extended_snapshot_attributes.py   |    8 ++++----
 .../volume/contrib/test_volume_actions.py          |   17 ++++++-----------
 .../tests/api/openstack/volume/test_extensions.py  |    8 ++++----
 cinder/tests/integrated/api/client.py              |    8 ++++----
 cinder/tests/test_log.py                           |    7 +++----
 cinder/volume/nexenta/jsonrpc.py                   |    6 +++---
 cinder/volume/san.py                               |    6 +++---
 12 files changed, 39 insertions(+), 62 deletions(-)

commit a5d16cfb8d6d953d2a9689ddc855cade604e1e9b
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jun 12 17:07:18 2012 -0400

    Add missing ack to impl_qpid.
    
    Fix bug 1012374.
    
    Johannes Erdfelt pointed out that impl_qpid wasn't acking messages that
    it received.  This turned out to be a nasty oversight, resulting in
    unbounded message queue growth inside of the python-qpid library.  This
    fixes it.
    
    Change-Id: I0370293807f0282e1dbdd59246f70be031e888a9
    Reviewed-on: https://review.openstack.org/9908
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 cinder/rpc/impl_qpid.py       |    7 ++++++-
 cinder/tests/rpc/test_qpid.py |    4 ++++
 2 files changed, 10 insertions(+), 1 deletion(-)

commit 22a9da3cc4b0cc17d8d3483b95dc57ed43bf0ecb
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue May 29 16:35:35 2012 -0400

    Move queue_get_for() from db to rpc.
    
    Part of blueprint common-rpc.
    
    The function queue_get_for() is a utility function used by various
    consumers of the rpc API.  This function lived in the db API, but never
    ended up using anything from the database.  This patch moves it into the
    rpc API so that it can be used by other users of rpc once it moves into
    openstack-common.
    
    Change-Id: If92675beecff5471b416a929c161b810e3c71939
    Reviewed-on: https://review.openstack.org/9906
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 bin/cinder-manage                        |    4 ++--
 cinder/db/api.py                         |    8 --------
 cinder/db/sqlalchemy/api.py              |    8 --------
 cinder/rpc/__init__.py                   |    5 +++++
 cinder/scheduler/driver.py               |   12 ++++++------
 cinder/tests/scheduler/test_scheduler.py |   16 ++++++++--------
 cinder/volume/api.py                     |   16 ++++++++--------
 7 files changed, 29 insertions(+), 40 deletions(-)

commit 14a30e0b829a24e21d9c547d2e3fd773b1eab675
Author: Russell Bryant <rbryant@redhat.com>
Date:   Mon May 7 14:10:29 2012 -0400

    Add base support for rpc API versioning.
    
    Part of blueprint versioned-rpc-apis.
    
    This commit includes the base support for versioned RPC APIs.  It
    introduces the RpcProxy and RpcDispatcher classes that have common code
    for handling versioning on the client and server sides, respectively.
    
    RPC APIs will be converted one at a time using this infrastructure.
    
    Change-Id: I07bd82e9ff60c356123950e466caaffdfce79eba
    Reviewed-on: https://review.openstack.org/9901
    Reviewed-by: Huang Zhiteng <zhiteng.huang@intel.com>
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 cinder/manager.py                   |   12 +++
 cinder/rpc/__init__.py              |    8 ++
 cinder/rpc/amqp.py                  |   19 +++--
 cinder/rpc/common.py                |    5 ++
 cinder/rpc/dispatcher.py            |  105 +++++++++++++++++++++++
 cinder/rpc/impl_fake.py             |    9 +-
 cinder/rpc/proxy.py                 |  161 +++++++++++++++++++++++++++++++++++
 cinder/service.py                   |    8 +-
 cinder/tests/rpc/common.py          |   10 ++-
 cinder/tests/rpc/test_dispatcher.py |  109 ++++++++++++++++++++++++
 cinder/tests/rpc/test_proxy.py      |  124 +++++++++++++++++++++++++++
 11 files changed, 550 insertions(+), 20 deletions(-)

commit c044d3c1f6541b4f7d504e9375eb13efdd36e5a2
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed May 2 12:14:56 2012 -0400

    Make kombu support optional for running unit tests.
    
    Fix bug 838386.
    
    Previously, the unit tests required kombu to be installed to run.  This
    patch makes it so the unit tests will still complete successfully, even
    if kombu is not installed.
    
    Change-Id: I06831a37f8c857bbfd0bce1b1c3aeda7d341a589
    Reviewed-on: https://review.openstack.org/9900
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 cinder/tests/rpc/common.py         |   41 ++++++++++++++++++++++++++++++------
 cinder/tests/rpc/test_kombu.py     |   30 ++++++++++++++++++++++----
 cinder/tests/rpc/test_kombu_ssl.py |   23 ++++++++++++++------
 3 files changed, 77 insertions(+), 17 deletions(-)

commit 9e4242c3865da976928ecd43ef82030ac8bfc8cf
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue May 15 14:43:18 2012 -0400

    Stop using cinder.exception from cinder.rpc.
    
    This patch is a part of continuing to remove dependencies from cinder.rpc
    on the rest of cinder.  One RPC related exception was defined in
    cinder.exception, so that was moved to cinder.rpc.common where the rest of
    them live.  These exceptions were changed to no longer use CinderException
    as their base.  Instead, there is a new RPCException base.
    
    One other change that should be reviewed closely is the removal of using
    cinder.exception.wrap_exception() in cinder.rpc.amqp.  As far as I can tell,
    this didn't actually do anything since nothing was being passed in to
    wrap_exception().
    
    Change-Id: I36ff7c05ab0467ad8506b56d561c532eadf8dff8
    Reviewed-on: https://review.openstack.org/9899
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 cinder/exception.py  |    4 ----
 cinder/rpc/amqp.py   |    4 +---
 cinder/rpc/common.py |   31 ++++++++++++++++++++++++++++---
 3 files changed, 29 insertions(+), 10 deletions(-)

commit 4ab214a35ff84f12d09713737aac801fb0256282
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:28:02 2012 +0100

    Remove unused synchronization decorator
    
    This is only used on the compute and network side in Nova.
    
    Change-Id: I6211c32f585b1b5ff66d1a7a5f65dd25857d76f0
    Reviewed-on: https://review.openstack.org/9888
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 cinder/flags.py               |    3 -
 cinder/service.py             |    2 -
 cinder/tests/test_misc.py     |   90 -------------------
 cinder/tests/test_utils.py    |  189 ----------------------------------------
 cinder/utils.py               |  193 -----------------------------------------
 etc/cinder/cinder.conf.sample |    7 --
 tools/clean_file_locks.py     |   63 --------------
 7 files changed, 547 deletions(-)

commit 362576f268e87cb53eb5c5f3dbb46b1768d73dae
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jul 16 21:30:15 2012 +0100

    Remove 'cinder-manage config convert'
    
    This convers the old flagfile style config files into the the
    new .ini style config files. Since Cinder is new and it's first
    release will only support .ini style files there's no need for
    such a command.
    
    Change-Id: Ie2f4cd8b6f5fc66547a59d39aa3d5eb896b1ddf4
    Reviewed-on: https://review.openstack.org/9871
    Reviewed-by: Huang Zhiteng <zhiteng.huang@intel.com>
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 bin/cinder-manage                    |   18 ----
 cinder/compat/__init__.py            |   15 ---
 cinder/compat/flagfile.py            |  188 ----------------------------------
 cinder/tests/test_compat_flagfile.py |  175 -------------------------------
 4 files changed, 396 deletions(-)

commit f07d38bca4ca26edb6f68d4183656b2e87a6c7fc
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jul 16 21:10:17 2012 +0100

    Use cfg's new behavior of reset() clearing overrides
    
    Cherry-picks b858108 from Nova.
    
    Change-Id: I5e14dea25afd5bff03a39671b2d3b85481977bec
    Reviewed-on: https://review.openstack.org/9868
    Reviewed-by: Huang Zhiteng <zhiteng.huang@intel.com>
    Reviewed-by: Vish Ishaya <vishvananda@gmail.com>
    Approved: John Griffith <john.griffith@solidfire.com>
    Tested-by: Jenkins

 cinder/test.py             |   18 +++++-------------
 cinder/tests/__init__.py   |    1 +
 cinder/tests/fake_flags.py |   23 +++++++++++++----------
 cinder/tests/test_flags.py |    2 +-
 4 files changed, 20 insertions(+), 24 deletions(-)

commit ee669789feabf245fe08f88d55e975c66c4789d7
Merge: c4d7c06 da97aa4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 08:11:23 2012 +0000

    Merge changes Id5a0ffab,If283dd7c,I1a11e8fd
    
    * changes:
      Remove old flagfile support
      Misused and not used config options
      Pass 'cinder' project into ConfigOpts

commit c4d7c06a5996e74976be9d3ad6f2902fcf0edd39
Merge: cba4583 519bd24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 18 17:32:54 2012 +0000

    Merge "Convert Cinder to use openstack-common timeutils"

commit ed7e05b00861e1fa3fbc21c4562a17b97d1f16f9
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:35:28 2012 +0100

    Remove unused enabled_apis flag
    
    This is only useful in the context of Nova where there are multiple
    APIs.
    
    Change-Id: I2339a36b45166a24825882e3e35dd00a2dfb6b27

 bin/cinder-all                |    9 ++++-----
 cinder/flags.py               |    3 ---
 etc/cinder/cinder.conf.sample |    2 --
 3 files changed, 4 insertions(+), 10 deletions(-)

commit 8b6397bbf58a6c0da00500407790ed8547741771
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:33:17 2012 +0100

    Remove some unused helper scripts
    
    openstack-config init script and clean-vlans scripts are only relevant
    to nova.
    
    Change-Id: Ib139cae1e0f157f69f7d9ae7186c555538e4b1f5

 contrib/openstack-config |   65 ----------------------------------------------
 tools/clean-vlans        |   25 ------------------
 2 files changed, 90 deletions(-)

commit c73d15d347ba5a973e257932ffb9d6012939e3a5
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:18:40 2012 +0100

    Remove unused wrap_errors decorator
    
    Only used by rescue extension in nova.
    
    Change-Id: I3ade99405736bf8ffb8891a8d53c02905501ae44

 cinder/api/openstack/extensions.py |   12 ------------
 1 file changed, 12 deletions(-)

commit 23df2650371345f05f75208a9e35d7ca0b6421e4
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:10:18 2012 +0100

    Remove unused get_{id,version}_from_href()
    
    The former is only used in the compute API in Nova to e.g. get
    an image or flavor ID from a client supplied ref.
    
    The latter is unused even in Nova since the removal of the 1.0
    API.
    
    Change-Id: I4e00ca816820cb51c0ab3d4d864766d981854939

 cinder/api/openstack/common.py            |   33 ------------------
 cinder/tests/api/openstack/test_common.py |   54 -----------------------------
 2 files changed, 87 deletions(-)

commit b79ad1a950116b6eb0e0f7be48e9ca215681ee1e
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:06:19 2012 +0100

    Remove unused metadata serialization
    
    Only used by the compute API in Nova for e.g. images and server
    metadata.
    
    Change-Id: I223aca1a1c8e35c9339107e5c11bdd8a39968681

 cinder/api/openstack/common.py            |   72 -----------
 cinder/api/openstack/wsgi.py              |   12 --
 cinder/tests/api/openstack/test_common.py |  197 -----------------------------
 3 files changed, 281 deletions(-)

commit 03700f12f356a00c67fe3c301cc297c85e92c69e
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:04:58 2012 +0100

    Remove unused raise_http_conflict_for_instance_invalid_state()
    
    Only used by the compute API in Nova.
    
    Change-Id: I3b2dfa33b4bd1523e13ddb5401bc0397df7466ef

 cinder/api/openstack/common.py            |   15 ---------------
 cinder/tests/api/openstack/test_common.py |   28 ----------------------------
 2 files changed, 43 deletions(-)

commit fbf1ee2069450eb6b55d18fafea6aa44874219c9
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Jul 17 04:00:51 2012 +0100

    Remove unused OverLimitFault
    
    Only used by compute limits in Nova.
    
    Change-Id: I065ca64e060acc0773189f1497fcc54041621f39

 cinder/api/openstack/wsgi.py |   47 ------------------------------------------
 1 file changed, 47 deletions(-)

commit da97aa46d8210abf848520c06a29638f925c42ed
Author: Ghe Rivero <ghe@debian.org>
Date:   Mon Jul 16 20:31:51 2012 +0100

    Remove old flagfile support
    
    Cherry-picks 7e3e9b8 from Nova.
    
    Change-Id: Id5a0ffabf7c6eab0bbda1b130a39a6581b26e350

 Authors                    |    1 +
 bin/cinder-all             |    2 +-
 bin/cinder-api             |    2 +-
 bin/cinder-manage          |    8 ++++----
 bin/cinder-scheduler       |    2 +-
 bin/cinder-volume          |    2 +-
 bin/clear_rabbit_queues    |    2 +-
 cinder/flags.py            |    4 +---
 cinder/tests/test_flags.py |   32 --------------------------------
 cinder/utils.py            |   10 +++++-----
 10 files changed, 16 insertions(+), 49 deletions(-)

commit 78918b8861f11d0145f8cc7310ece6ec8535c6e5
Author: Zhongyue Luo <lzyeval@gmail.com>
Date:   Mon Jul 16 20:37:54 2012 +0100

    Misused and not used config options
    
    Cherry picks dc9c3cb from Nova.
    
    Fixes bug #1000071
    
    [nova.api.sizelimit.py]
    osapi_max_request_body_size: BoolOpt -> IntOpt
    
    [nova.rpc.__init__.py]
    allowed_rpc_exception_modules: IntOpt -> ListOpt
    
    [nova.volume.driver.py]
    num_shell_tries: StrOpt -> IntOpt
    num_iscsi_scan_tries: StrOpt -> IntOpt
    
    [nova.volume.driver.py]
    san_thin_provision: 'true' -> True
    san_is_local: 'false' -> False
    
    Change-Id: If283dd7c4feba69c07bd483acd14f45c2659b743

 cinder/api/sizelimit.py |    6 +++---
 cinder/rpc/__init__.py  |    2 +-
 cinder/volume/driver.py |    4 ++--
 cinder/volume/san.py    |    4 ++--
 4 files changed, 8 insertions(+), 8 deletions(-)

commit 9929f2b2a152f34e24366f5f0afbc071ff40833f
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 16 20:33:45 2012 +0100

    Pass 'cinder' project into ConfigOpts
    
    Cherry-picks fb96f7d from Nova.
    
    Change-Id: I1a11e8fd6a56b2336457f7df178c2b3c187246c3

 cinder/flags.py |    2 ++
 1 file changed, 2 insertions(+)

commit cba45833120ef03fb355f0c8399cd62fc80ef2ac
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jul 16 20:48:02 2012 +0100

    Sync to newer openstack.common.cfg
    
    Cherry picks e0d891e from Nova.
    
    Changes since last sync are:
    
     * New ConfigOpts.find_file() for locating conf files
     * Support for directory source of config files
     * Provide file extension when when looking for files
     * Some refactoring of the cfg cache
     * Add caching to openstack.common.cfg
    
    Change-Id: If9852d0431093d590252bb704e934a4a56ef0263

 cinder/openstack/common/cfg.py |  206 +++++++++++++++++++++++++++++++---------
 1 file changed, 163 insertions(+), 43 deletions(-)

commit 519bd2451d8b3aff6661d18e340b8f31a69e1091
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Fri Jul 13 13:58:25 2012 +0800

    Convert Cinder to use openstack-common timeutils
    
    This patch is part of effort to get Cinder to use openstack-common
    package.  This part is to replace time related functions in utils.py
    with 'timeutils' module.
    
    Implement blueprint cinder-common-timeutils
    
    Change-Id: Ic5e9e317a95a7399f0604823eec76b3642a0c1b1

 bin/cinder-manage                        |    1 -
 cinder/common/memorycache.py             |    5 +-
 cinder/context.py                        |    7 +-
 cinder/db/sqlalchemy/api.py              |   16 ++--
 cinder/db/sqlalchemy/models.py           |    7 +-
 cinder/notifier/api.py                   |    5 +-
 cinder/scheduler/driver.py               |    3 +-
 cinder/test.py                           |    3 +-
 cinder/tests/api/openstack/fakes.py      |    3 +-
 cinder/tests/scheduler/test_scheduler.py |    5 +-
 cinder/tests/test_utils.py               |  118 ++----------------------------
 cinder/utils.py                          |   82 +--------------------
 cinder/volume/api.py                     |    3 +-
 cinder/volume/manager.py                 |    3 +-
 14 files changed, 45 insertions(+), 216 deletions(-)

commit 008cad14287e17e7bc9ea434b12715c011de880d
Merge: c3bc1aa c7690fc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 12 20:03:42 2012 +0000

    Merge "Updated HpSanISCSIDriver to use initialize/terminate methods."

commit c3bc1aa3a60432152d2f44d3963c451ed483ef79
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Jul 12 09:01:14 2012 -0600

    Do not duplicate nova docs in cinder
    
    * This modifies the index.rst file to give interim info about cinder
    * We were regenerating the nova docs copied over which was bad!
    * Fixes bug 1022315
    
    Change-Id: I46531976f3e6521cec69cc13276d328d6c2d2da3

 doc/source/index.rst |   36 +++---------------------------------
 1 file changed, 3 insertions(+), 33 deletions(-)

commit b46a0afc37ce2f93bcf3527593eec1097792cae5
Author: John Griffith <john.griffith@solidfire.com>
Date:   Fri Jul 6 18:28:53 2012 -0600

    Remove unused db api methods
    
      * Implements cinder blueprint remove-extra-dbapi-methods
      * Related to cinder initial-db-cleanup:
          Remove db api methods associated with removed tables
    	  Modify/Remove tests associated with removed tables
    	  Remove non-existing db API calls from volume/api
    
    Change-Id: I60e0c6ffad9c78a29d56a27a04e9ec5ebaa1f251

 cinder/db/api.py                                |  938 +++--------------------
 cinder/db/sqlalchemy/api.py                     |  515 ++++---------
 cinder/openstack/common/timeutils.py            |  109 +++
 cinder/tests/notifier/test_capacity_notifier.py |   59 --
 openstack-common.conf                           |    2 +-
 5 files changed, 393 insertions(+), 1230 deletions(-)

commit 263d7b905446e8eaadbcc0501846da7d771e57ad
Author: John Griffith <john.griffith@solidfire.com>
Date:   Tue Jul 3 16:40:15 2012 -0600

    Create single initial Cinder DB migration file
    
     * Implements blueprint initial-db-cleanup
     * Sets initial migration
     * Removes unused tables that were brought in from nova
     * Condenses db migrations into the single initial migration/creation
     * Add explicit mysql set InnoDB in UTF8 loop
     * Folow up patches include:
     *    Remove unused db API calls
     *    Fix/Remove affected tests
    
    Change-Id: If24b00747dbbff7037b7aca39602d5f0b1c6aa50

 cinder/db/migration.py                             |    3 +
 .../sqlalchemy/migrate_repo/versions/001_austin.py |  627 ----------------
 .../migrate_repo/versions/001_cinder_init.py       |  272 +++++++
 .../sqlalchemy/migrate_repo/versions/002_bexar.py  |  236 ------
 .../versions/002_postgresql_downgrade.sql          |   20 -
 .../migrate_repo/versions/002_sqlite_downgrade.sql |  388 ----------
 .../versions/003_add_label_to_networks.py          |   42 --
 .../migrate_repo/versions/003_sqlite_downgrade.sql |  111 ---
 .../migrate_repo/versions/004_add_zone_tables.py   |   66 --
 .../versions/005_add_instance_metadata.py          |   81 ---
 .../versions/006_add_provider_data_to_volumes.py   |   54 --
 .../migrate_repo/versions/006_sqlite_downgrade.sql |  113 ---
 .../versions/007_add_ipv6_to_fixed_ips.py          |   70 --
 .../migrate_repo/versions/007_sqlite_downgrade.sql |   79 --
 .../versions/008_add_instance_types.py             |   85 ---
 .../versions/009_add_instance_migrations.py        |   70 --
 .../versions/010_add_os_type_to_instances.py       |   45 --
 .../migrate_repo/versions/011_live_migration.py    |   85 ---
 .../versions/012_add_ipv6_flatmanager.py           |   90 ---
 .../migrate_repo/versions/012_sqlite_upgrade.sql   |  195 -----
 .../versions/013_add_flavors_to_migrations.py      |   43 --
 .../migrate_repo/versions/013_sqlite_downgrade.sql |   69 --
 .../014_add_instance_type_id_to_instances.py       |   74 --
 .../015_add_auto_assign_to_floating_ips.py         |   35 -
 .../migrate_repo/versions/015_sqlite_downgrade.sql |   62 --
 .../versions/016_make_quotas_key_and_value.py      |  213 ------
 .../017_make_instance_type_id_an_integer.py        |   87 ---
 .../versions/018_rename_server_management_url.py   |   35 -
 .../versions/019_add_volume_snapshot_support.py    |   82 ---
 .../versions/020_add_snapshot_id_to_volumes.py     |   40 --
 .../migrate_repo/versions/020_sqlite_downgrade.sql |  119 ---
 .../migrate_repo/versions/021_rename_image_ids.py  |   38 -
 .../versions/022_set_engine_mysql_innodb.py        |   64 --
 .../versions/023_add_vm_mode_to_instances.py       |   42 --
 .../versions/024_add_block_device_mapping.py       |   92 ---
 .../versions/025_add_uuid_to_instances.py          |   45 --
 .../migrate_repo/versions/026_add_agent_table.py   |   89 ---
 .../versions/027_add_provider_firewall_rules.py    |   65 --
 .../versions/028_add_instance_type_extra_specs.py  |   76 --
 .../versions/029_add_zone_weight_offsets.py        |   41 --
 .../migrate_repo/versions/030_multi_nic.py         |  146 ----
 .../migrate_repo/versions/030_sqlite_downgrade.sql |  377 ----------
 .../031_fk_fixed_ips_virtual_interface_id.py       |   59 --
 .../migrate_repo/versions/031_sqlite_downgrade.sql |   48 --
 .../migrate_repo/versions/031_sqlite_upgrade.sql   |   48 --
 .../versions/032_add_root_device_name.py           |   42 --
 .../migrate_repo/versions/033_ha_network.py        |   42 --
 .../migrate_repo/versions/033_sqlite_downgrade.sql |  193 -----
 .../034_change_instance_id_in_migrations.py        |   46 --
 .../migrate_repo/versions/035_secondary_dns.py     |   39 -
 .../versions/036_change_flavor_id_in_migrations.py |   79 --
 .../versions/037_instances_drop_admin_pass.py      |   42 --
 .../versions/038_add_uuid_to_virtual_interfaces.py |   45 --
 .../migrate_repo/versions/038_sqlite_downgrade.sql |   63 --
 .../versions/039_add_instances_accessip.py         |   49 --
 .../versions/040_add_uuid_to_networks.py           |   45 --
 .../versions/041_add_config_drive_to_instances.py  |   36 -
 .../versions/042_add_volume_types_and_extradata.py |  122 ----
 .../migrate_repo/versions/042_sqlite_downgrade.sql |  129 ----
 .../migrate_repo/versions/043_add_vsa_data.py      |   84 ---
 .../versions/044_update_instance_states.py         |   52 --
 .../versions/045_add_network_priority.py           |   44 --
 .../migrate_repo/versions/046_add_instance_swap.py |   49 --
 .../versions/047_remove_instances_fk_from_vif.py   |   61 --
 .../migrate_repo/versions/047_sqlite_downgrade.sql |   46 --
 .../migrate_repo/versions/047_sqlite_upgrade.sql   |   45 --
 .../migrate_repo/versions/048_add_zone_name.py     |   33 -
 .../versions/049_add_instances_progress.py         |   44 --
 .../versions/050_add_disk_config_to_instances.py   |   37 -
 .../migrate_repo/versions/050_sqlite_downgrade.sql |  207 ------
 .../051_add_vcpu_weight_to_instance_types.py       |   34 -
 .../versions/052_kill_export_devices.py            |   65 --
 ..._add_connection_info_to_block_device_mapping.py |   38 -
 .../migrate_repo/versions/053_sqlite_downgrade.sql |   87 ---
 .../versions/054_add_bw_usage_data_cache.py        |   64 --
 .../versions/055_convert_flavor_id_to_str.py       |  112 ---
 .../migrate_repo/versions/056_add_s3_images.py     |   60 --
 .../versions/057_add_sm_driver_tables.py           |  113 ---
 .../versions/058_rename_managed_disk.py            |   37 -
 .../versions/059_split_rxtx_quota_into_network.py  |   61 --
 .../migrate_repo/versions/059_sqlite_downgrade.sql |  137 ----
 .../migrate_repo/versions/059_sqlite_upgrade.sql   |   87 ---
 .../versions/060_remove_network_fk_from_vif.py     |   62 --
 .../migrate_repo/versions/060_sqlite_downgrade.sql |   45 --
 .../migrate_repo/versions/060_sqlite_upgrade.sql   |   44 --
 .../versions/061_add_index_to_instance_uuid.py     |   29 -
 .../versions/062_add_instance_info_cache_table.py  |   70 --
 .../versions/063_add_instance_faults_table.py      |   60 --
 ...ange_instance_id_to_uuid_in_instance_actions.py |   80 ---
 .../065_add_index_to_instance_project_id.py        |   31 -
 .../066_preload_instance_info_cache_table.py       |   31 -
 .../067_add_pool_and_interface_to_floating_ip.py   |   41 --
 .../migrate_repo/versions/067_sqlite_downgrade.sql |   69 --
 .../versions/068_add_instance_attribute.py         |   36 -
 .../migrate_repo/versions/068_sqlite_downgrade.sql |  219 ------
 .../migrate_repo/versions/069_block_migration.py   |   50 --
 .../migrate_repo/versions/070_sqlite_downgrade.sql |  103 ---
 .../migrate_repo/versions/070_sqlite_upgrade.sql   |   99 ---
 .../versions/070_untie_nova_network_models.py      |  100 ---
 .../versions/071_add_host_aggregate_tables.py      |  108 ---
 .../migrate_repo/versions/072_add_dns_table.py     |   77 --
 .../migrate_repo/versions/072_mysql_upgrade.sql    |   13 -
 .../migrate_repo/versions/073_add_capacity.py      |   49 --
 .../versions/074_change_flavor_local_gb.py         |  130 ----
 .../migrate_repo/versions/074_sqlite_upgrade.sql   |  313 --------
 .../075_convert_bw_usage_to_store_network_id.py    |   97 ---
 .../versions/076_remove_unique_constraints.py      |   84 ---
 .../migrate_repo/versions/076_sqlite_upgrade.sql   |   61 --
 .../migrate_repo/versions/077_convert_to_utf8.py   |   61 --
 .../versions/078_add_rpc_info_to_zones.py          |   46 --
 .../migrate_repo/versions/078_sqlite_downgrade.sql |   35 -
 .../versions/079_add_zone_name_to_instances.py     |   30 -
 ...080_add_hypervisor_hostname_to_compute_nodes.py |   30 -
 .../versions/081_drop_instance_id_bw_cache.py      |   69 --
 .../migrate_repo/versions/082_zone_to_cell.py      |   35 -
 .../migrate_repo/versions/083_quota_class.py       |   61 --
 .../migrate_repo/versions/084_quotas_unlimited.py  |   43 --
 .../085_add_index_to_fixed_ips_by_address.py       |   31 -
 .../versions/086_set_engine_mysql_innodb.py        |   44 --
 .../versions/087_add_uuid_to_bw_usage_cache.py     |   56 --
 ..._instance_id_to_uuid_in_block_device_mapping.py |   81 ---
 .../migrate_repo/versions/088_sqlite_downgrade.sql |   97 ---
 .../migrate_repo/versions/088_sqlite_upgrade.sql   |   97 ---
 .../versions/089_add_volume_id_mappings.py         |  116 ---
 .../versions/090_modify_volume_id_datatype.py      |  239 -------
 .../migrate_repo/versions/090_sqlite_downgrade.sql |  226 ------
 .../migrate_repo/versions/090_sqlite_upgrade.sql   |  226 ------
 .../versions/091_convert_volume_ids_to_uuid.py     |  145 ----
 .../versions/092_change_fk_instance_id_to_uuid.py  |   94 ---
 .../migrate_repo/versions/092_sqlite_downgrade.sql |  133 ----
 .../migrate_repo/versions/092_sqlite_upgrade.sql   |  132 ----
 cinder/db/sqlalchemy/migration.py                  |   24 +-
 cinder/db/sqlalchemy/models.py                     |  756 +-------------------
 cinder/tests/test_db_api.py                        |  331 ---------
 cinder/tests/test_migrations.py                    |   17 +-
 135 files changed, 322 insertions(+), 12424 deletions(-)

commit c7690fc53dba8ce7221c5f7afd93238be1ea0498
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Thu Jul 5 15:08:34 2012 +0800

    Updated HpSanISCSIDriver to use initialize/terminate methods.
    
    This is based on Nirmal Ranganathan's patch for Nova-volume, which
    added a new key 'host' for initialize/terminate volume connection
    information in nova to fix bug 992729.
    
    HpSanISCSIDriver should adopt the change in order to work properly.
    Also added missing unit tests for the HpSanISCSIDriver.
    
    Fixes bug 992729.
    
    Change-Id: I9584811a340799161d8c9ae88b1def282380c9ad
    Signed-off-by: Zhiteng Huang <zhiteng.huang@intel.com>

 Authors                               |    1 +
 cinder/tests/test_HpSanISCSIDriver.py |  212 +++++++++++++++++++++++++++++++++
 cinder/volume/san.py                  |   89 ++++++--------
 3 files changed, 252 insertions(+), 50 deletions(-)

commit a55f0732211f0a1a8f6db40e6d1f464050234844
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Tue Jul 3 17:49:16 2012 -0700

    Pruned Authors file to active contributors (from nova-volumes).
    
    Active contributors was fetched from git blame output, for files
    inside the nova/nova/volumes folder in nova.
    
    Change-Id: I8cc63975bf1160ca76badc54fd4d51077873dfee

 Authors |  172 ++-------------------------------------------------------------
 1 file changed, 5 insertions(+), 167 deletions(-)

commit 57d6c5d1bc914c4dfe36311ec83828c5a85fa7ca
Author: Clark Boylan <clark.boylan@gmail.com>
Date:   Mon Jul 2 14:17:31 2012 -0700

    Move nova-manage.rst to cinder-manage.rst.
    
    Cinder docs were not building because sphinx was looking for
    cinder-manage.rst which did not exist. The file was simply misnamed
    and renaming it to cinder-manage.rst allows the docs to build.
    
    Change-Id: I68f4ed81230cc277a96bb34dfa172e5ce7788ac4

 Authors                          |    1 +
 doc/source/man/cinder-manage.rst |  281 ++++++++++++++++++++++++++++++++++++++
 doc/source/man/nova-manage.rst   |  281 --------------------------------------
 3 files changed, 282 insertions(+), 281 deletions(-)

commit a9c8212f6925b9f4e0feb25621266265968ee1df
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Jun 13 12:38:35 2012 -0600

    Add action extensions to support nova integration.
    
     * Adds VolumeActions extension to support key functions
        described in blueprint volume-decoupling
     * Adds snapshot translations to APIs
     * Should be back in sync with 7992
     * blueprint compat-extensions
     * sleepsonthefloor: Moved added snapshot attributes to extension, added tests
     * sleepsonthefloor: Lock pep8==1.1 in tox.ini
    
    Change-Id: I9c6118cd434ca8b275d2386546923f932420b975

 cinder/api/openstack/volume/__init__.py            |    3 +-
 .../volume/contrib/extended_snapshot_attributes.py |  125 +++++++++++++++++++
 .../api/openstack/volume/contrib/volume_actions.py |  114 ++++++++++++++++++
 cinder/api/openstack/volume/snapshots.py           |   23 ++--
 cinder/tests/api/openstack/fakes.py                |   24 ++--
 .../contrib/test_extended_snapshot_attributes.py   |  126 ++++++++++++++++++++
 .../volume/contrib/test_volume_actions.py          |  107 +++++++++++++++++
 .../tests/api/openstack/volume/test_snapshots.py   |   31 ++---
 cinder/tests/policy.json                           |    3 +-
 cinder/volume/manager.py                           |    6 +-
 etc/cinder/policy.json                             |    3 +-
 tox.ini                                            |    2 +-
 12 files changed, 523 insertions(+), 44 deletions(-)

commit 2c6e2732592849016f248434469f5289780e375c
Merge: a071c75 9c55720
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:23:58 2012 +0000

    Merge "Revert "Add action extensions to support nova integration.""

commit 9c55720129df12780d1d6480942d6d96abf54a01
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed Jun 13 17:51:37 2012 +0000

    Revert "Add action extensions to support nova integration."
    
    This reverts commit 8d8903f466cd7d4270e46ad896817fe94c99b575

 cinder/api/openstack/volume/__init__.py            |    3 +-
 .../api/openstack/volume/contrib/volume_actions.py |  114 --------------------
 cinder/tests/api/openstack/fakes.py                |   24 ++---
 .../volume/contrib/test_volume_actions.py          |  107 ------------------
 cinder/volume/manager.py                           |    6 +-
 5 files changed, 15 insertions(+), 239 deletions(-)

commit a071c75c7efeaaffa8faab91ead8d7d71b273cb8
Merge: f8c9b20 8d8903f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 12 04:26:40 2012 +0000

    Merge "Add action extensions to support nova integration."

commit f8c9b20b2dd31d8501d26111bde4107df8bb42e7
Author: John Griffith <john.griffith@solidfire.com>
Date:   Thu Jun 7 14:38:29 2012 -0600

    Fix volume['id'] from integer to string
    
    * This is the same fix as nova bug 1010200
    * Missed in volume uuid migration
    
    Change-Id: Ib433ea6a1f247aad7fcba72680fd14e82387ed62

 cinder/volume/driver.py |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 8d8903f466cd7d4270e46ad896817fe94c99b575
Author: Anthony Young <sleepsonthefloor@gmail.com>
Date:   Thu May 31 12:03:02 2012 -0700

    Add action extensions to support nova integration.
    
     * Adds VolumeActions extension to support key functions
       described in blueprint volume-decoupling
    
    Change-Id: I1310c9e813c089619e8ecdf56c631d8257c0897e

 cinder/api/openstack/volume/__init__.py            |    3 +-
 .../api/openstack/volume/contrib/volume_actions.py |  114 ++++++++++++++++++++
 cinder/tests/api/openstack/fakes.py                |   24 ++---
 .../volume/contrib/test_volume_actions.py          |  107 ++++++++++++++++++
 cinder/volume/manager.py                           |    6 +-
 5 files changed, 239 insertions(+), 15 deletions(-)

commit 0cd8f34eed28a2c1a77d56fe4b0e00816ef48780
Author: John Griffith <john.griffith@solidfire.com>
Date:   Fri Jun 1 10:46:14 2012 -0600

    Set pep8 version to 1.1 in test_requires
    
    * Fixes bug 1007518
    * Changes in pep8 cause new failures
    * Fix up the ones we found anyway
    
    Change-Id: I5cd73a252f73893e4672a2e39b667c519423ae3f

 .../versions/010_add_os_type_to_instances.py       |    4 ++--
 .../014_add_instance_type_id_to_instances.py       |    8 ++++----
 .../versions/016_make_quotas_key_and_value.py      |    4 ++--
 .../versions/025_add_uuid_to_instances.py          |    4 ++--
 .../migrate_repo/versions/030_multi_nic.py         |    2 +-
 .../versions/036_change_flavor_id_in_migrations.py |   16 ++++++++--------
 .../versions/038_add_uuid_to_virtual_interfaces.py |    4 ++--
 .../versions/040_add_uuid_to_networks.py           |    4 ++--
 .../075_convert_bw_usage_to_store_network_id.py    |    8 ++++----
 .../versions/081_drop_instance_id_bw_cache.py      |    4 ++--
 .../versions/089_add_volume_id_mappings.py         |    2 +-
 tools/hacking.py                                   |    8 ++++----
 tools/test-requires                                |    2 +-
 13 files changed, 35 insertions(+), 35 deletions(-)

commit 2263cf7db7672699e29a76d68dbe91cad2071b86
Author: Anthony Young <sleepsonthefloor@gmail.com>
Date:   Wed May 30 15:24:41 2012 -0700

    Fix topics so that the do not collide with nova.
    
     * Without this, there are issues running cinder if
       you have previously run n-vol
     * Fix pep8
    
    Change-Id: Id56dbfd6c4f62a74cc57edcc7859753dd7e36229

 cinder/db/sqlalchemy/api.py              |    2 +-
 cinder/flags.py                          |    4 ++--
 cinder/scheduler/driver.py               |    4 ++--
 cinder/service.py                        |    5 +++--
 cinder/tests/scheduler/test_scheduler.py |    9 ++++++---
 cinder/volume/manager.py                 |    2 +-
 6 files changed, 15 insertions(+), 11 deletions(-)

commit 50792c2ff41fdc7e73b3e3c51f4510366debfd14
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon May 21 14:40:18 2012 -0400

    Fix up coverage and jenkins test running.
    
    The docs job wasn't working because of an un-renamed file.
    Coverage wasn't running in jenkins with the xml output file.
    Remove the .cache.bundle support that we're moving away from.
    
    Change-Id: I1140baa53dee8b14ac4d1f8549425a0fdd7a8425

 doc/ext/cinder_autodoc.py |   12 ++++++
 doc/ext/cinder_todo.py    |  101 +++++++++++++++++++++++++++++++++++++++++++++
 doc/ext/nova_autodoc.py   |   12 ------
 doc/ext/nova_todo.py      |  101 ---------------------------------------------
 run_tests.sh              |    5 +++
 setup.cfg                 |    8 ++--
 tox.ini                   |   14 +++----
 7 files changed, 128 insertions(+), 125 deletions(-)

commit fe23db33801fa72665e480534d070ddae4a9c451
Author: John Griffith <john.griffith@solidfire.com>
Date:   Wed May 9 11:02:34 2012 -0600

    Remove instance Foreign Key in volumes table, replace with instance_uuid
    
    * Remove the instance relationship and instance_id FK
    * Add instance_uuuid column to volumes table
    
    Change-Id: I54d723dcb9819731a58ec64095c54c99aa9e5dc4

 cinder/api/openstack/volume/volumes.py             |   12 +-
 cinder/db/api.py                                   |    9 +-
 cinder/db/sqlalchemy/api.py                        |   46 ++++---
 .../versions/092_change_fk_instance_id_to_uuid.py  |   94 ++++++++++++++
 .../migrate_repo/versions/092_sqlite_downgrade.sql |  133 ++++++++++++++++++++
 .../migrate_repo/versions/092_sqlite_upgrade.sql   |  132 +++++++++++++++++++
 cinder/db/sqlalchemy/models.py                     |   16 +--
 cinder/exception.py                                |    4 +
 cinder/tests/api/openstack/fakes.py                |    6 +-
 cinder/tests/api/openstack/volume/test_volumes.py  |    4 +-
 cinder/tests/test_migrations.py                    |   14 ++-
 cinder/tests/test_volume.py                        |   30 ++---
 cinder/volume/api.py                               |    4 +-
 cinder/volume/manager.py                           |   12 +-
 etc/cinder/cinder.conf.sample                      |    2 +-
 15 files changed, 436 insertions(+), 82 deletions(-)

commit 1c52fb3041df5661756246705942c60b4b1448d5
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu May 3 21:45:20 2012 -0700

    Align the tox.ini file.
    
    Change-Id: I0d1731f157d12bfcc1e4933dd71c49e9bda4116a

 tox.ini |   20 ++++++++++++--------
 1 file changed, 12 insertions(+), 8 deletions(-)

commit 4c202523890d805c8e42802117d85d6f6e2cddae
Author: Nirmal Ranganathan <rnirmal@gmail.com>
Date:   Thu May 3 14:54:27 2012 -0500

    Removed cinder/api/openstack/compute and moved the relevant pieces under
    cinder/api/openstack/volume. Fixes bug 994177.
    
    Change-Id: I1b953a96a1d69a62ad312d381cead4cd231a3998

 cinder/api/openstack/compute/__init__.py           |   23 --
 cinder/api/openstack/compute/schemas/atom-link.rng |  141 -----------
 .../openstack/compute/schemas/v1.1/extension.rng   |   11 -
 .../openstack/compute/schemas/v1.1/extensions.rng  |    6 -
 .../openstack/compute/schemas/v1.1/metadata.rng    |    9 -
 cinder/api/openstack/compute/versions.py           |  244 --------------------
 cinder/api/openstack/compute/views/versions.py     |   94 --------
 cinder/api/openstack/volume/schemas/atom-link.rng  |  141 +++++++++++
 .../openstack/volume/schemas/v1.1/extension.rng    |   11 +
 .../openstack/volume/schemas/v1.1/extensions.rng   |    6 +
 .../api/openstack/volume/schemas/v1.1/metadata.rng |    9 +
 cinder/api/openstack/volume/versions.py            |  169 +++++++++++++-
 cinder/api/openstack/volume/views/versions.py      |   63 ++++-
 cinder/api/openstack/xmlutil.py                    |    4 +-
 cinder/tests/api/openstack/fakes.py                |    2 +-
 15 files changed, 392 insertions(+), 541 deletions(-)

commit c53d8e343e50d4cf7ea9a6a81258848c2d893bfb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 3 10:48:26 2012 -0700

    Initial fork out of Nova.

 .gitignore                                         |   24 +
 .gitreview                                         |    4 +
 .mailmap                                           |   81 +
 Authors                                            |  211 +
 HACKING.rst                                        |  213 +
 LICENSE                                            |  176 +
 MANIFEST.in                                        |   37 +
 README.rst                                         |   21 +
 babel.cfg                                          |    2 +
 bin/cinder-all                                     |   70 +
 bin/cinder-api                                     |   47 +
 bin/cinder-manage                                  |  635 +
 bin/cinder-rootwrap                                |   74 +
 bin/cinder-scheduler                               |   51 +
 bin/cinder-volume                                  |   49 +
 bin/clear_rabbit_queues                            |   80 +
 cinder/__init__.py                                 |   42 +
 cinder/api/__init__.py                             |   17 +
 cinder/api/auth.py                                 |  103 +
 cinder/api/openstack/__init__.py                   |  143 +
 cinder/api/openstack/auth.py                       |   65 +
 cinder/api/openstack/common.py                     |  380 +
 cinder/api/openstack/compute/__init__.py           |   23 +
 cinder/api/openstack/compute/schemas/atom-link.rng |  141 +
 .../openstack/compute/schemas/v1.1/extension.rng   |   11 +
 .../openstack/compute/schemas/v1.1/extensions.rng  |    6 +
 .../openstack/compute/schemas/v1.1/metadata.rng    |    9 +
 cinder/api/openstack/compute/versions.py           |  244 +
 cinder/api/openstack/compute/views/versions.py     |   94 +
 cinder/api/openstack/extensions.py                 |  395 +
 cinder/api/openstack/urlmap.py                     |  297 +
 cinder/api/openstack/volume/__init__.py            |   62 +
 cinder/api/openstack/volume/contrib/__init__.py    |   39 +
 .../openstack/volume/contrib/types_extra_specs.py  |  152 +
 .../api/openstack/volume/contrib/types_manage.py   |   91 +
 cinder/api/openstack/volume/extensions.py          |   33 +
 cinder/api/openstack/volume/snapshots.py           |  170 +
 cinder/api/openstack/volume/types.py               |   76 +
 cinder/api/openstack/volume/versions.py            |   83 +
 cinder/api/openstack/volume/views/__init__.py      |   16 +
 cinder/api/openstack/volume/views/versions.py      |   36 +
 cinder/api/openstack/volume/volumes.py             |  263 +
 cinder/api/openstack/wsgi.py                       | 1123 ++
 cinder/api/openstack/xmlutil.py                    |  908 ++
 cinder/api/sizelimit.py                            |   54 +
 cinder/common/__init__.py                          |   15 +
 cinder/common/memorycache.py                       |   64 +
 cinder/common/policy.py                            |  222 +
 cinder/compat/__init__.py                          |   15 +
 cinder/compat/flagfile.py                          |  188 +
 cinder/compute/aggregate_states.py                 |   44 +
 cinder/context.py                                  |  138 +
 cinder/db/__init__.py                              |   23 +
 cinder/db/api.py                                   | 1335 ++
 cinder/db/base.py                                  |   40 +
 cinder/db/migration.py                             |   35 +
 cinder/db/sqlalchemy/__init__.py                   |   17 +
 cinder/db/sqlalchemy/api.py                        | 1499 ++
 cinder/db/sqlalchemy/migrate_repo/README           |    4 +
 cinder/db/sqlalchemy/migrate_repo/manage.py        |    4 +
 cinder/db/sqlalchemy/migrate_repo/migrate.cfg      |   20 +
 .../sqlalchemy/migrate_repo/versions/001_austin.py |  627 +
 .../sqlalchemy/migrate_repo/versions/002_bexar.py  |  236 +
 .../versions/002_postgresql_downgrade.sql          |   20 +
 .../migrate_repo/versions/002_sqlite_downgrade.sql |  388 +
 .../versions/003_add_label_to_networks.py          |   42 +
 .../migrate_repo/versions/003_sqlite_downgrade.sql |  111 +
 .../migrate_repo/versions/004_add_zone_tables.py   |   66 +
 .../versions/005_add_instance_metadata.py          |   81 +
 .../versions/006_add_provider_data_to_volumes.py   |   54 +
 .../migrate_repo/versions/006_sqlite_downgrade.sql |  113 +
 .../versions/007_add_ipv6_to_fixed_ips.py          |   70 +
 .../migrate_repo/versions/007_sqlite_downgrade.sql |   79 +
 .../versions/008_add_instance_types.py             |   85 +
 .../versions/009_add_instance_migrations.py        |   70 +
 .../versions/010_add_os_type_to_instances.py       |   45 +
 .../migrate_repo/versions/011_live_migration.py    |   85 +
 .../versions/012_add_ipv6_flatmanager.py           |   90 +
 .../migrate_repo/versions/012_sqlite_upgrade.sql   |  195 +
 .../versions/013_add_flavors_to_migrations.py      |   43 +
 .../migrate_repo/versions/013_sqlite_downgrade.sql |   69 +
 .../014_add_instance_type_id_to_instances.py       |   74 +
 .../015_add_auto_assign_to_floating_ips.py         |   35 +
 .../migrate_repo/versions/015_sqlite_downgrade.sql |   62 +
 .../versions/016_make_quotas_key_and_value.py      |  213 +
 .../017_make_instance_type_id_an_integer.py        |   87 +
 .../versions/018_rename_server_management_url.py   |   35 +
 .../versions/019_add_volume_snapshot_support.py    |   82 +
 .../versions/020_add_snapshot_id_to_volumes.py     |   40 +
 .../migrate_repo/versions/020_sqlite_downgrade.sql |  119 +
 .../migrate_repo/versions/021_rename_image_ids.py  |   38 +
 .../versions/022_set_engine_mysql_innodb.py        |   64 +
 .../versions/023_add_vm_mode_to_instances.py       |   42 +
 .../versions/024_add_block_device_mapping.py       |   92 +
 .../versions/025_add_uuid_to_instances.py          |   45 +
 .../migrate_repo/versions/026_add_agent_table.py   |   89 +
 .../versions/027_add_provider_firewall_rules.py    |   65 +
 .../versions/028_add_instance_type_extra_specs.py  |   76 +
 .../versions/029_add_zone_weight_offsets.py        |   41 +
 .../migrate_repo/versions/030_multi_nic.py         |  146 +
 .../migrate_repo/versions/030_sqlite_downgrade.sql |  377 +
 .../031_fk_fixed_ips_virtual_interface_id.py       |   59 +
 .../migrate_repo/versions/031_sqlite_downgrade.sql |   48 +
 .../migrate_repo/versions/031_sqlite_upgrade.sql   |   48 +
 .../versions/032_add_root_device_name.py           |   42 +
 .../migrate_repo/versions/033_ha_network.py        |   42 +
 .../migrate_repo/versions/033_sqlite_downgrade.sql |  193 +
 .../034_change_instance_id_in_migrations.py        |   46 +
 .../migrate_repo/versions/035_secondary_dns.py     |   39 +
 .../versions/036_change_flavor_id_in_migrations.py |   79 +
 .../versions/037_instances_drop_admin_pass.py      |   42 +
 .../versions/038_add_uuid_to_virtual_interfaces.py |   45 +
 .../migrate_repo/versions/038_sqlite_downgrade.sql |   63 +
 .../versions/039_add_instances_accessip.py         |   49 +
 .../versions/040_add_uuid_to_networks.py           |   45 +
 .../versions/041_add_config_drive_to_instances.py  |   36 +
 .../versions/042_add_volume_types_and_extradata.py |  122 +
 .../migrate_repo/versions/042_sqlite_downgrade.sql |  129 +
 .../migrate_repo/versions/043_add_vsa_data.py      |   84 +
 .../versions/044_update_instance_states.py         |   52 +
 .../versions/045_add_network_priority.py           |   44 +
 .../migrate_repo/versions/046_add_instance_swap.py |   49 +
 .../versions/047_remove_instances_fk_from_vif.py   |   61 +
 .../migrate_repo/versions/047_sqlite_downgrade.sql |   46 +
 .../migrate_repo/versions/047_sqlite_upgrade.sql   |   45 +
 .../migrate_repo/versions/048_add_zone_name.py     |   33 +
 .../versions/049_add_instances_progress.py         |   44 +
 .../versions/050_add_disk_config_to_instances.py   |   37 +
 .../migrate_repo/versions/050_sqlite_downgrade.sql |  207 +
 .../051_add_vcpu_weight_to_instance_types.py       |   34 +
 .../versions/052_kill_export_devices.py            |   65 +
 ..._add_connection_info_to_block_device_mapping.py |   38 +
 .../migrate_repo/versions/053_sqlite_downgrade.sql |   87 +
 .../versions/054_add_bw_usage_data_cache.py        |   64 +
 .../versions/055_convert_flavor_id_to_str.py       |  112 +
 .../migrate_repo/versions/056_add_s3_images.py     |   60 +
 .../versions/057_add_sm_driver_tables.py           |  113 +
 .../versions/058_rename_managed_disk.py            |   37 +
 .../versions/059_split_rxtx_quota_into_network.py  |   61 +
 .../migrate_repo/versions/059_sqlite_downgrade.sql |  137 +
 .../migrate_repo/versions/059_sqlite_upgrade.sql   |   87 +
 .../versions/060_remove_network_fk_from_vif.py     |   62 +
 .../migrate_repo/versions/060_sqlite_downgrade.sql |   45 +
 .../migrate_repo/versions/060_sqlite_upgrade.sql   |   44 +
 .../versions/061_add_index_to_instance_uuid.py     |   29 +
 .../versions/062_add_instance_info_cache_table.py  |   70 +
 .../versions/063_add_instance_faults_table.py      |   60 +
 ...ange_instance_id_to_uuid_in_instance_actions.py |   80 +
 .../065_add_index_to_instance_project_id.py        |   31 +
 .../066_preload_instance_info_cache_table.py       |   31 +
 .../067_add_pool_and_interface_to_floating_ip.py   |   41 +
 .../migrate_repo/versions/067_sqlite_downgrade.sql |   69 +
 .../versions/068_add_instance_attribute.py         |   36 +
 .../migrate_repo/versions/068_sqlite_downgrade.sql |  219 +
 .../migrate_repo/versions/069_block_migration.py   |   50 +
 .../migrate_repo/versions/070_sqlite_downgrade.sql |  103 +
 .../migrate_repo/versions/070_sqlite_upgrade.sql   |   99 +
 .../versions/070_untie_nova_network_models.py      |  100 +
 .../versions/071_add_host_aggregate_tables.py      |  108 +
 .../migrate_repo/versions/072_add_dns_table.py     |   77 +
 .../migrate_repo/versions/072_mysql_upgrade.sql    |   13 +
 .../migrate_repo/versions/073_add_capacity.py      |   49 +
 .../versions/074_change_flavor_local_gb.py         |  130 +
 .../migrate_repo/versions/074_sqlite_upgrade.sql   |  313 +
 .../075_convert_bw_usage_to_store_network_id.py    |   97 +
 .../versions/076_remove_unique_constraints.py      |   84 +
 .../migrate_repo/versions/076_sqlite_upgrade.sql   |   61 +
 .../migrate_repo/versions/077_convert_to_utf8.py   |   61 +
 .../versions/078_add_rpc_info_to_zones.py          |   46 +
 .../migrate_repo/versions/078_sqlite_downgrade.sql |   35 +
 .../versions/079_add_zone_name_to_instances.py     |   30 +
 ...080_add_hypervisor_hostname_to_compute_nodes.py |   30 +
 .../versions/081_drop_instance_id_bw_cache.py      |   69 +
 .../migrate_repo/versions/082_zone_to_cell.py      |   35 +
 .../migrate_repo/versions/083_quota_class.py       |   61 +
 .../migrate_repo/versions/084_quotas_unlimited.py  |   43 +
 .../085_add_index_to_fixed_ips_by_address.py       |   31 +
 .../versions/086_set_engine_mysql_innodb.py        |   44 +
 .../versions/087_add_uuid_to_bw_usage_cache.py     |   56 +
 ..._instance_id_to_uuid_in_block_device_mapping.py |   81 +
 .../migrate_repo/versions/088_sqlite_downgrade.sql |   97 +
 .../migrate_repo/versions/088_sqlite_upgrade.sql   |   97 +
 .../versions/089_add_volume_id_mappings.py         |  116 +
 .../versions/090_modify_volume_id_datatype.py      |  239 +
 .../migrate_repo/versions/090_sqlite_downgrade.sql |  226 +
 .../migrate_repo/versions/090_sqlite_upgrade.sql   |  226 +
 .../versions/091_convert_volume_ids_to_uuid.py     |  145 +
 cinder/db/sqlalchemy/migration.py                  |  129 +
 cinder/db/sqlalchemy/models.py                     | 1063 ++
 cinder/db/sqlalchemy/session.py                    |  156 +
 cinder/exception.py                                |  938 ++
 cinder/flags.py                                    |  356 +
 cinder/locale/bs/LC_MESSAGES/nova.po               | 8201 ++++++++++
 cinder/locale/cs/LC_MESSAGES/nova.po               | 8251 ++++++++++
 cinder/locale/da/LC_MESSAGES/nova.po               | 8203 ++++++++++
 cinder/locale/de/LC_MESSAGES/nova.po               | 8208 ++++++++++
 cinder/locale/en_AU/LC_MESSAGES/nova.po            | 8209 ++++++++++
 cinder/locale/en_GB/LC_MESSAGES/nova.po            | 8209 ++++++++++
 cinder/locale/es/LC_MESSAGES/nova.po               | 8220 ++++++++++
 cinder/locale/fr/LC_MESSAGES/nova.po               | 8251 ++++++++++
 cinder/locale/it/LC_MESSAGES/nova.po               | 8210 ++++++++++
 cinder/locale/ja/LC_MESSAGES/nova.po               | 8196 ++++++++++
 cinder/locale/ko/LC_MESSAGES/nova.po               | 8207 ++++++++++
 cinder/locale/nova.pot                             | 7463 +++++++++
 cinder/locale/pt_BR/LC_MESSAGES/nova.po            | 8208 ++++++++++
 cinder/locale/ru/LC_MESSAGES/nova.po               | 8304 ++++++++++
 cinder/locale/tl/LC_MESSAGES/nova.po               | 8200 ++++++++++
 cinder/locale/tr/LC_MESSAGES/nova.po               | 8202 ++++++++++
 cinder/locale/uk/LC_MESSAGES/nova.po               | 8199 ++++++++++
 cinder/locale/zh_CN/LC_MESSAGES/nova.po            | 8064 ++++++++++
 cinder/locale/zh_TW/LC_MESSAGES/nova.po            | 8207 ++++++++++
 cinder/log.py                                      |  416 +
 cinder/manager.py                                  |  205 +
 cinder/notifier/__init__.py                        |   14 +
 cinder/notifier/api.py                             |  133 +
 cinder/notifier/capacity_notifier.py               |   81 +
 cinder/notifier/list_notifier.py                   |   71 +
 cinder/notifier/log_notifier.py                    |   34 +
 cinder/notifier/no_op_notifier.py                  |   19 +
 cinder/notifier/rabbit_notifier.py                 |   46 +
 cinder/notifier/test_notifier.py                   |   25 +
 cinder/openstack/__init__.py                       |   15 +
 cinder/openstack/common/README                     |   13 +
 cinder/openstack/common/__init__.py                |   15 +
 cinder/openstack/common/cfg.py                     | 1298 ++
 cinder/openstack/common/exception.py               |  147 +
 cinder/openstack/common/importutils.py             |   45 +
 cinder/openstack/common/iniparser.py               |  126 +
 cinder/openstack/common/local.py                   |   37 +
 cinder/policy.py                                   |   90 +
 cinder/quota.py                                    |  234 +
 cinder/rootwrap/__init__.py                        |   16 +
 cinder/rootwrap/filters.py                         |  147 +
 cinder/rootwrap/volume.py                          |   45 +
 cinder/rootwrap/wrapper.py                         |   60 +
 cinder/rpc/__init__.py                             |  227 +
 cinder/rpc/amqp.py                                 |  405 +
 cinder/rpc/common.py                               |  220 +
 cinder/rpc/impl_fake.py                            |  185 +
 cinder/rpc/impl_kombu.py                           |  713 +
 cinder/rpc/impl_qpid.py                            |  563 +
 cinder/scheduler/__init__.py                       |   27 +
 cinder/scheduler/api.py                            |   72 +
 cinder/scheduler/chance.py                         |   83 +
 cinder/scheduler/driver.py                         |  164 +
 cinder/scheduler/host_manager.py                   |   36 +
 cinder/scheduler/manager.py                        |  204 +
 cinder/scheduler/simple.py                         |  144 +
 cinder/service.py                                  |  429 +
 cinder/test.py                                     |  295 +
 cinder/testing/README.rst                          |   66 +
 cinder/testing/fake/__init__.py                    |    1 +
 cinder/testing/runner.py                           |  372 +
 cinder/tests/__init__.py                           |   84 +
 cinder/tests/api/__init__.py                       |   19 +
 cinder/tests/api/openstack/__init__.py             |   19 +
 cinder/tests/api/openstack/common.py               |   58 +
 cinder/tests/api/openstack/fakes.py                |  234 +
 cinder/tests/api/openstack/test_common.py          |  526 +
 cinder/tests/api/openstack/test_faults.py          |  208 +
 cinder/tests/api/openstack/test_wsgi.py            |  833 +
 cinder/tests/api/openstack/test_xmlutil.py         |  722 +
 cinder/tests/api/openstack/volume/__init__.py      |   19 +
 .../tests/api/openstack/volume/contrib/__init__.py |   19 +
 .../volume/contrib/test_types_extra_specs.py       |  202 +
 .../openstack/volume/contrib/test_types_manage.py  |  103 +
 .../api/openstack/volume/extensions/__init__.py    |   15 +
 .../api/openstack/volume/extensions/foxinsocks.py  |   94 +
 .../tests/api/openstack/volume/test_extensions.py  |  156 +
 cinder/tests/api/openstack/volume/test_router.py   |  105 +
 .../tests/api/openstack/volume/test_snapshots.py   |  214 +
 cinder/tests/api/openstack/volume/test_types.py    |  146 +
 cinder/tests/api/openstack/volume/test_volumes.py  |  290 +
 cinder/tests/api/test_auth.py                      |   58 +
 cinder/tests/api/test_sizelimit.py                 |   51 +
 cinder/tests/api/test_wsgi.py                      |   67 +
 cinder/tests/db/__init__.py                        |   20 +
 cinder/tests/db/fakes.py                           |   47 +
 cinder/tests/declare_flags.py                      |   23 +
 cinder/tests/fake_flags.py                         |   34 +
 cinder/tests/fake_utils.py                         |  112 +
 cinder/tests/integrated/__init__.py                |   22 +
 cinder/tests/integrated/api/__init__.py            |   20 +
 cinder/tests/integrated/api/client.py              |  217 +
 cinder/tests/integrated/integrated_helpers.py      |  130 +
 cinder/tests/integrated/test_extensions.py         |   42 +
 cinder/tests/integrated/test_login.py              |   31 +
 cinder/tests/integrated/test_volumes.py            |  181 +
 cinder/tests/integrated/test_xml.py                |   52 +
 cinder/tests/monkey_patch_example/__init__.py      |   33 +
 cinder/tests/monkey_patch_example/example_a.py     |   29 +
 cinder/tests/monkey_patch_example/example_b.py     |   30 +
 cinder/tests/notifier/__init__.py                  |   16 +
 cinder/tests/notifier/test_capacity_notifier.py    |   59 +
 cinder/tests/notifier/test_list_notifier.py        |   84 +
 cinder/tests/policy.json                           |   25 +
 cinder/tests/rpc/__init__.py                       |   19 +
 cinder/tests/rpc/common.py                         |  239 +
 cinder/tests/rpc/test_common.py                    |  147 +
 cinder/tests/rpc/test_fake.py                      |   33 +
 cinder/tests/rpc/test_kombu.py                     |  350 +
 cinder/tests/rpc/test_kombu_ssl.py                 |   58 +
 cinder/tests/rpc/test_qpid.py                      |  340 +
 cinder/tests/runtime_flags.py                      |   23 +
 cinder/tests/scheduler/__init__.py                 |   19 +
 cinder/tests/scheduler/fakes.py                    |   62 +
 cinder/tests/scheduler/test_scheduler.py           |  322 +
 cinder/tests/test_SolidFireSanISCSIDriver.py       |  186 +
 cinder/tests/test_api.py                           |   75 +
 cinder/tests/test_compat_flagfile.py               |  175 +
 cinder/tests/test_context.py                       |   70 +
 cinder/tests/test_db_api.py                        |  331 +
 cinder/tests/test_exception.py                     |  126 +
 cinder/tests/test_flags.py                         |  146 +
 cinder/tests/test_iscsi.py                         |  116 +
 cinder/tests/test_log.py                           |  218 +
 cinder/tests/test_migrations.conf                  |    9 +
 cinder/tests/test_migrations.py                    |  296 +
 cinder/tests/test_misc.py                          |  184 +
 cinder/tests/test_netapp.py                        |  927 ++
 cinder/tests/test_nexenta.py                       |  281 +
 cinder/tests/test_notifier.py                      |  133 +
 cinder/tests/test_nova_rootwrap.py                 |  133 +
 cinder/tests/test_policy.py                        |  189 +
 cinder/tests/test_quota.py                         |  316 +
 cinder/tests/test_service.py                       |  221 +
 cinder/tests/test_skip_examples.py                 |   47 +
 cinder/tests/test_test.py                          |   44 +
 cinder/tests/test_test_utils.py                    |   29 +
 cinder/tests/test_utils.py                         | 1188 ++
 cinder/tests/test_versions.py                      |   59 +
 cinder/tests/test_volume.py                        |  501 +
 cinder/tests/test_volume_types.py                  |  167 +
 cinder/tests/test_volume_types_extra_specs.py      |  130 +
 cinder/tests/test_wsgi.py                          |   92 +
 cinder/tests/utils.py                              |   25 +
 cinder/utils.py                                    | 1678 ++
 cinder/version.py                                  |   38 +
 cinder/volume/__init__.py                          |   25 +
 cinder/volume/api.py                               |  371 +
 cinder/volume/driver.py                            |  709 +
 cinder/volume/iscsi.py                             |  160 +
 cinder/volume/manager.py                           |  331 +
 cinder/volume/netapp.py                            |  676 +
 cinder/volume/nexenta/__init__.py                  |   33 +
 cinder/volume/nexenta/jsonrpc.py                   |   84 +
 cinder/volume/nexenta/volume.py                    |  282 +
 cinder/volume/san.py                               |  897 ++
 cinder/volume/volume_types.py                      |  125 +
 cinder/volume/xensm.py                             |  237 +
 cinder/wsgi.py                                     |  374 +
 contrib/openstack-config                           |   65 +
 contrib/redhat-eventlet.patch                      |   16 +
 doc/.gitignore                                     |    3 +
 doc/Makefile                                       |   97 +
 doc/README.rst                                     |   55 +
 doc/ext/nova_autodoc.py                            |   12 +
 doc/ext/nova_todo.py                               |  101 +
 doc/find_autodoc_modules.sh                        |   20 +
 doc/generate_autodoc_index.sh                      |   46 +
 doc/source/_ga/layout.html                         |   17 +
 doc/source/_static/basic.css                       |  416 +
 doc/source/_static/default.css                     |  230 +
 doc/source/_static/jquery.tweet.js                 |  154 +
 doc/source/_static/tweaks.css                      |  218 +
 doc/source/_theme/layout.html                      |   95 +
 doc/source/_theme/theme.conf                       |    5 +
 doc/source/conf.py                                 |  234 +
 doc/source/devref/addmethod.openstackapi.rst       |   56 +
 doc/source/devref/aggregates.rst                   |   65 +
 doc/source/devref/api.rst                          |  270 +
 doc/source/devref/architecture.rst                 |   52 +
 doc/source/devref/auth.rst                         |  276 +
 doc/source/devref/cloudpipe.rst                    |  166 +
 doc/source/devref/database.rst                     |   63 +
 doc/source/devref/development.environment.rst      |  152 +
 doc/source/devref/down.sh                          |    7 +
 doc/source/devref/fakes.rst                        |   85 +
 doc/source/devref/filter_scheduler.rst             |  258 +
 doc/source/devref/gerrit.rst                       |   16 +
 doc/source/devref/glance.rst                       |   28 +
 doc/source/devref/il8n.rst                         |   34 +
 doc/source/devref/index.rst                        |   86 +
 doc/source/devref/interfaces                       |   17 +
 doc/source/devref/jenkins.rst                      |   41 +
 doc/source/devref/launchpad.rst                    |   54 +
 doc/source/devref/multinic.rst                     |   39 +
 doc/source/devref/network.rst                      |  128 +
 doc/source/devref/nova.rst                         |  215 +
 doc/source/devref/rc.local                         |   36 +
 doc/source/devref/rpc.rst                          |  151 +
 doc/source/devref/scheduler.rst                    |   71 +
 doc/source/devref/server.conf.template             |   34 +
 doc/source/devref/services.rst                     |   55 +
 doc/source/devref/threading.rst                    |   51 +
 doc/source/devref/unit_tests.rst                   |  159 +
 doc/source/devref/up.sh                            |    7 +
 doc/source/devref/volume.rst                       |   66 +
 doc/source/devref/xensmvolume.rst                  |   88 +
 doc/source/image_src/multinic_1.odg                |  Bin 0 -> 12363 bytes
 doc/source/image_src/multinic_2.odg                |  Bin 0 -> 13425 bytes
 doc/source/image_src/multinic_3.odg                |  Bin 0 -> 13598 bytes
 doc/source/images/NOVA_ARCH.png                    |  Bin 0 -> 191332 bytes
 doc/source/images/NOVA_ARCH.svg                    | 5854 +++++++
 doc/source/images/NOVA_ARCH_200dpi.png             |  Bin 0 -> 439024 bytes
 doc/source/images/NOVA_ARCH_66dpi.png              |  Bin 0 -> 110890 bytes
 doc/source/images/NOVA_clouds_A_B.png              |  Bin 0 -> 77007 bytes
 doc/source/images/NOVA_clouds_A_B.svg              |16342 ++++++++++++++++++++
 doc/source/images/NOVA_clouds_C1_C2.svg            | 9763 ++++++++++++
 doc/source/images/NOVA_clouds_C1_C2.svg.png        |  Bin 0 -> 448574 bytes
 doc/source/images/Novadiagram.png                  |  Bin 0 -> 52609 bytes
 doc/source/images/base_scheduler.png               |  Bin 0 -> 17068 bytes
 doc/source/images/cloudpipe.png                    |  Bin 0 -> 89812 bytes
 doc/source/images/fabric.png                       |  Bin 0 -> 125915 bytes
 doc/source/images/filteringWorkflow1.png           |  Bin 0 -> 66997 bytes
 doc/source/images/filteringWorkflow2.png           |  Bin 0 -> 75288 bytes
 doc/source/images/multinic_dhcp.png                |  Bin 0 -> 54531 bytes
 doc/source/images/multinic_flat.png                |  Bin 0 -> 40871 bytes
 doc/source/images/multinic_vlan.png                |  Bin 0 -> 58552 bytes
 doc/source/images/nova.compute.api.create.png      |  Bin 0 -> 50171 bytes
 doc/source/images/novascreens.png                  |  Bin 0 -> 27949 bytes
 doc/source/images/novashvirtually.png              |  Bin 0 -> 39000 bytes
 doc/source/images/rpc/arch.png                     |  Bin 0 -> 26690 bytes
 doc/source/images/rpc/arch.svg                     |  292 +
 doc/source/images/rpc/flow1.png                    |  Bin 0 -> 40982 bytes
 doc/source/images/rpc/flow1.svg                    |  617 +
 doc/source/images/rpc/flow2.png                    |  Bin 0 -> 30650 bytes
 doc/source/images/rpc/flow2.svg                    |  423 +
 doc/source/images/rpc/rabt.png                     |  Bin 0 -> 44964 bytes
 doc/source/images/rpc/rabt.svg                     |  581 +
 doc/source/images/rpc/state.png                    |  Bin 0 -> 38543 bytes
 doc/source/images/vmwareapi_blockdiagram.jpg       |  Bin 0 -> 75363 bytes
 doc/source/images/zone_aware_overview.png          |  Bin 0 -> 56142 bytes
 doc/source/images/zone_aware_scheduler.png         |  Bin 0 -> 20902 bytes
 doc/source/images/zone_overview.png                |  Bin 0 -> 51587 bytes
 doc/source/index.rst                               |   67 +
 doc/source/man/nova-manage.rst                     |  281 +
 etc/cinder/api-paste.ini                           |   51 +
 etc/cinder/cinder.conf.sample                      |  673 +
 etc/cinder/logging_sample.conf                     |   76 +
 etc/cinder/policy.json                             |   15 +
 openstack-common.conf                              |    7 +
 pylintrc                                           |   38 +
 run_tests.sh                                       |  176 +
 setup.cfg                                          |   32 +
 setup.py                                           |   73 +
 tools/clean-vlans                                  |   25 +
 tools/clean_file_locks.py                          |   63 +
 tools/conf/create_conf.py                          |  159 +
 tools/conf/generate_sample.sh                      |   25 +
 tools/enable-pre-commit-hook.sh                    |   42 +
 tools/hacking.py                                   |  391 +
 tools/install_venv.py                              |  248 +
 tools/pip-requires                                 |   22 +
 tools/rfc.sh                                       |  150 +
 tools/test-requires                                |   11 +
 tools/with_venv.sh                                 |    4 +
 tox.ini                                            |   38 +
 458 files changed, 247534 insertions(+)